<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CosmoDiet - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–∞—Ü–∏–æ–Ω–∞</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÄ</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
            --dark-bg: #0a0e17;
            --dark-accent: #00d9ff;
            --dark-accent2: #9d4edd;
            --dark-text: #e0e7ff;
            --dark-card: rgba(16, 23, 41, 0.8);
            
            /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
            --light-bg: #f4f7ff;
            --light-card: rgba(255, 255, 255, 0.9);
            --light-text: #0b1220;
            --light-accent: #0b5bff;
            --light-accent2: #7b3dff;
            --light-gradient:
                radial-gradient(1200px 800px at 10% -10%, rgba(224, 235, 255, 0.9) 0%, rgba(224, 235, 255, 0) 60%),
                radial-gradient(900px 700px at 90% 10%, rgba(214, 230, 255, 0.8) 0%, rgba(214, 230, 255, 0) 60%),
                linear-gradient(135deg, #f7f9ff 0%, #e9efff 50%, #dfe7ff 100%);
            
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --transition: all 0.3s ease;
            --glow: 0 0 15px rgba(0, 217, 255, 0.7);
            --shadow-soft-light: 0 12px 30px rgba(16, 31, 70, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', Arial, sans-serif;
            background: linear-gradient(135deg, #0a0e17 0%, #1a1f3c 50%, #0d152e 100%);
            color: var(--dark-text);
            min-height: 100vh;
            overflow-x: hidden;
            transition: var(--transition);
        }

        body.light-theme {
            background: var(--light-gradient);
            color: var(--light-text);
            --glass: rgba(0, 0, 0, 0.04);
            --glass-border: rgba(0, 0, 0, 0.12);
            --glow: 0 0 20px rgba(27, 91, 255, 0.35);
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            padding: 12px 0;
            backdrop-filter: blur(15px);
            background: rgba(10, 14, 23, 0.95);
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        body.light-theme header {
            background: rgba(248, 249, 255, 0.95);
            border-bottom-color: rgba(11, 91, 255, 0.15);
            box-shadow: 0 5px 20px rgba(16, 31, 70, 0.1);
        }

        .header-container {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 24px;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo i {
            font-size: 1.8rem;
            animation: pulse 2s infinite;
        }

        /* LIGHT THEME - LOGO */
        body.light-theme .logo {
            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .nav-space {
            flex: 1;
        }

        .btn-home {
            padding: 10px 18px;
            border-radius: 12px;
            border: 2px solid rgba(0, 217, 255, 0.25);
            background: rgba(10, 20, 45, 0.7);
            color: #00d9ff;
            text-decoration: none;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        .btn-home:hover {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(123, 61, 255, 0.15));
            border-color: rgba(0, 217, 255, 0.6);
            box-shadow: 0 8px 20px rgba(0, 217, 255, 0.25), inset 0 0 10px rgba(0, 217, 255, 0.08);
            transform: translateY(-2px);
        }

        /* LIGHT THEME - HOME BUTTON */
        body.light-theme .btn-home {
            border-color: rgba(11, 91, 255, 0.3);
            background: rgba(11, 91, 255, 0.08);
            color: var(--light-accent);
        }

        body.light-theme .btn-home:hover {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.15), rgba(123, 61, 255, 0.1));
            border-color: var(--light-accent);
            box-shadow: 0 8px 20px rgba(11, 91, 255, 0.2), inset 0 0 10px rgba(11, 91, 255, 0.06);
            transform: translateY(-2px);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .theme-toggle, .language-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--glass-border);
            background: var(--glass);
            color: var(--dark-text);
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::before, .language-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: 0.5s;
        }

        .theme-toggle:hover::before, .language-toggle:hover::before {
            left: 100%;
        }

        body.light-theme .theme-toggle,
        body.light-theme .language-toggle {
            color: var(--light-text);
        }

        .theme-toggle:hover, .language-toggle:hover {
            background: var(--glass);
            border-color: var(--dark-accent);
            box-shadow: var(--glow);
            transform: translateY(-3px);
        }

        body.light-theme .theme-toggle, 
        body.light-theme .language-toggle {
            border-color: rgba(0, 0, 0, 0.1);
            color: var(--light-text);
        }

        body.light-theme .theme-toggle:hover,
        body.light-theme .language-toggle:hover {
            border-color: var(--light-accent);
        }

        .language-dropdown {
            position: relative;
        }

        .language-menu {
            position: absolute;
            top: 50px;
            right: 0;
            background: rgba(10, 14, 23, 0.98);
            border: 1px solid rgba(0, 217, 255, 0.2);
            border-radius: 12px;
            min-width: 150px;
            display: none;
            flex-direction: column;
            gap: 0;
            padding: 8px;
            z-index: 1001;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        body.light-theme .language-menu {
            background: rgba(248, 249, 255, 0.98);
            border-color: rgba(11, 91, 255, 0.2);
            box-shadow: 0 10px 40px rgba(16, 31, 70, 0.15);
        }

        .language-menu.active {
            display: flex;
        }

        .language-option {
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            transition: var(--transition);
        }

        body.light-theme .language-option {
            color: rgba(11, 20, 32, 0.7);
        }

        .language-option.active,
        .language-option:hover {
            background: rgba(0, 217, 255, 0.15);
            color: #00d9ff;
        }

        body.light-theme .language-option.active,
        body.light-theme .language-option:hover {
            background: rgba(11, 91, 255, 0.15);
            color: #0b5bff;
        }

        .language-option img {
            width: 24px;
            height: 16px;
            border-radius: 2px;
        }

        /* LIGHT THEME - INLINE STYLE OVERRIDES */
        body.light-theme [style*="color: #00d9ff"],
        body.light-theme [style*="color:#00d9ff"] {
            color: var(--light-accent) !important;
        }

        body.light-theme [style*="color: #9d4edd"],
        body.light-theme [style*="color:#9d4edd"] {
            color: var(--light-accent2) !important;
        }

        body.light-theme [style*="color: rgba(224, 231, 255"],
        body.light-theme [style*="color:rgba(224, 231, 255"] {
            color: rgba(11, 20, 32, 0.75) !important;
        }

        body.light-theme [style*="background: rgba(0, 0, 0"],
        body.light-theme [style*="background:rgba(0, 0, 0"] {
            background: rgba(255, 255, 255, 0.4) !important;
        }

        /* GENERAL TEXT ELEMENTS - LIGHT THEME */
        body.light-theme h1,
        body.light-theme h2,
        body.light-theme h3,
        body.light-theme h4,
        body.light-theme h5,
        body.light-theme h6,
        body.light-theme label,
        body.light-theme p {
            color: var(--light-text);
        }

        /* LIGHT THEME - GLOW REDUCTION FOR QUALITY CHECK BLOCK */
        body.light-theme [style*="text-shadow: 0 0 20px"],
        body.light-theme [style*="text-shadow:0 0 20px"] {
            text-shadow: 0 0 3px rgba(77, 195, 255, 0.4) !important;
        }

        body.light-theme [style*="filter: drop-shadow"],
        body.light-theme [style*="filter:drop-shadow"] {
            filter: drop-shadow(0 0 2px rgba(77, 195, 255, 0.2)) !important;
        }

        body.light-theme .quality-model-card i {
            text-shadow: 0 0 3px rgba(77, 195, 255, 0.3) !important;
            filter: drop-shadow(0 0 2px rgba(77, 195, 255, 0.15)) !important;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 140px 32px 80px;
            min-height: 100vh;
        }

        /* –ü–†–û–ì–†–ï–°–° –° –≠–¢–ê–ü–ê–ú–ò */
        .progress-container {
            margin-bottom: 60px;
            position: relative;
        }

        .steps-tracker {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            position: relative;
            z-index: 2;
            margin-bottom: 30px;
        }

        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
            text-align: center;
        }

        .step-circle {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.04);
            border: 2px solid rgba(0, 217, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            color: rgba(0, 217, 255, 0.5);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 5;
            margin: 0 auto;
            backdrop-filter: blur(8px);
            box-shadow: inset 0 0 20px rgba(0, 217, 255, 0.1);
        }

        .step-circle i {
            font-size: 1.5rem;
            text-shadow: 0 0 12px rgba(0, 217, 255, 0.4);
        }

        .step-circle.active {
            background: linear-gradient(135deg, var(--dark-accent), var(--dark-accent2));
            color: white;
            border-color: var(--dark-accent);
            box-shadow: 0 0 35px rgba(0, 217, 255, 0.8), inset 0 0 20px rgba(0, 217, 255, 0.3);
            transform: scale(1.25);
            backdrop-filter: blur(15px);
        }

        .step-circle.completed {
            background: rgba(0, 217, 255, 0.2);
            color: var(--dark-accent);
            border-color: var(--dark-accent);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.3);
        }

        .step-label {
            font-size: 0.75rem;
            color: rgba(0, 217, 255, 0.5);
            margin-top: 8px;
            font-weight: 600;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .step-circle.active ~ .step-label,
        .step-circle.completed ~ .step-label {
            color: var(--dark-accent);
        }

        /* –ü–†–û–ì–†–ï–°–° –ü–û–õ–û–°–ê */
        .progress-bar-container {
            position: absolute;
            top: 24px;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(0, 217, 255, 0.1);
            border-radius: 2px;
            z-index: 1;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2), var(--dark-accent));
            border-radius: 2px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.6);
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            right: 0;
            top: -4px;
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, var(--dark-accent), var(--dark-accent2));
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.8);
        }

        /* LIGHT THEME - STEP STYLES */
        body.light-theme .step-circle {
            background: rgba(11, 91, 255, 0.06);
            border-color: rgba(11, 91, 255, 0.25);
            color: rgba(11, 91, 255, 0.6);
            box-shadow: inset 0 0 20px rgba(11, 91, 255, 0.08);
        }

        body.light-theme .step-circle i {
            text-shadow: 0 0 12px rgba(11, 91, 255, 0.3);
        }

        body.light-theme .step-circle.active {
            background: linear-gradient(135deg, var(--light-accent), var(--light-accent2));
            color: white;
            border-color: var(--light-accent);
            box-shadow: 0 0 35px rgba(11, 91, 255, 0.6), inset 0 0 20px rgba(11, 91, 255, 0.2);
        }

        body.light-theme .step-circle.completed {
            background: rgba(11, 91, 255, 0.15);
            color: var(--light-accent);
            border-color: var(--light-accent);
            box-shadow: 0 0 15px rgba(11, 91, 255, 0.2);
        }

        body.light-theme .step-label {
            color: rgba(11, 91, 255, 0.5);
        }

        body.light-theme .step-circle.active ~ .step-label,
        body.light-theme .step-circle.completed ~ .step-label {
            color: var(--light-accent);
        }

        body.light-theme .progress-bar-container {
            background: rgba(11, 91, 255, 0.1);
        }

        body.light-theme .progress-bar-fill {
            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2), var(--light-accent));
            box-shadow: 0 0 20px rgba(11, 91, 255, 0.5);
        }

        body.light-theme .progress-bar-fill::after {
            background: linear-gradient(135deg, var(--light-accent), var(--light-accent2));
            box-shadow: 0 0 15px rgba(11, 91, 255, 0.6);
        }

        /* –ö–û–ù–¢–ï–ù–¢ –®–ê–ì–û–í */
        .wizard-content {
            min-height: 500px;
        }

        .step-content {
            display: none;
            opacity: 0;
            animation: fadeInSlide 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .step-content.active {
            display: block;
            opacity: 1;
        }

        @keyframes fadeInSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.8rem;
            margin-bottom: 16px;
            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2), var(--dark-accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            letter-spacing: 1px;
            text-shadow: 0 0 30px rgba(0, 217, 255, 0.2);
        }

        body.light-theme .step-title {
            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2), var(--light-accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .step-subtitle {
            font-size: 1.05rem;
            color: rgba(224, 231, 255, 0.7);
            margin-bottom: 40px;
            font-weight: 300;
        }

        body.light-theme .step-subtitle {
            color: rgba(11, 20, 32, 0.75);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(123, 61, 255, 0.08));
            border: 2px solid rgba(0, 217, 255, 0.25);
            border-radius: 28px;
            padding: 32px 24px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(12px);
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 217, 255, 0.1), inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }

        .card::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            transition: left 0.5s ease;
            pointer-events: none;
        }

        .card:hover::before {
            left: 100%;
        }

        .card:hover {
            transform: translateY(-12px);
            border-color: rgba(0, 217, 255, 0.6);
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.18), rgba(123, 61, 255, 0.15));
            box-shadow: 0 20px 50px rgba(0, 217, 255, 0.35), inset 0 1px 1px rgba(255, 255, 255, 0.15);
        }

        .card.selected {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.3), rgba(123, 61, 255, 0.25));
            border: 2px solid var(--dark-accent);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.5), inset 0 0 20px rgba(0, 217, 255, 0.15);
        }

        .card-icon {
            font-size: 3.2rem;
            margin-bottom: 16px;
            color: var(--dark-accent);
            filter: drop-shadow(0 0 12px rgba(0, 217, 255, 0.5));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .card-title {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--dark-text);
            margin-bottom: 8px;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 0.5px;
        }

        .card-desc {
            font-size: 0.8rem;
            color: rgba(224, 231, 255, 0.6);
            line-height: 1.3;
        }

        /* LIGHT THEME - CARD STYLES */
        body.light-theme .card {
            background: var(--light-card);
            border-color: rgba(11, 91, 255, 0.2);
            box-shadow: 0 8px 32px rgba(11, 91, 255, 0.08), inset 0 1px 1px rgba(11, 91, 255, 0.08);
        }

        body.light-theme .card::before {
            background: linear-gradient(90deg, transparent, rgba(11, 91, 255, 0.1), transparent);
        }

        body.light-theme .card:hover {
            transform: translateY(-12px);
            border-color: rgba(11, 91, 255, 0.5);
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.1), rgba(123, 61, 255, 0.08));
            box-shadow: 0 20px 50px rgba(11, 91, 255, 0.2), inset 0 1px 1px rgba(11, 91, 255, 0.1);
        }

        body.light-theme .card.selected {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.15), rgba(123, 61, 255, 0.12));
            border-color: var(--light-accent);
            box-shadow: 0 0 30px rgba(11, 91, 255, 0.35), inset 0 0 20px rgba(11, 91, 255, 0.08);
        }

        body.light-theme .card-icon {
            color: var(--light-accent);
            filter: drop-shadow(0 0 12px rgba(11, 91, 255, 0.4));
        }

        body.light-theme .card-title {
            color: var(--light-text);
        }

        body.light-theme .card-desc {
            color: rgba(11, 20, 32, 0.6);
        }

        /* –ü–†–û–î–£–ö–¢–´ */
        .products-list {
            margin-bottom: 30px;
        }

        .search-box {
            margin-bottom: 24px;
        }

        .search-input {
            width: 100%;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.06);
            border: 2px solid rgba(0, 217, 255, 0.2);
            border-radius: 14px;
            color: var(--dark-text);
            font-family: 'Exo 2', Arial, sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--dark-accent);
            background: rgba(0, 217, 255, 0.08);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
        }

        .search-input::placeholder {
            color: rgba(224, 231, 255, 0.4);
        }

        /* LIGHT THEME - INPUT STYLES */
        body.light-theme .search-input {
            background: rgba(11, 91, 255, 0.05);
            border-color: rgba(11, 91, 255, 0.2);
            color: var(--light-text);
        }

        body.light-theme .search-input:focus {
            border-color: var(--light-accent);
            background: rgba(11, 91, 255, 0.1);
            box-shadow: 0 0 20px rgba(11, 91, 255, 0.15);
        }

        body.light-theme .search-input::placeholder {
            color: rgba(11, 20, 32, 0.4);
        }

        .product-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.07), rgba(0,217,255,0.04));
            border: 2px solid rgba(0, 217, 255, 0.25);
            border-radius: 18px;
            padding: 18px 20px;
            display: flex;
            gap: 18px;
            align-items: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 14px;
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 16px rgba(0, 217, 255, 0.08);
        }

        .product-card:hover {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.15), rgba(123, 61, 255, 0.1));
            border-color: var(--dark-accent);
            transform: translateX(6px);
            box-shadow: 0 12px 35px rgba(0, 217, 255, 0.25);
        }

        .product-card.selected {
            background: rgba(0, 217, 255, 0.2);
            border-color: var(--dark-accent);
            box-shadow: 0 0 25px rgba(0, 217, 255, 0.4);
        }

        /* LIGHT THEME - PRODUCT CARD STYLES */
        body.light-theme .product-card {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.06), rgba(123, 61, 255, 0.03));
            border-color: rgba(11, 91, 255, 0.2);
            box-shadow: 0 4px 16px rgba(11, 91, 255, 0.06);
        }

        body.light-theme .product-card:hover {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.12), rgba(123, 61, 255, 0.08));
            border-color: var(--light-accent);
            box-shadow: 0 12px 35px rgba(11, 91, 255, 0.2);
        }

        body.light-theme .product-card.selected {
            background: rgba(11, 91, 255, 0.15);
            border-color: var(--light-accent);
            box-shadow: 0 0 25px rgba(11, 91, 255, 0.3);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--dark-accent);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            background: rgba(0, 217, 255, 0.1);
            color: var(--dark-accent);
            transition: var(--transition);
        }

        .product-card.selected .checkbox {
            background: linear-gradient(135deg, var(--dark-accent), var(--dark-accent2));
            color: white;
            box-shadow: 0 0 12px rgba(0, 217, 255, 0.4);
        }

        .product-info {
            flex: 1;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--dark-text);
            font-size: 1rem;
        }

        .product-meta {
            font-size: 0.8rem;
            color: rgba(224, 231, 255, 0.5);
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .product-kcal {
            color: var(--dark-accent);
            font-weight: 600;
        }

        /* LIGHT THEME - PRODUCT STYLES */
        body.light-theme .product-name {
            color: var(--light-text);
        }

        body.light-theme .product-meta {
            color: rgba(11, 20, 32, 0.6);
        }

        body.light-theme .product-kcal {
            color: var(--light-accent);
        }

        /* –°–ï–ö–¶–ò–ò */
        .section {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.08), rgba(123, 61, 255, 0.06));
            border: 2px solid rgba(0, 217, 255, 0.2);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--dark-accent);
            font-weight: 700;
        }

        .section-subtitle {
            color: rgba(224, 231, 255, 0.6);
            font-size: 0.95rem;
            margin-bottom: 16px;
        }

        /* LIGHT THEME - SECTION STYLES */
        body.light-theme .section {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.06), rgba(123, 61, 255, 0.04));
            border-color: rgba(11, 91, 255, 0.15);
        }

        body.light-theme .section-title {
            color: var(--light-accent);
        }

        body.light-theme .section-subtitle {
            color: rgba(11, 20, 32, 0.6);
        }

        /* –í–ö–õ–ê–î–ö–ò */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(0, 217, 255, 0.1);
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 16px;
            background: transparent;
            border: 2px solid rgba(0, 217, 255, 0.2);
            border-bottom: none;
            border-radius: 12px 12px 0 0;
            color: rgba(224, 231, 255, 0.6);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tab:hover {
            color: var(--dark-accent);
            border-color: rgba(0, 217, 255, 0.4);
        }

        .tab.active {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(123, 61, 255, 0.15));
            border-color: var(--dark-accent);
            color: var(--dark-accent);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
        }

        /* LIGHT THEME - TAB STYLES */
        body.light-theme .tabs {
            border-bottom-color: rgba(11, 91, 255, 0.15);
        }

        body.light-theme .tab {
            border-color: rgba(11, 91, 255, 0.2);
            color: rgba(11, 20, 32, 0.6);
        }

        body.light-theme .tab:hover {
            color: var(--light-accent);
            border-color: rgba(11, 91, 255, 0.4);
        }

        body.light-theme .tab.active {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.15), rgba(123, 61, 255, 0.1));
            border-color: var(--light-accent);
            color: var(--light-accent);
            box-shadow: 0 0 20px rgba(11, 91, 255, 0.15);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* –ü–ò–¢–ê–ù–ò–ï –°–ï–¢–ö–ê */
        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .nutrition-card {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(123, 61, 255, 0.08));
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 18px;
            padding: 22px 16px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 217, 255, 0.1);
        }

        .nutrition-label {
            font-size: 0.8rem;
            color: rgba(224, 231, 255, 0.6);
            margin-bottom: 6px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .nutrition-value {
            font-size: 2.4rem;
            font-weight: 900;
            color: var(--dark-accent);
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px rgba(0, 217, 255, 0.3);
        }

        /* ML –°–ö–û–† */
        .ml-score-box {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(123, 61, 255, 0.08));
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .score-number {
            font-size: 3rem;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .score-text {
            font-size: 1.1rem;
            color: rgba(224, 231, 255, 0.8);
            margin: 12px 0;
            font-weight: 600;
        }

        .score-tips {
            font-size: 0.95rem;
            color: rgba(224, 231, 255, 0.6);
            line-height: 1.6;
            margin-top: 12px;
        }

        /* LIGHT THEME - NUTRITION STYLES */
        body.light-theme .nutrition-card {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.08), rgba(123, 61, 255, 0.06));
            border-color: rgba(11, 91, 255, 0.2);
            box-shadow: 0 8px 32px rgba(11, 91, 255, 0.08);
        }

        body.light-theme .nutrition-label {
            color: rgba(11, 20, 32, 0.6);
        }

        body.light-theme .nutrition-value {
            color: var(--light-accent);
            text-shadow: 0 0 15px rgba(11, 91, 255, 0.2);
        }

        body.light-theme .ml-score-box {
            background: linear-gradient(135deg, rgba(11, 91, 255, 0.08), rgba(123, 61, 255, 0.06));
            border-color: rgba(11, 91, 255, 0.2);
        }

        body.light-theme .score-number {
            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        body.light-theme .score-text {
            color: rgba(11, 20, 32, 0.8);
        }

        body.light-theme .score-tips {
            color: rgba(11, 20, 32, 0.6);
        }

        /* –ö–ù–û–ü–ö–ò */
        .controls {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 40px;
            border-radius: 16px;
            border: none;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1rem;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.7px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 180px;
            justify-content: center;
        }

        .btn::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--dark-accent), var(--dark-accent2));
            color: white;
            box-shadow: 0 0 25px rgba(0, 217, 255, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .btn-primary:hover {
            box-shadow: 0 15px 45px rgba(0, 217, 255, 0.7), inset 0 1px 1px rgba(255, 255, 255, 0.3);
            transform: translateY(-4px);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(0, 217, 255, 0.3);
            color: var(--dark-accent);
        }

        .btn-secondary:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: var(--dark-accent);
            box-shadow: 0 8px 25px rgba(0, 217, 255, 0.25);
            transform: translateY(-2px);
        }

        /* LIGHT THEME - BUTTON STYLES */
        body.light-theme .btn-primary {
            background: linear-gradient(135deg, var(--light-accent), var(--light-accent2));
            box-shadow: 0 0 25px rgba(11, 91, 255, 0.4), inset 0 1px 1px rgba(11, 91, 255, 0.2);
        }

        body.light-theme .btn-primary:hover {
            box-shadow: 0 15px 45px rgba(11, 91, 255, 0.5), inset 0 1px 1px rgba(11, 91, 255, 0.3);
            transform: translateY(-4px);
        }

        body.light-theme .btn-secondary {
            background: rgba(11, 91, 255, 0.08);
            border-color: rgba(11, 91, 255, 0.3);
            color: var(--light-accent);
        }

        body.light-theme .btn-secondary:hover {
            background: rgba(11, 91, 255, 0.15);
            border-color: var(--light-accent);
            box-shadow: 0 8px 25px rgba(11, 91, 255, 0.2);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* –í–ò–î–ï–û –ö–ê–ú–ï–†–ê */
        #cameraVideo {
            width: 100%;
            height: auto;
            border-radius: 12px;
            display: none;
            border: 2px solid rgba(0, 217, 255, 0.3);
            background: #000;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
        }

        #detectionCanvas {
            display: none;
        }

        #cameraVideo.active {
            display: block;
        }

        #detectionCanvas.active {
            display: block;
        }

        .quality-model-card {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.08), rgba(157, 78, 221, 0.05));
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 28px;
            padding: 28px 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            box-shadow: 
                0 0 40px rgba(0, 217, 255, 0.12),
                inset 0 0 20px rgba(255, 255, 255, 0.1),
                inset 0 1px 0px rgba(255, 255, 255, 0.2),
                0 0 0 1px rgba(0, 217, 255, 0.15);
        }

        .quality-model-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 217, 255, 0.2), transparent 70%);
            pointer-events: none;
            animation: pulse-light 3s ease-in-out infinite;
        }

        @keyframes pulse-light {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .quality-model-card:hover {
            border-color: rgba(0, 217, 255, 0.6);
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.12), rgba(157, 78, 221, 0.08));
            transform: translateY(-6px);
            box-shadow: 
                0 0 50px rgba(0, 217, 255, 0.3),
                inset 0 0 25px rgba(0, 217, 255, 0.15),
                inset 0 1px 0px rgba(255, 255, 255, 0.3),
                0 15px 40px rgba(0, 217, 255, 0.15);
        }

        .quality-model-card.active {
            border-color: rgba(0, 217, 255, 0.8);
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(157, 78, 221, 0.15));
            backdrop-filter: blur(30px) saturate(200%);
            -webkit-backdrop-filter: blur(30px) saturate(200%);
            box-shadow: 
                0 0 60px rgba(0, 217, 255, 0.5),
                inset 0 0 30px rgba(0, 217, 255, 0.25),
                inset 0 1px 0px rgba(255, 255, 255, 0.4),
                0 0 40px rgba(157, 78, 221, 0.3),
                0 0 80px rgba(0, 217, 255, 0.2);
        }

        .quality-model-card.active::after {
            content: '‚úì';
            position: absolute;
            top: 14px;
            right: 18px;
            color: #00d9ff;
            font-weight: bold;
            font-size: 1.6rem;
            text-shadow: 0 0 15px rgba(0, 217, 255, 0.8), 0 0 30px rgba(0, 217, 255, 0.4);
            z-index: 2;
            animation: scale-in 0.3s ease-out;
        }

        @keyframes scale-in {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .detection-box {
            background: rgba(0, 217, 255, 0.1);
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 14px;
            padding: 16px;
            margin: 16px 0;
            color: var(--dark-text);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: rgba(224, 231, 255, 0.5);
        }

        .empty-state i {
            font-size: 3rem;
            color: var(--dark-accent);
            margin-bottom: 16px;
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .container {
                padding: 100px 16px 40px;
            }

            .step-title {
                font-size: 1.6rem;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .steps-tracker {
                gap: 4px;
            }

            .step-circle {
                width: 40px;
                height: 40px;
                font-size: 0.8rem;
            }

            .step-label {
                font-size: 0.6rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">
                <i class="fas fa-rocket"></i>CosmoDiet
            </a>
            <div class="nav-space"></div>
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="language-dropdown">
                    <button class="language-toggle" id="languageToggle" title="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫">
                        <i class="fas fa-globe"></i>
                    </button>
                    <div class="language-menu" id="languageMenu">
                        <div class="language-option active" data-lang="ru">
                            <img src="https://flagcdn.com/w40/ru.png" alt="–†—É—Å—Å–∫–∏–π">
                            <span>–†—É—Å—Å–∫–∏–π</span>
                        </div>
                        <div class="language-option" data-lang="en">
                            <img src="https://flagcdn.com/w40/gb.png" alt="English">
                            <span>English</span>
                        </div>
                        <div class="language-option" data-lang="kz">
                            <img src="https://flagcdn.com/w40/kz.png" alt="“ö–∞–∑–∞“õ—à–∞">
                            <span>“ö–∞–∑–∞“õ—à–∞</span>
                        </div>
                    </div>
                </div>
                <a href="index.html" class="btn-home">
                    <i class="fas fa-home"></i> –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- –ü–†–û–ì–†–ï–°–° –≠–¢–ê–ü–û–í -->
        <div class="progress-container">
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressBar"></div>
            </div>
            <div class="steps-tracker">
                <div class="step-indicator">
                    <div class="step-circle active" id="circle-1"><i class="fas fa-utensils"></i></div>
                    <div class="step-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" id="circle-2"><i class="fas fa-box"></i></div>
                    <div class="step-label">–ü—Ä–æ–¥—É–∫—Ç—ã</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" id="circle-3"><i class="fas fa-flask"></i></div>
                    <div class="step-label">–û–±—Ä–∞–±–æ—Ç–∫–∞</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" id="circle-4"><i class="fas fa-chart-bar"></i></div>
                    <div class="step-label">–ê–Ω–∞–ª–∏–∑</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" id="circle-5"><i class="fas fa-robot"></i></div>
                    <div class="step-label">–ü—Ä–æ–≤–µ—Ä–∫–∞</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" id="circle-6"><i class="fas fa-save"></i></div>
                    <div class="step-label">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</div>
                </div>
            </div>
        </div>

        <!-- –ö–û–ù–¢–ï–ù–¢ –®–ê–ì–û–í -->
        <div class="wizard-content">
            <!-- –®–ê–ì 1: –ö–ê–¢–ï–ì–û–†–ò–Ø -->
            <div class="step-content active" id="step-1">
                <div class="step-title">–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Ü–∏–æ–Ω–∞</div>
                <div class="step-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –º–∏—Å—Å–∏–∏</div>
                <div class="grid" id="categoryGrid"></div>
            </div>

            <!-- –®–ê–ì 2: –ü–†–û–î–£–ö–¢–´ -->
            <div class="step-content" id="step-2">
                <div class="step-title">–í—ã–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
                <div class="step-subtitle">–°–æ—Å—Ç–∞–≤—å—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω –∏–∑ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –µ–¥—ã</div>
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">
                </div>
                <div class="products-list" id="productsList"></div>
                <div class="empty-state" id="noProducts" style="display: none;">
                    <i class="fas fa-inbox"></i>
                    <p>–ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>
            </div>

            <!-- –®–ê–ì 3: –û–ë–†–ê–ë–û–¢–ö–ê -->
            <div class="step-content" id="step-3">
                <div class="step-title">–ú–µ—Ç–æ–¥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏</div>
                <div class="step-subtitle">–í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –∫–æ—Å–º–æ—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é —Å—É–±–ª–∏–º–∞—Ü–∏–∏</div>
                <div class="section">
                    <div class="section-subtitle">
                        <i class="fas fa-snowflake" style="margin-right: 8px;"></i>
                        <strong>–°—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</strong>
                    </div>
                    <p style="color: rgba(224, 231, 255, 0.6); line-height: 1.8;">
                        ‚Ä¢ –í–µ—Å –ø–æ—Ä—Ü–∏–∏: –Ω–∞ 80% –ª–µ–≥—á–µ –æ–±—ã—á–Ω–æ–π<br>
                        ‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: –¥–æ–±–∞–≤—å—Ç–µ –≤–æ–¥—É (5 –º–∏–Ω—É—Ç)<br>
                        ‚Ä¢ –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–æ 25 –ª–µ—Ç –≤ –≤–∞–∫—É—É–º–µ<br>
                        ‚Ä¢ ML-–±–æ–Ω—É—Å: +20 –±–∞–ª–ª–æ–≤ –∑–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é<br>
                        ‚Ä¢ –ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—ë—Ç–æ–≤
                    </p>
                </div>
            </div>

            <!-- –®–ê–ì 4: –ê–ù–ê–õ–ò–ó -->
            <div class="step-content" id="step-4">
                <div class="step-title">–ê–Ω–∞–ª–∏–∑ —Ä–∞—Ü–∏–æ–Ω–∞</div>
                <div class="step-subtitle">ML-—Å–∫–æ—Ä–∏–Ω–≥ –∏ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç</div>
                
                <div class="section">
                    <div class="section-title">–ü–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å</div>
                    <div class="nutrition-grid" id="nutritionGrid"></div>
                </div>

                <div class="ml-score-box">
                    <div class="score-number" id="scoreNumber">0</div>
                    <div class="score-text" id="scoreText">–ê–Ω–∞–ª–∏–∑...</div>
                    <div class="score-tips" id="scoreTips"></div>
                </div>

                <div class="section">
                    <div class="section-title">–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</div>
                    <div id="selectedList" style="max-height: 300px; overflow-y: auto;"></div>
                </div>
            </div>

            <!-- –®–ê–ì 5: –ò–ò –ü–†–û–í–ï–†–ö–ê -->
            <div class="step-content" id="step-5">
                <div class="step-title">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>
                <div class="step-subtitle">–ò–ò –î–µ—Ç–µ–∫—Ç–æ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Å–µ—Ä–≤–Ω—ã—Ö –±–∞–Ω–æ–∫ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</div>

                <!-- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –∫–∞–∫ –≤ index.html -->
                <div style="margin-bottom: 30px;">
                    <p style="color: rgba(224, 231, 255, 0.8); margin-bottom: 15px; font-weight: 500;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–≤–µ—Ä–∫–∏:</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div id="model-can_defect" class="quality-model-card active" onclick="selectDetectionModel('can_defect')" style="text-align: center;">
                            <i class="fas fa-triangle-exclamation" style="font-size: 2.5rem; color: #00d9ff; margin-bottom: 12px; display: block; text-shadow: 0 0 20px rgba(0,217,255,0.5); filter: drop-shadow(0 0 10px rgba(0,217,255,0.3));"></i>
                            <div style="color: #00d9ff; font-weight: 600; margin-bottom: 5px; font-size: 1.1rem;">–î–µ—Ñ–µ–∫—Ç—ã –±–∞–Ω–æ–∫</div>
                            <div style="color: rgba(224,231,255,0.6); font-size: 0.9rem;">–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è</div>
                        </div>
                        <div id="model-mold_detector" class="quality-model-card" onclick="selectDetectionModel('mold_detector')" style="text-align: center;">
                            <i class="fas fa-biohazard" style="font-size: 2.5rem; color: #9d4edd; margin-bottom: 12px; display: block; text-shadow: 0 0 20px rgba(157,78,221,0.5); filter: drop-shadow(0 0 10px rgba(157,78,221,0.3));"></i>
                            <div style="color: #9d4edd; font-weight: 600; margin-bottom: 5px; font-size: 1.1rem;">–ü–ª–µ—Å–µ–Ω—å –∏ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è</div>
                            <div style="color: rgba(224,231,255,0.6); font-size: 0.9rem;">–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</div>
                        </div>
                    </div>
                </div>

                <!-- –û–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞–º–µ—Ä—ã -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <div>
                        <h5 style="color: #00d9ff; margin-bottom: 12px; font-size: 1.1rem;">–í–∏–¥–µ–æ–ø–æ—Ç–æ–∫</h5>
                        <div id="detectorContainer" style="position: relative; width: 100%; aspect-ratio: 4/3; background: rgba(0,0,0,0.8); border-radius: 12px; overflow: hidden; border: 2px solid rgba(0,217,255,0.4); box-shadow: 0 0 15px rgba(0,217,255,0.2);">
                            <video id="cameraVideo" style="width: 100%; height: 100%; display: none;"></video>
                            <canvas id="detectionCanvas" style="width: 100%; height: 100%; display: block;"></canvas>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button id="cameraStartBtn" class="btn btn-primary" onclick="openCamera()" style="flex: 1; padding: 12px;">
                                <i class="fas fa-play"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å
                            </button>
                            <button id="cameraStopBtn" class="btn btn-secondary" onclick="closeCamera()" style="flex: 1; padding: 12px;" disabled>
                                <i class="fas fa-stop"></i> –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                            </button>
                        </div>
                    </div>

                    <div>
                        <h5 style="color: #00d9ff; margin-bottom: 12px; font-size: 1.1rem;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h5>
                        <div id="detectionResult" style="background: rgba(0,217,255,0.06); border: 2px solid rgba(0,217,255,0.3); border-radius: 12px; padding: 18px; height: 200px; overflow-y: auto; font-size: 0.95rem; box-shadow: 0 0 10px rgba(0,217,255,0.1);">
                            <p style="color: rgba(224,231,255,0.6);">‚úì –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å"</p>
                        </div>
                        <button id="skipBtn" class="btn btn-secondary" onclick="nextStep()" style="width: 100%; margin-top: 15px; padding: 12px;">
                            <i class="fas fa-arrow-right"></i> –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
                        </button>
                    </div>
                </div>
            </div>

            <!-- –®–ê–ì 6: –°–û–•–†–ê–ù–ï–ù–ò–ï -->
            <div class="step-content" id="step-6">
                <div class="step-title">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞</div>
                <div class="step-subtitle">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –º–µ–Ω—é</div>

                <div class="section">
                    <div class="section-title">–ü–æ–ª–Ω—ã–π —Å–æ—Å—Ç–∞–≤</div>
                    <div class="nutrition-grid" id="finalNutrition"></div>
                </div>

                <div class="section">
                    <div class="section-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</div>

                    <label style="display: block; margin-bottom: 12px; color: var(--dark-text); font-weight: 600;">
                        –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞
                    </label>
                    <input type="text" id="mealName" class="search-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ó–∞–≤—Ç—Ä–∞–∫ –î–µ–Ω—å 1" style="margin-bottom: 20px;">

                    <label style="display: block; margin-bottom: 12px; color: var(--dark-text); font-weight: 600;">
                        –¢–∏–ø –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏
                    </label>
                    <div class="tabs" style="border: none; gap: 12px; margin-bottom: 0;">
                        <button class="tab active" onclick="setMealType('breakfast')">
                            <i class="fas fa-sunrise"></i> –ó–∞–≤—Ç—Ä–∞–∫
                        </button>
                        <button class="tab" onclick="setMealType('lunch')">
                            <i class="fas fa-sun"></i> –û–±–µ–¥
                        </button>
                        <button class="tab" onclick="setMealType('dinner')">
                            <i class="fas fa-moon"></i> –£–∂–∏–Ω
                        </button>
                        <button class="tab" onclick="setMealType('snack')">
                            <i class="fas fa-cookie-bite"></i> –ü–µ—Ä–µ–∫—É—Å
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –®–ê–ì–ê–ú–ò -->
        <div class="controls">
            <button class="btn btn-secondary" id="prevBtn" style="display: none;" onclick="prevStep()">
                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                <i class="fas fa-arrow-right"></i> –î–∞–ª–µ–µ
            </button>
        </div>
    </div>

    <script>
        alert('üöÄ –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è!'); // –≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–∏ —Å–∫—Ä–∏–ø—Ç
        console.log('üìÑ –°–∫—Ä–∏–ø—Ç diet-builder.html –Ω–∞—á–∞–ª –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è');
        
        // ===== –¢–ï–ú–ê –ò –Ø–ó–´–ö =====
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–º—É –∏–∑ localStorage
        const savedTheme = localStorage.getItem('cosmodiet_theme') || 'dark';
        if (savedTheme === 'light') {
            document.body.classList.add('light-theme');
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('light-theme');
                const icon = this.querySelector('i');
                const isLight = document.body.classList.contains('light-theme');
                
                if (isLight) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                    localStorage.setItem('cosmodiet_theme', 'light');
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                    localStorage.setItem('cosmodiet_theme', 'dark');
                }
            });
            
            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–∫–æ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            const icon = themeToggle.querySelector('i');
            if (document.body.classList.contains('light-theme')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —è–∑—ã–∫–æ–≤–æ–≥–æ –º–µ–Ω—é
        const languageToggle = document.getElementById('languageToggle');
        const languageMenu = document.getElementById('languageMenu');
        if (languageToggle && languageMenu) {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —è–∑—ã–∫ –∏–∑ localStorage
            const savedLang = localStorage.getItem('cosmodiet_lang') || 'ru';
            const languageOptions = languageMenu.querySelectorAll('.language-option');
            
            // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —è–∑—ã–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            languageOptions.forEach(opt => {
                if (opt.getAttribute('data-lang') === savedLang) {
                    opt.classList.add('active');
                } else {
                    opt.classList.remove('active');
                }
            });
            
            languageToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                languageMenu.classList.toggle('active');
            });

            // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –æ–ø—Ü–∏—é
            languageOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const lang = this.getAttribute('data-lang');
                    
                    // –£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å active —Å–æ –≤—Å–µ—Ö –æ–ø—Ü–∏–π
                    languageOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±–æ—Ä —è–∑—ã–∫
                    localStorage.setItem('cosmodiet_lang', lang);
                    
                    // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é
                    languageMenu.classList.remove('active');
                    
                    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    applyLanguage(lang);
                });
            });

            // –ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function(e) {
                if (!languageMenu.contains(e.target) && !languageToggle.contains(e.target)) {
                    languageMenu.classList.remove('active');
                }
            });
        }

        // –§–£–ù–ö–¶–ò–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –Ø–ó–´–ö–ê
        function applyLanguage(lang) {
            const t = TRANSLATIONS[lang] || TRANSLATIONS['ru'];
            
            // –û–ë–ù–û–í–ò–¢–¨ –¢–ï–ö–£–©–ò–ô –Ø–ó–´–ö
            currentLang = lang;
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞ –≥–ª–∞–≤–Ω—É—é"
            const homeBtn = document.querySelector('.btn-home');
            if (homeBtn) {
                homeBtn.innerHTML = '<i class="fas fa-home"></i> ' + t.homebutton;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç step titles –¥–ª—è –í–°–ï–• —à–∞–≥–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–≥–æ)
            const stepTitles = {
                1: { title: t.step1, subtitle: t.step1sub },
                2: { title: t.step2, subtitle: t.step2sub },
                3: { title: t.step3, subtitle: t.step3sub },
                4: { title: t.step4, subtitle: t.step4sub },
                5: { title: t.step5, subtitle: t.step5sub },
                6: { title: t.step6, subtitle: t.step6sub }
            };
            
            // –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —à–∞–≥–∏ (step-1 —á–µ—Ä–µ–∑ step-6)
            for (let i = 1; i <= 6; i++) {
                const stepContent = document.getElementById('step-' + i);
                if (stepContent) {
                    const stepTitle = stepContent.querySelector('.step-title');
                    const stepSubtitle = stepContent.querySelector('.step-subtitle');
                    
                    if (stepTitle && stepTitles[i]) {
                        stepTitle.textContent = stepTitles[i].title;
                    }
                    if (stepSubtitle && stepTitles[i]) {
                        stepSubtitle.textContent = stepTitles[i].subtitle;
                    }
                }
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∏—Å–∫ placeholder
            const searchInput = document.getElementById('searchInput');
            if (searchInput) searchInput.placeholder = t.searchPlaceholder;
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç "–ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
            const noProducts = document.getElementById('noProducts');
            if (noProducts) {
                const p = noProducts.querySelector('p');
                if (p) p.textContent = t.noProducts;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–°—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" (–®–∞–≥ 3)
            const sublimationSection = document.querySelector('#step-3 .section-subtitle strong');
            if (sublimationSection) sublimationSection.textContent = t.sublimationProductsLabel;
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö (–®–∞–≥ 3)
            const step3Content = document.getElementById('step-3');
            if (step3Content) {
                const pTags = step3Content.querySelectorAll('p');
                if (pTags[0]) {
                    pTags[0].innerHTML = t.weightInfo + '<br>' + t.rehabInfo + '<br>' + t.storageInfo + '<br>' + t.mlBonus + '<br>' + t.idealSpace;
                }
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª –ê–Ω–∞–ª–∏–∑ (–®–∞–≥ 4)
            const step4Content = document.getElementById('step-4');
            if (step4Content) {
                const sectionTitles = step4Content.querySelectorAll('.section-title');
                if (sectionTitles[0]) sectionTitles[0].textContent = t.nutritionValue;
                if (sectionTitles[1]) sectionTitles[1].textContent = t.selectProducts;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (–®–∞–≥ 5)
            const step5Content = document.getElementById('step-5');
            if (step5Content) {
                const allPTags = step5Content.querySelectorAll('p');
                if (allPTags.length > 0) {
                    allPTags[0].textContent = t.selectCheckType;
                }
                
                // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π
                const canDefectCard = document.getElementById('model-can_defect');
                if (canDefectCard) {
                    const divs = canDefectCard.querySelectorAll('div[style]');
                    if (divs.length >= 2) {
                        divs[0].textContent = t.canDefects;
                        divs[1].textContent = t.canIntegrity;
                    }
                }
                
                const moldCard = document.getElementById('model-mold_detector');
                if (moldCard) {
                    const divs = moldCard.querySelectorAll('div[style]');
                    if (divs.length >= 2) {
                        divs[0].textContent = t.moldContamination;
                        divs[1].textContent = t.productCondition;
                    }
                }
                
                // –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤–∏–¥–µ–æ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                const h5Tags = step5Content.querySelectorAll('h5');
                if (h5Tags[0]) h5Tags[0].textContent = t.videoStream;
                if (h5Tags[1]) h5Tags[1].textContent = t.results;
                
                // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –ó–∞–ø—É—Å—Ç–∏—Ç—å/–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                const cameraStartBtn = document.getElementById('cameraStartBtn');
                if (cameraStartBtn) cameraStartBtn.innerHTML = '<i class="fas fa-play"></i> ' + t.start;
                
                const cameraStopBtn = document.getElementById('cameraStopBtn');
                if (cameraStopBtn) cameraStopBtn.innerHTML = '<i class="fas fa-stop"></i> ' + t.stop;
                
                // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É"
                const skipBtn = document.getElementById('skipBtn');
                if (skipBtn) skipBtn.innerHTML = '<i class="fas fa-arrow-right"></i> ' + t.skipCheck;
                
                // –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
                const detectionResult = document.getElementById('detectionResult');
                if (detectionResult) {
                    const p = detectionResult.querySelector('p');
                    if (p) p.textContent = t.readyToCheck;
                }
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–®–∞–≥ 6)
            const step6Content = document.getElementById('step-6');
            if (step6Content) {
                const sectionTitles = step6Content.querySelectorAll('.section-title');
                if (sectionTitles[0]) sectionTitles[0].textContent = t.foodComposition;
                if (sectionTitles[1]) sectionTitles[1].textContent = t.settings;
                
                const labels = step6Content.querySelectorAll('label');
                if (labels[0]) labels[0].textContent = t.dietName;
                if (labels[1]) labels[1].textContent = t.mealType;
                
                const input = document.getElementById('mealName');
                if (input) input.placeholder = t.dietNamePlaceholder;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —Ç–∏–ø–æ–≤ –ø–∏—Ç–∞–Ω–∏—è (–≤–µ–∑–¥–µ)
            const mealTypeButtons = document.querySelectorAll('.tab');
            if (mealTypeButtons.length >= 4) {
                mealTypeButtons[0].innerHTML = '<i class="fas fa-sunrise"></i> ' + t.breakfast;
                mealTypeButtons[1].innerHTML = '<i class="fas fa-sun"></i> ' + t.lunch;
                mealTypeButtons[2].innerHTML = '<i class="fas fa-moon"></i> ' + t.dinner;
                mealTypeButtons[3].innerHTML = '<i class="fas fa-cookie-bite"></i> ' + t.snack;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–≥–∞–º–∏
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) prevBtn.innerHTML = '<i class="fas fa-arrow-left"></i> ' + t.back;
            
            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) nextBtn.innerHTML = '<i class="fas fa-arrow-right"></i> ' + t.next;
            
            // –û–±–Ω–æ–≤–∏—Ç—å labels –º–∞–∫—Ä–æ—Å–æ–≤ –≤–µ–∑–¥–µ
            const nutritionLabels = document.querySelectorAll('.nutrition-label');
            nutritionLabels.forEach((label, idx) => {
                if (idx === 0) label.textContent = t.macroEnergy;
                else if (idx === 1) label.textContent = t.macroProtein;
                else if (idx === 2) label.textContent = t.macroFat;
                else if (idx === 3 || idx === 7) label.textContent = t.macroCarbs;
            });
            
            // –û–±–Ω–æ–≤–∏—Ç—å step labels (–ö–∞—Ç–µ–≥–æ—Ä–∏—è, –ü—Ä–æ–¥—É–∫—Ç—ã, –û–±—Ä–∞–±–æ—Ç–∫–∞, –ê–Ω–∞–ª–∏–∑, –ü—Ä–æ–≤–µ—Ä–∫–∞, –°–æ—Ö—Ä–∞–Ω–∏—Ç—å)
            const stepLabels = document.querySelectorAll('.step-label');
            if (stepLabels.length >= 6) {
                stepLabels[0].textContent = t.stepLabel1;
                stepLabels[1].textContent = t.stepLabel2;
                stepLabels[2].textContent = t.stepLabel3;
                stepLabels[3].textContent = t.stepLabel4;
                stepLabels[4].textContent = t.stepLabel5;
                stepLabels[5].textContent = t.stepLabel6;
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            console.log(`‚Üí –û–±–Ω–æ–≤–ª—è—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ —è–∑—ã–∫: ${lang}`);
            Object.entries(CATEGORIES).forEach(([key, cat]) => {
                const categoryNames = {
                    ru: { light: '–õ—ë–≥–∫–∞—è –µ–¥–∞', strengthen: '–£–∫—Ä–µ–ø–∏—Ç—å—Å—è', energy: '–≠–Ω–µ—Ä–≥–∏—è', recovery: '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ', hydration: '–ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è' },
                    en: { light: 'Light Food', strengthen: 'Strengthen', energy: 'Energy', recovery: 'Recovery', hydration: 'Hydration' },
                    kz: { light: '–ñ–µ“£—ñ–ª —Ç–∞–º–∞“õ', strengthen: '–ù—ã“ì–∞–π—Ç—ã“£—ã–∑', energy: '–≠–Ω–µ—Ä–≥–∏—è', recovery: '“ö–∞–ª–ø—ã–Ω–∞ –∫–µ–ª—Ç—ñ—Ä—É', hydration: '–°—É–ª–∞–Ω“ì–∞–Ω–¥—ã“õ' }
                };
                
                const categoryDescs = {
                    ru: { light: '–ë–µ–ª–∫–∏, –æ–≤–æ—â–∏', strengthen: '–°—ã—Ç–Ω—ã–µ –±–ª—é–¥–∞', energy: '–ö–∞–ª–æ—Ä–∏–π–Ω—ã–µ', recovery: '–£–≥–ª–µ–≤–æ–¥—ã', hydration: '–ù–∞–ø–∏—Ç–∫–∏' },
                    en: { light: 'Proteins, vegetables', strengthen: 'Hearty dishes', energy: 'High-calorie', recovery: 'Carbs', hydration: 'Beverages' },
                    kz: { light: '–ê“ì–∑–∞–º –¥–∞“ì—ã, –∫”©–∫”©–Ω—ñ—Å—Ç–µ—Ä', strengthen: '–°—ã–ø–∞–π—ã —Ç–∞“ì–∞–º–¥–∞—Ä', energy: '–ñ–æ“ì–∞—Ä—ã –∫–∞–ª–æ—Ä–∏–π–ª—ñ–∫', recovery: '–ö”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä', hydration: '–Ü—à—ñ–º–¥—ñ–∫—Ç–µ—Ä' }
                };
                
                if (categoryNames[lang] && categoryNames[lang][key]) {
                    CATEGORIES[key].name = categoryNames[lang][key];
                }
                
                if (categoryDescs[lang] && categoryDescs[lang][key]) {
                    CATEGORIES[key].desc = categoryDescs[lang][key];
                }
            });
            
            // –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –∏—Ö —Å –Ω–æ–≤—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏) - –≤—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ–º
            if (typeof renderCategories === 'function') {
                renderCategories();
            }
            
            // –ï—Å–ª–∏ –≤–∏–¥–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã (—à–∞–≥ 2), –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –∏—Ö —Å –Ω–æ–≤—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
            if (state.step === 2 && typeof renderProducts === 'function') {
                renderProducts();
            }
            
            // –ï—Å–ª–∏ –≤–∏–¥–Ω—ã –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (—à–∞–≥ 4), –æ–±–Ω–æ–≤–∏—Ç—å –∏—Ö –Ω–∞–∑–≤–∞–Ω–∏—è  
            if (state.step === 4) {
                const prods = state.products.map(id => PRODUCTS.find(p => p.id === id)).filter(p => p);
                const selectedListEl = document.getElementById('selectedList');
                if (selectedListEl) {
                    selectedListEl.innerHTML = prods.map(p => `
                        <div style="padding: 12px; background: rgba(0,217,255,0.05); border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #00d9ff;">
                            <strong>${getProductName(p)}</strong><br>
                            <span style="font-size: 0.8rem; color: rgba(224,231,255,0.6);">${p.kcal} –∫–∫–∞–ª ‚Ä¢ –ë: ${p.protein}–≥</span>
                        </div>
                    `).join('');
                }
            }
        }

        // ===== –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–†–û–î–£–ö–¢–û–í (–¢–û–õ–¨–ö–û –°–£–ë–õ–ò–ú–ò–†–û–í–ê–ù–ù–´–ï) =====
        const PRODUCTS = [
            // –õ–ï–ì–ö–ê–Ø
            { id: 1, name: '–ö—É–∏—á–Ω–æ–µ —Ñ–∏–ª–µ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ', category: 'light', kcal: 180, protein: 35, fat: 3, carbs: 0, sodium: 250 },
            { id: 2, name: '–§–æ—Ä–µ–ª—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—É—Å–æ—á–∫–∏', category: 'light', kcal: 220, protein: 38, fat: 8, carbs: 0, sodium: 280 },
            { id: 3, name: '–û–≤–æ—â–Ω–∞—è —Å–º–µ—Å—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'light', kcal: 45, protein: 2, fat: 0, carbs: 10, sodium: 180 },
            { id: 4, name: '–®–ø–∏–Ω–∞—Ç —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'light', kcal: 55, protein: 5, fat: 1, carbs: 8, sodium: 200 },
            { id: 5, name: '–ë—Ä–æ–∫–∫–æ–ª–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'light', kcal: 50, protein: 4, fat: 0, carbs: 9, sodium: 150 },
            { id: 51, name: '–ú–∏–Ω—Ç–∞–π —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'light', kcal: 150, protein: 32, fat: 2, carbs: 0, sodium: 200 },
            { id: 52, name: '–ú–æ—Ä–∫–æ–≤—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'light', kcal: 40, protein: 1, fat: 0, carbs: 9, sodium: 140 },
            { id: 53, name: '–ö–∞–±–∞—á–æ–∫ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'light', kcal: 35, protein: 1, fat: 0, carbs: 8, sodium: 120 },

            // –£–ö–†–ï–ü–ò–¢–¨–°–Ø
            { id: 6, name: '–ì–æ–≤—è–¥–∏–Ω–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—É—Å–æ—á–∫–∏', category: 'strengthen', kcal: 380, protein: 50, fat: 18, carbs: 0, sodium: 420 },
            { id: 7, name: '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ø—é—Ä–µ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ', category: 'strengthen', kcal: 350, protein: 8, fat: 2, carbs: 70, sodium: 350 },
            { id: 8, name: '–ú–∞–∫–∞—Ä–æ–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è', category: 'strengthen', kcal: 360, protein: 12, fat: 2, carbs: 72, sodium: 5 },
            { id: 9, name: '–†–∏—Å —Å –∫—É—Ä–∏—Ü–µ–π —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'strengthen', kcal: 320, protein: 25, fat: 8, carbs: 42, sodium: 380 },
            { id: 10, name: '–§–∞—Å–æ–ª—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'strengthen', kcal: 280, protein: 18, fat: 1, carbs: 50, sodium: 150 },
            { id: 54, name: '–ß–µ—á–µ–≤–∏—Ü–∞ –∫—Ä–∞—Å–Ω–∞—è —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'strengthen', kcal: 310, protein: 24, fat: 1, carbs: 55, sodium: 160 },
            { id: 55, name: '–ì–æ—Ä–æ—Ö –∑–µ–ª—ë–Ω—ã–π —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'strengthen', kcal: 90, protein: 7, fat: 0, carbs: 16, sodium: 170 },
            { id: 56, name: '–ù—É—Ç —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'strengthen', kcal: 320, protein: 19, fat: 5, carbs: 54, sodium: 140 },
            { id: 57, name: '–Ø—á–Ω–µ–≤–∞—è –∫—Ä—É–ø–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'strengthen', kcal: 340, protein: 10, fat: 2, carbs: 70, sodium: 8 },

            // –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï
            { id: 11, name: '–ö–ª—É–±–Ω–∏–∫–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'recovery', kcal: 280, protein: 1, fat: 0, carbs: 68, sodium: 10 },
            { id: 12, name: '–Ø–±–ª–æ–∫–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ', category: 'recovery', kcal: 260, protein: 0.5, fat: 0, carbs: 65, sodium: 15 },
            { id: 13, name: '–ö–∞—à–∞ –≥—Ä–µ—á–Ω–µ–≤–∞—è —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'recovery', kcal: 330, protein: 12, fat: 3, carbs: 65, sodium: 10 },
            { id: 14, name: '–ú—ë–¥ –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π', category: 'recovery', kcal: 280, protein: 0, fat: 0, carbs: 70, sodium: 5 },
            { id: 15, name: '–ü–µ—Ä—Å–∏–∫ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'recovery', kcal: 260, protein: 1, fat: 0, carbs: 65, sodium: 8 },
            { id: 58, name: '–ë–∞–Ω–∞–Ω —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'recovery', kcal: 270, protein: 1.5, fat: 0, carbs: 68, sodium: 3 },
            { id: 59, name: '–¢–≤–æ—Ä–æ–≥ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'recovery', kcal: 340, protein: 28, fat: 18, carbs: 8, sodium: 180 },
            { id: 60, name: '–ì—Ä—É—à–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'recovery', kcal: 250, protein: 1, fat: 0, carbs: 63, sodium: 4 },

            // –≠–ù–ï–†–ì–ò–Ø
            { id: 16, name: '–û—Ä–µ—Ö–∏ –∞—Å—Å–æ—Ä—Ç–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ', category: 'energy', kcal: 580, protein: 20, fat: 48, carbs: 18, sodium: 15 },
            { id: 17, name: '–ë–∞—Ç–æ–Ω—á–∏–∫ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π', category: 'energy', kcal: 440, protein: 10, fat: 18, carbs: 60, sodium: 120 },
            { id: 18, name: '–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∞—Å—Å–æ—Ä—Ç–∏', category: 'energy', kcal: 320, protein: 3, fat: 1, carbs: 80, sodium: 30 },
            { id: 19, name: '–®–æ–∫–æ–ª–∞–¥ —Ç—ë–º–Ω—ã–π –ø–ª–∏—Ç–∫–∞', category: 'energy', kcal: 540, protein: 8, fat: 34, carbs: 50, sodium: 20 },
            { id: 20, name: '–°–≥—É—â—ë–Ω–Ω–æ–µ –º–æ–ª–æ–∫–æ –ø–æ—Ä—Ü–∏—è', category: 'energy', kcal: 310, protein: 8, fat: 8, carbs: 55, sodium: 120 },
            { id: 61, name: '–ú–∏–Ω–¥–∞–ª—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'energy', kcal: 570, protein: 21, fat: 50, carbs: 20, sodium: 8 },
            { id: 62, name: '–ö–µ—à—å—é —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'energy', kcal: 550, protein: 18, fat: 46, carbs: 28, sodium: 10 },
            { id: 63, name: '–ò–∑—é–º —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'energy', kcal: 300, protein: 3, fat: 0, carbs: 75, sodium: 25 },
            { id: 64, name: '–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –≥–µ–ª—å', category: 'energy', kcal: 100, protein: 0, fat: 0, carbs: 25, sodium: 200 },

            // –ì–ò–î–†–ê–¢–ê–¶–ò–Ø
            { id: 21, name: '–ü–æ—Ä–æ—à–æ–∫ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫', category: 'hydration', kcal: 150, protein: 0, fat: 0, carbs: 38, sodium: 450 },
            { id: 22, name: '–ö–æ–º–ø–æ—Ç –≥—Ä—É—à–∞ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç', category: 'hydration', kcal: 280, protein: 0, fat: 0, carbs: 70, sodium: 50 },
            { id: 23, name: '–ê–ø–µ–ª—å—Å–∏–Ω —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', category: 'hydration', kcal: 300, protein: 2, fat: 0, carbs: 76, sodium: 5 },
            { id: 24, name: '–ö–∏—Å–ª–æ–º–æ–ª–æ—á–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫', category: 'hydration', kcal: 50, protein: 3, fat: 1, carbs: 6, sodium: 90 },
            { id: 25, name: '–≠–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–Ω—ã–π –ø–æ—Ä–æ—à–æ–∫', category: 'hydration', kcal: 40, protein: 0, fat: 0, carbs: 10, sodium: 800 },
            { id: 65, name: '–õ–∏–º–æ–Ω–Ω–æ-–∏–º–±–∏—Ä–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫', category: 'hydration', kcal: 60, protein: 0, fat: 0, carbs: 15, sodium: 300 },
            { id: 66, name: '–Ø–≥–æ–¥–Ω—ã–π –º–æ—Ä—Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç', category: 'hydration', kcal: 250, protein: 0.5, fat: 0, carbs: 62, sodium: 20 },
            { id: 67, name: '–ó–µ–ª—ë–Ω—ã–π —á–∞–π –ø–æ—Ä—Ü–∏—è', category: 'hydration', kcal: 5, protein: 0, fat: 0, carbs: 1, sodium: 10 },

            // –ü–†–û–ß–ï–ï / –°–ü–ï–¶–ò–ê–õ–¨–ù–û–ï
            { id: 26, name: '–ë–µ–ª–∫–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ', category: 'strengthen', kcal: 400, protein: 80, fat: 3, carbs: 2, sodium: 300 },
            { id: 27, name: '–õ–∏–æ—Ñ–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–≤–æ—â–∏', category: 'light', kcal: 60, protein: 3, fat: 0, carbs: 12, sodium: 200 },
            { id: 28, name: '–ö—Ä—É–ø–∞ —è—á–Ω–µ–≤–∞—è —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'recovery', kcal: 340, protein: 10, fat: 2, carbs: 70, sodium: 8 },
            { id: 29, name: '–Ø–≥–æ–¥—ã –º–∏–∫—Å–æ–≤–∞–Ω–Ω—ã–µ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ', category: 'recovery', kcal: 300, protein: 2, fat: 0, carbs: 75, sodium: 12 },
            { id: 30, name: '–ê—Ä–∞—Ö–∏—Å–æ–≤–∞—è –ø–∞—Å—Ç–∞ –ø–æ—Ä—Ü–∏—è', category: 'energy', kcal: 590, protein: 24, fat: 50, carbs: 16, sodium: 300 },
            { id: 68, name: '–ö–∞–∫–∞–æ-–ø–æ—Ä–æ—à–æ–∫', category: 'energy', kcal: 450, protein: 12, fat: 13, carbs: 68, sodium: 5 },
            { id: 69, name: '–°—É—Ö–æ–µ –º–æ–ª–æ–∫–æ', category: 'recovery', kcal: 500, protein: 26, fat: 27, carbs: 38, sodium: 400 },
            { id: 70, name: '–ß–µ—Ä–Ω–∏–∫–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è', category: 'recovery', kcal: 310, protein: 1, fat: 0, carbs: 78, sodium: 8 },
        ];

        const CATEGORIES = {
            light: { icon: 'fa-leaf', name: '–õ—ë–≥–∫–∞—è –µ–¥–∞', desc: '–ë–µ–ª–∫–∏, –æ–≤–æ—â–∏' },
            strengthen: { icon: 'fa-dumbbell', name: '–£–∫—Ä–µ–ø–∏—Ç—å—Å—è', desc: '–°—ã—Ç–Ω—ã–µ –±–ª—é–¥–∞' },
            energy: { icon: 'fa-bolt', name: '–≠–Ω–µ—Ä–≥–∏—è', desc: '–ö–∞–ª–æ—Ä–∏–π–Ω—ã–µ' },
            recovery: { icon: 'fa-heart', name: '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ', desc: '–£–≥–ª–µ–≤–æ–¥—ã' },
            hydration: { icon: 'fa-droplet', name: '–ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è', desc: '–ù–∞–ø–∏—Ç–∫–∏' },
        };

        // –ü–ï–†–ï–í–û–î–´
        const TRANSLATIONS = {
            ru: {
                homebutton: '–ù–∞ –≥–ª–∞–≤–Ω—É—é',
                stepLabel1: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è',
                stepLabel2: '–ü—Ä–æ–¥—É–∫—Ç—ã',
                stepLabel3: '–û–±—Ä–∞–±–æ—Ç–∫–∞',
                stepLabel4: '–ê–Ω–∞–ª–∏–∑',
                stepLabel5: '–ü—Ä–æ–≤–µ—Ä–∫–∞',
                stepLabel6: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
                step1: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Ü–∏–æ–Ω–∞',
                step1sub: '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –º–∏—Å—Å–∏–∏',
                step2: '–í—ã–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤',
                step2sub: '–°–æ—Å—Ç–∞–≤—å—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω –∏–∑ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –µ–¥—ã',
                step3: '–ú–µ—Ç–æ–¥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏',
                step3sub: '–í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –∫–æ—Å–º–æ—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é —Å—É–±–ª–∏–º–∞—Ü–∏–∏',
                step4: '–ê–Ω–∞–ª–∏–∑ —Ä–∞—Ü–∏–æ–Ω–∞',
                step4sub: 'ML-—Å–∫–æ—Ä–∏–Ω–≥ –∏ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç',
                step5: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞',
                step5sub: '–ò–ò –î–µ—Ç–µ–∫—Ç–æ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Å–µ—Ä–≤–Ω—ã—Ö –±–∞–Ω–æ–∫ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤',
                step6: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞',
                step6sub: '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –º–µ–Ω—é',
                categoryLight: '–ë–µ–ª–∫–∏, –æ–≤–æ—â–∏',
                categoryStrengthen: '–°—ã—Ç–Ω—ã–µ –±–ª—é–¥–∞',
                categoryEnergy: '–ö–∞–ª–æ—Ä–∏–π–Ω—ã–µ',
                categoryRecovery: '–£–≥–ª–µ–≤–æ–¥—ã',
                categoryHydration: '–ù–∞–ø–∏—Ç–∫–∏',
                sublimationProductsLabel: '–°—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã',
                nutritionValue: '–ü–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å',
                selectProducts: '–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã',
                selectedList: '–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã',
                foodComposition: '–ü–æ–ª–Ω—ã–π —Å–æ—Å—Ç–∞–≤',
                settings: '–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è',
                dietName: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Ü–∏–æ–Ω–∞',
                dietNamePlaceholder: '–ù–∞–ø—Ä–∏–º–µ—Ä: –ó–∞–≤—Ç—Ä–∞–∫ –î–µ–Ω—å 1',
                mealType: '–¢–∏–ø –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏',
                breakfast: '–ó–∞–≤—Ç—Ä–∞–∫',
                lunch: '–û–±–µ–¥',
                dinner: '–£–∂–∏–Ω',
                snack: '–ü–µ—Ä–µ–∫—É—Å',
                detailNext: '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏',
                back: '–ù–∞–∑–∞–¥',
                next: '–î–∞–ª–µ–µ',
                save: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
                macroEnergy: '–≠–Ω–µ—Ä–≥–∏—è',
                macroProtein: '–ë–µ–ª–∫–∏',
                macroFat: '–ñ–∏—Ä—ã',
                macroCarbs: '–£–≥–ª–µ–≤–æ–¥—ã',
                kcal: '–∫–∫–∞–ª',
                grams: '–≥',
                selectCheckType: '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–≤–µ—Ä–∫–∏:',
                canDefects: '–î–µ—Ñ–µ–∫—Ç—ã –±–∞–Ω–æ–∫',
                canIntegrity: '–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è',
                moldContamination: '–ü–ª–µ—Å–µ–Ω—å –∏ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è',
                productCondition: '–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞',
                videoStream: '–í–∏–¥–µ–æ–ø–æ—Ç–æ–∫',
                results: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã',
                start: '–ó–∞–ø—É—Å—Ç–∏—Ç—å',
                stop: '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å',
                skipCheck: '–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É',
                sublimationProducts: '–°—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã',
                weightInfo: '‚Ä¢ –í–µ—Å –ø–æ—Ä—Ü–∏–∏: –Ω–∞ 80% –ª–µ–≥—á–µ –æ–±—ã—á–Ω–æ–π',
                rehabInfo: '‚Ä¢ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: –¥–æ–±–∞–≤—å—Ç–µ –≤–æ–¥—É (5 –º–∏–Ω—É—Ç)',
                storageInfo: '‚Ä¢ –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–æ 25 –ª–µ—Ç –≤ –≤–∞–∫—É—É–º–µ',
                mlBonus: '‚Ä¢ ML-–±–æ–Ω—É—Å: +20 –±–∞–ª–ª–æ–≤ –∑–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é',
                idealSpace: '‚Ä¢ –ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—ë—Ç–æ–≤',
                searchPlaceholder: '–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...',
                noProducts: '–ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã',
                readyToCheck: '‚úì –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å"',
                mlScoringLabel: 'ML-—Å–∫–æ—Ä–∏–Ω–≥ –∏ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç',
                caloriesExceeded: '–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –Ω–æ—Ä–º–∞',
                tooManyCalories: '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–∞–ª–æ—Ä–∏–π –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–∏—ë–º–∞',
                lowEnergy: '–ú–∞–ª–æ —ç–Ω–µ—Ä–≥–∏–∏',
                needMoreCalories: '–¢—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–µ –∫–∞–ª–æ—Ä–∏–π',
                lowProtein: '–î–µ—Ñ–∏—Ü–∏—Ç –±–µ–ª–∫–æ–≤',
                insufficientProtein: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ç–µ–∏–Ω–∞',
                excellentDiet: '‚úì –û—Ç–ª–∏—á–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω',
                perfectlyBalanced: '–ò–¥–µ–∞–ª—å–Ω–æ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω –¥–ª—è –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π',
                goodDiet: '‚úì –•–æ—Ä–æ—à–∏–π —Ä–∞—Ü–∏–æ–Ω',
                goodRatio: '–•–æ—Ä–æ—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤',
                acceptableDiet: '‚óâ –ü—Ä–∏–µ–º–ª–µ–º—ã–π —Ä–∞—Ü–∏–æ–Ω',
                canImprove: '–ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤',
                weakDiet: '‚óâ –°–ª–∞–±—ã–π —Ä–∞—Ü–∏–æ–Ω',
                needsImprovement: '–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞',
                inadequateDiet: '‚úó –ù–µ–∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π —Å–æ—Å—Ç–∞–≤',
                needsReview: '–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä—å—ë–∑–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –º–µ–Ω—é',
                recommendRemoveHighEnergy: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£–±–µ—Ä–∏—Ç–µ –≤—ã—Å–æ–∫–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (–æ—Ä–µ—Ö–∏, —à–æ–∫–æ–ª–∞–¥) –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä—Ü–∏–∏.',
                recommendAddEnergy: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤—å—Ç–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (–æ—Ä–µ—Ö–∏, —Ñ—Ä—É–∫—Ç—ã, –∑—ë—Ä–Ω–∞).',
                recommendAddProtein: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤—å—Ç–µ –±–µ–ª–∫–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã (–∫—É—Ä–∏—Ü–∞, —Ä—ã–±–∞, –±–æ–±—ã).',
                recommendDiversity: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤—å—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞.',
                recommendBalance: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤.',
                recommendReview: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü–µ—Ä–µ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –±–∞–ª–∞–Ω—Å –±–µ–ª–∫–æ–≤/–∂–∏—Ä–æ–≤/—É–≥–ª–µ–≤–æ–¥–æ–≤.',
                composition: '–°–æ—Å—Ç–∞–≤:',
                analysisFormula: '–ê–Ω–∞–ª–∏–∑ –ø–æ —Ñ–æ—Ä–º—É–ª–µ: –∫–∞–ª–æ—Ä–∏–∏, –±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã, –Ω–∞—Ç—Ä–∏–π',
                highCalories: '‚ö† <strong style="color: #ffaa22;">–ü—Ä–µ–≤—ã—à–µ–Ω–æ –∫–∞–ª–æ—Ä–∏–π!</strong>',
                lowEnergy2: '‚ö† <strong style="color: #ffaa22;">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!</strong>',
                lowProtein2: '‚ö† <strong style="color: #ffaa22;">–ú–∞–ª–æ –±–µ–ª–∫–æ–≤!</strong>',
            },
            en: {
                homebutton: 'Home',
                stepLabel1: 'Category',
                stepLabel2: 'Products',
                stepLabel3: 'Processing',
                stepLabel4: 'Analysis',
                stepLabel5: 'Check',
                stepLabel6: 'Save',
                step1: 'Diet Category',
                step1sub: 'Choose a nutrition type for your space mission',
                step2: 'Choose Products',
                step2sub: 'Create an optimal diet from freeze-dried food',
                step3: 'Processing Method',
                step3sub: 'All space products use sublimation technology',
                step4: 'Diet Analysis',
                step4sub: 'ML scoring and nutritional calculation',
                step5: 'Quality Check',
                step5sub: 'AI Detector for analyzing the condition of tin cans and products',
                step6: 'Save Diet',
                step6sub: 'Complete your space menu',
                categoryLight: 'Proteins, vegetables',
                categoryStrengthen: 'Hearty dishes',
                categoryEnergy: 'High-calorie',
                categoryRecovery: 'Carbs',
                categoryHydration: 'Beverages',
                sublimationProductsLabel: 'Freeze-Dried Products',
                nutritionValue: 'Nutritional Value',
                selectProducts: 'Selected Products',
                selectedList: 'Selected Products',
                foodComposition: 'Full Composition',
                settings: 'Save Settings',
                dietName: 'Diet Name',
                dietNamePlaceholder: 'Example: Breakfast Day 1',
                mealType: 'Meal Type',
                breakfast: 'Breakfast',
                lunch: 'Lunch',
                dinner: 'Dinner',
                snack: 'Snack',
                detailNext: 'View Details',
                back: 'Back',
                next: 'Next',
                save: 'Save',
                macroEnergy: 'Energy',
                macroProtein: 'Proteins',
                macroFat: 'Fats',
                macroCarbs: 'Carbs',
                kcal: 'kcal',
                grams: 'g',
                selectCheckType: 'Select inspection type:',
                canDefects: 'Can Defects',
                canIntegrity: 'Integrity and Damage',
                moldContamination: 'Mold and Contamination',
                productCondition: 'Product Condition',
                videoStream: 'Video Stream',
                results: 'Results',
                start: 'Start',
                stop: 'Stop',
                skipCheck: 'Skip Check',
                sublimationProducts: 'Freeze-Dried Products',
                weightInfo: '‚Ä¢ Weight per serving: 80% lighter than regular',
                rehabInfo: '‚Ä¢ Recovery: add water (5 minutes)',
                storageInfo: '‚Ä¢ Shelf life: up to 25 years in vacuum',
                mlBonus: '‚Ä¢ ML bonus: +20 points for technology',
                idealSpace: '‚Ä¢ Perfect for space missions',
                searchPlaceholder: 'Search by name...',
                noProducts: 'Products not found',
                readyToCheck: '‚úì Ready for check. Click "Start"',
                mlScoringLabel: 'ML scoring and nutritional calculation',
                caloriesExceeded: 'Exceeded normal',
                tooManyCalories: 'Too many calories per meal',
                lowEnergy: 'Low energy',
                needMoreCalories: 'More calories needed',
                lowProtein: 'Protein deficiency',
                insufficientProtein: 'Insufficient protein amount',
                excellentDiet: '‚úì Excellent diet',
                perfectlyBalanced: 'Perfectly balanced for space operations',
                goodDiet: '‚úì Good diet',
                goodRatio: 'Good macronutrient ratio',
                acceptableDiet: '‚óâ Acceptable diet',
                canImprove: 'Can improve product variety',
                weakDiet: '‚óâ Weak diet',
                needsImprovement: 'Requires improvement and balance adjustment',
                inadequateDiet: '‚úó Inadequate composition',
                needsReview: 'Requires serious menu revision',
                recommendRemoveHighEnergy: 'Recommendation: Remove high-energy products (nuts, chocolate) or reduce portions.',
                recommendAddEnergy: 'Recommendation: Add energy-rich products (nuts, fruit, grains).',
                recommendAddProtein: 'Recommendation: Add protein products (chicken, fish, beans).',
                recommendDiversity: 'Recommendation: Add variety of products for better balance.',
                recommendBalance: 'Recommendation: Increase variety and check macronutrient ratio.',
                recommendReview: 'Recommendation: Completely revise products, focus on protein/fat/carb balance.',
                composition: 'Composition:',
                analysisFormula: 'Analysis formula: calories, proteins, fats, carbs, sodium',
                highCalories: '‚ö† <strong style="color: #ffaa22;">Calories exceeded!</strong>',
                lowEnergy2: '‚ö† <strong style="color: #ffaa22;">Insufficient energy!</strong>',
                lowProtein2: '‚ö† <strong style="color: #ffaa22;">Low protein!</strong>',
            },
            kz: {
                homebutton: '–ë–∞—Å“õ–∞ –±–µ—Ç',
                stepLabel1: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è—Å—ã',
                stepLabel2: '”®–Ω—ñ–º–¥–µ—Ä',
                stepLabel3: '”®“£–¥–µ—É',
                stepLabel4: '–¢–∞–ª–¥–∞—É',
                stepLabel5: '–¢–µ–∫—Å–µ—Ä—É',
                stepLabel6: '–°–∞“õ—Ç–∞—É',
                step1: '–î–∏–µ—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Å—ã',
                step1sub: '“∞–∑–∞“õ —Å–∞–ø–∞—Ä—ã“£—ã–∑ “Ø—à—ñ–Ω —Ç–∞–º–∞“õ —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑',
                step2: '”®–Ω—ñ–º–¥–µ—Ä —Ç–∞“£–¥–∞—É',
                step2sub: '“ö“±—Ä–∞–º–∞—Å—ã —ã“ì—ã—Å—Ç–∞–ª“ì–∞–Ω —Ç–∞–º–∞“õ—Ç–∞–Ω –æ–ø—Ç–∏–º–∞–ª –¥–∏–µ—Ç–∞ “õ“±—Ä—ã“£—ã–∑',
                step3: '”®“£–¥–µ—É ”ô–¥—ñ—Å—ñ',
                step3sub: '–ë–∞—Ä–ª—ã“õ –∫–æ—Å–º–æ—Å ”©–Ω—ñ–º–¥–µ—Ä—ñ —Å—É–±–ª–∏–º–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Å—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω–∞–¥—ã',
                step4: '–î–∏–µ—Ç–∞ —Ç–∞–ª–¥–∞—É',
                step4sub: 'ML “±–ø–∞–π—ã –∂”ô–Ω–µ —Ç–∞–º–∞“õ—Ç–∞–Ω—É –µ—Å–∞–±—ã',
                step5: '–°–∞–ø–∞ —Ç–µ–∫—Å–µ—Ä—É—ñ',
                step5sub: '–ö–æ–Ω—Å–µ—Ä–≤—Ç–µ –±–∞–Ω–∫–∞–ª–∞—Ä—ã –∂”ô–Ω–µ ”©–Ω—ñ–º–¥–µ—Ä–¥—ñ“£ –∂–∞“ì–¥–∞–π—ã–Ω —Ç–∞–ª–¥–∞—É “Ø—à—ñ–Ω AI –î–µ—Ç–µ–∫—Ç–æ—Ä',
                step6: '–î–∏–µ—Ç–∞–Ω—ã —Å–∞“õ—Ç–∞—É',
                step6sub: '“∞–∑–∞“õ —Å–∞–ø–∞—Ä—ã“£—ã–∑ “Ø—à—ñ–Ω –º–µ–Ω—é—Å—ñ–Ω –∞—è“õ—Ç–∞“£—ã–∑',
                categoryLight: '–ê“ì–∑–∞–º –¥–∞“ì—ã, –∫”©–∫”©–Ω—ñ—Å—Ç–µ—Ä',
                categoryStrengthen: '–°—ã–ø–∞–π—ã —Ç–∞“ì–∞–º–¥–∞—Ä',
                categoryEnergy: '–ñ–æ“ì–∞—Ä—ã –∫–∞–ª–æ—Ä–∏–π–ª—ñ–∫',
                categoryRecovery: '–ö”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä',
                categoryHydration: '–Ü—à—ñ–º–¥—ñ–∫—Ç–µ—Ä',
                sublimationProductsLabel: '–°—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É ”©–Ω—ñ–º–¥–µ—Ä—ñ',
                nutritionValue: '”®–Ω–¥—ñ–∫—Ç—ñ–∫ “õ“±–Ω–∞—Å—ã',
                selectProducts: '–¢–∞“£–¥–∞–ª“ì–∞–Ω ”©–Ω—ñ–º–¥–µ—Ä',
                selectedList: '–¢–∞“£–¥–∞–ª“ì–∞–Ω ”©–Ω—ñ–º–¥–µ—Ä',
                foodComposition: '–¢–æ–ª—ã“õ “õ“±—Ä–∞–º–∞—Å—ã',
                settings: '–°–∞“õ—Ç–∞—É –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä—ñ',
                dietName: '–î–∏–µ—Ç–∞ –∞—Ç–∞—É—ã',
                dietNamePlaceholder: '–ú—ã—Å–∞–ª—ã: –¢–∞“£“ì—ã –∞—Å 1-–∫“Ø–Ω—ñ',
                mealType: '–¢–∞–º–∞“õ —Ç“Ø—Ä—ñ',
                breakfast: '–¢–∞“£“ì—ã –∞—Å',
                lunch: '–¢“Ø—Å–∫—ñ –∞—Å',
                dinner: '–ö–µ—à–∫—ñ –∞—Å',
                snack: '–ó–∞–∫—É—Å–∫–∞',
                detailNext: '–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –∫”©—Ä',
                back: '–ê—Ä—Ç“õ–∞',
                next: '–û–¥–∞–Ω ”ô—Ä—ñ',
                save: '–°–∞“õ—Ç–∞—É',
                macroEnergy: '–≠–Ω–µ—Ä–≥–∏—è',
                macroProtein: '–ê“ì–∑–∞–º –¥–∞“ì—ã',
                macroFat: '–ú–∞–π–ª–∞—Ä',
                macroCarbs: '–ö”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä',
                kcal: '–∫–∫–∞–ª',
                grams: '–≥',
                selectCheckType: '–¢–µ–∫—Å–µ—Ä—É —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑:',
                canDefects: '–ë–∞–Ω–∫–∞ –∞“õ–∞—É—ã',
                canIntegrity: '–¢–∞–º–Ω—ñ—Å—Ç—å –∂”ô–Ω–µ –∑–∞“õ—ã–º–¥–∞–Ω—É',
                moldContamination: '“í–∞–Ω–∞ –∂”ô–Ω–µ –ª–∞—Å—Ç–∞–Ω—É',
                productCondition: '”®–Ω—ñ–º –∂–∞“ì–¥–∞–π—ã',
                videoStream: '–ë–µ–π–Ω–µ –∞“ì—ã–Ω—ã',
                results: '–ù”ô—Ç–∏–∂–µ–ª–µ—Ä',
                start: '–ë–∞—Å—Ç—ã',
                stop: '–¢–æ“õ—Ç–∞—Ç—É',
                skipCheck: '–¢–µ–∫—Å–µ—Ä—É–¥—ñ ”©—Ç–∫—ñ–∑—ñ–ø –∂—ñ–±–µ—Ä',
                sublimationProducts: '–°—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É ”©–Ω—ñ–º–¥–µ—Ä—ñ',
                weightInfo: '‚Ä¢ –ë—ñ—Ä –ø–æ—Ä—Ü–∏—è–Ω—ã“£ —Å–∞–ª–º–∞“ì—ã: —Ç”©–º–ø–µ –∂–∞—Å 80% –æ“£–∞–π',
                rehabInfo: '‚Ä¢ “ö–∞–ª–ø—ã–Ω–∞ –∫–µ–ª—Ç—ñ—Ä—É: —Å—É “õ–æ—Å—ã“£—ã–∑ (5 –º–∏–Ω—É—Ç)',
                storageInfo: '‚Ä¢ –°–∞“õ—Ç–∞—É –º–µ—Ä–∑—ñ–º—ñ: –≤–∞–∫—É—É–º–¥–∞ 25 –∂—ã–ª—ã–Ω–∞ –¥–µ–π—ñ–Ω',
                mlBonus: '‚Ä¢ ML –±–æ–Ω—É—Å—ã: —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è “Ø—à—ñ–Ω +20 “±–ø–∞–π',
                idealSpace: '‚Ä¢ “í–∞—Ä—ã—à –º–∏—Å—Å–∏—è–ª–∞—Ä—ã “Ø—à—ñ–Ω –∏–¥–µ–∞–ª–¥—ã',
                searchPlaceholder: '–ê—Ç–∞—É—ã –±–æ–π—ã–Ω—à–∞ —ñ–∑–¥–µ—É...',
                noProducts: '”®–Ω—ñ–º–¥–µ—Ä —Ç–∞–±—ã–ª–º–∞–¥—ã',
                readyToCheck: '‚úì –¢–µ–∫—Å–µ—Ä—É–≥–µ –¥–∞–π—ã–Ω. "–ë–∞—Å—Ç—ã" –±–∞—Å—ã“£—ã–∑',
                mlScoringLabel: 'ML “±–ø–∞–π—ã –∂”ô–Ω–µ —Ç–∞–º–∞“õ—Ç–∞–Ω—É –µ—Å–µ–±–∏',
                caloriesExceeded: '–ù–æ—Ä–º—É–º –∞—Å—ã—Ä—ã–ª–¥—ã',
                tooManyCalories: '–ë—ñ—Ä –ø—Ä–∏–µ–º “Ø—à—ñ–Ω —Ç—ã–º –∫”©–ø –∫–∞–ª–æ—Ä–∏—è',
                lowEnergy: '–ê–∑ —ç–Ω–µ—Ä–≥–∏—è',
                needMoreCalories: '“ö“±–ª—ã–Ω–¥—ã“ì—ã–Ω–¥–∞ ”©–∑ –∫–∞–ª–æ—Ä–∏–∏ “õ–∞–∂–µ—Ç',
                lowProtein: '–ê“ì–∑–∞–º –¥–∞“ì—ã –¥–µ—Ñ–∏—Ü–∏—Ç—ñ',
                insufficientProtein: '–ê“ì–∑–∞–º –¥–∞“ì—ã–Ω—ã“£ –∂–µ—Ç–∫—ñ–ª—ñ–∫—Å—ñ–∑ –º”©–ª—à–µ—Ä—ñ',
                excellentDiet: '‚úì –¢–∞–º–∞—à–∞ –¥–∏–µ—Ç–∞',
                perfectlyBalanced: '“í–∞—Ä—ã—à –æ–ø–µ—Ä–∞—Ü–∏—è–ª–∞—Ä—ã “Ø—à—ñ–Ω —Ç”©–ª—ñ–∫ –æ—Ä—ã–Ω–¥–∞–ª–¥—ã',
                goodDiet: '‚úì –ñ–∞“õ—Å—ã –¥–∏–µ—Ç–∞',
                goodRatio: '–ú–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—Ç–µ—Ä—ñ–Ω—ñ“£ –∂–∞“õ—Å—ã “õ–∞—Ç—ã–Ω–∞—Å—ã',
                acceptableDiet: '‚óâ “ö–∞–±—ã–ª–¥–∞–π—Ç—ã–Ω –¥–∏–µ—Ç–∞',
                canImprove: '”®–Ω—ñ–º–¥–µ—Ä–¥—ñ“£ —Ç“Ø—Ä–ª–µ—É ”©–Ω–¥—ñ–∫—Ç—ñ–∫–∂—ñ–Ω–¥—ñ—Å—ñ–Ω ”©—Å–ø–µ–±–∏',
                weakDiet: '‚óâ –ù”©–ª—Å—ñ–∑ –¥–∏–µ—Ç–∞',
                needsImprovement: '–¢–∞“ì–¥—ã—Ä–ª–∞—É –∂”ô–Ω–µ –±–∞–ª–∞–Ω—Å—Ç—ã ”©–ø—Å—Ç–µ—É–¥—ñ —Ç–∞–ª–∞–ø –µ—Ç–µ–¥—ñ',
                inadequateDiet: '‚úó –û—Ä—ã–Ω—Å—ã–∑ “õ“±—Ä–∞–º–∞—Å—ã',
                needsReview: '–ú–µ–Ω—é–¥—ñ “±–∑–∞“õ –æ–π—ã–Ω–¥–∞—É “õ–∞–∂–µ—Ç',
                recommendRemoveHighEnergy: '“∞—Å—ã–Ω—ã—Å: –ñ–æ“ì–∞—Ä—ã —ç–Ω–µ—Ä–≥–∏—è–ª—ã ”©–Ω—ñ–º–¥–µ—Ä–¥—ñ (“õ“±—Å, “Ø—Ö—ñ–ª) –Ω–µ–º–µ—Å–µ –ø–æ—Ä—Ü–∏—è–ª–∞—Ä–¥—ã –µ–¥–µ–º—ñ–Ω–¥–µ.',
                recommendAddEnergy: '“∞—Å—ã–Ω—ã—Å: –≠–Ω–µ—Ä–≥–∏—è “õ“±–º–∞–ª—ã ”©–Ω—ñ–º–¥–µ—Ä “õ–æ—Å—ã“£—ã–∑ (“õ“±—Å, –∂–µ–º—ñ—Å—Ç–µ—Ä, –¥”ô–Ω–¥–µ—Ä).',
                recommendAddProtein: '“∞—Å—ã–Ω—ã—Å: –ê“ì–∑–∞–º –¥–∞“ì—ã ”©–Ω—ñ–º–¥–µ—Ä “õ–æ—Å—ã“£—ã–∑ (—Ç–∞—É—ã“õ, –±–∞–ª—ã“õ, —Å–∞—Ä–∞–º–∞–π).',
                recommendDiversity: '“∞—Å—ã–Ω—ã—Å: –ë–∞–ª–∞–Ω—Å—Ç—ã –∂–∞“õ—Å–∞—Ä—Ç—É “Ø—à—ñ–Ω ”©–Ω—ñ–º–¥–µ—Ä–¥—ñ“£ —Ç“Ø—Ä–ª–µ–ª—ñ–≥—ñ–Ω –∫”©–±–µ“£—ñ–∑.',
                recommendBalance: '“∞—Å—ã–Ω—ã—Å: –¢“Ø—Ä–ª–µ—É–¥—ñ “±“ì–∞–º—ã“£—ã–∑ –∂”ô–Ω–µ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—Ç–µ—Ä—ñ–Ω—ñ“£ “õ–∞—Ç—ã–Ω–∞—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑.',
                recommendReview: '“∞—Å—ã–Ω—ã—Å: ”®–Ω—ñ–º–¥–µ—Ä–¥—ñ —Ç–æ–ª—ã“ì—ã–º–µ–Ω “õ–∞–π—Ç–∞ “õ–∞—Ä–∞–ø, –∞“ì–∑–∞–º –¥–∞“ì—ã/–º–∞–π–ª–∞—Ä/–∫”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä–¥—ñ“£ –±–∞–ª–∞–Ω—Å—ã–Ω–∞ –Ω–∞–∑–∞—Ä –∞—É–¥–∞—Ä—ã“£—ã–∑.',
                composition: '“ö“±—Ä–∞–º–∞—Å—ã:',
                analysisFormula: '–ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—É–ª–∞—Å—ã: –∫–∞–ª–æ—Ä–∏—è, –∞“ì–∑–∞–º –¥–∞“ì—ã, –º–∞–π–ª–∞—Ä, –∫”©–º—ñ—Ä—Å—É—Ç–µ–∫—Ç–µ—Ä, –Ω–∞—Ç—Ä–∏–π',
                highCalories: '‚ö† <strong style="color: #ffaa22;">–ö–∞–ª–æ—Ä–∏—è –∞—Å—ã—Ä—ã–ª–¥—ã!</strong>',
                lowEnergy2: '‚ö† <strong style="color: #ffaa22;">–ê–∑ —ç–Ω–µ—Ä–≥–∏—è!</strong>',
                lowProtein2: '‚ö† <strong style="color: #ffaa22;">–ê–∑ –∞“ì–∑–∞–º –¥–∞“ì—ã!</strong>',
            }
        };

        // –ì–õ–û–ë–ê–õ–¨–ù–´–ô –¢–ï–ö–£–©–ò–ô –Ø–ó–´–ö
        let currentLang = localStorage.getItem('cosmodiet_lang') || 'ru';

        // –ü–ï–†–ï–í–û–î–´ –ù–ê–ó–í–ê–ù–ò–ô –ü–†–û–î–£–ö–¢–û–í
        const PRODUCT_NAMES = {
            ru: {
                1: '–ö—É–∏—á–Ω–æ–µ —Ñ–∏–ª–µ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ',
                2: '–§–æ—Ä–µ–ª—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—É—Å–æ—á–∫–∏',
                3: '–û–≤–æ—â–Ω–∞—è —Å–º–µ—Å—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                4: '–®–ø–∏–Ω–∞—Ç —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                5: '–ë—Ä–æ–∫–∫–æ–ª–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                6: '–ì–æ–≤—è–¥–∏–Ω–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫—É—Å–æ—á–∫–∏',
                7: '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –ø—é—Ä–µ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ',
                8: '–ú–∞–∫–∞—Ä–æ–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è',
                9: '–†–∏—Å —Å –∫—É—Ä–∏—Ü–µ–π —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                10: '–§–∞—Å–æ–ª—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                11: '–ö–ª—É–±–Ω–∏–∫–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                12: '–Ø–±–ª–æ–∫–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ',
                13: '–ö–∞—à–∞ –≥—Ä–µ—á–Ω–µ–≤–∞—è —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                14: '–ú—ë–¥ –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π',
                15: '–ü–µ—Ä—Å–∏–∫ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                16: '–û—Ä–µ—Ö–∏ –∞—Å—Å–æ—Ä—Ç–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ',
                17: '–ë–∞—Ç–æ–Ω—á–∏–∫ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π',
                18: '–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∞—Å—Å–æ—Ä—Ç–∏',
                19: '–®–æ–∫–æ–ª–∞–¥ —Ç—ë–º–Ω—ã–π –ø–ª–∏—Ç–∫–∞',
                20: '–°–≥—É—â—ë–Ω–Ω–æ–µ –º–æ–ª–æ–∫–æ –ø–æ—Ä—Ü–∏—è',
                21: '–ü–æ—Ä–æ—à–æ–∫ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫',
                22: '–ö–æ–º–ø–æ—Ç –≥—Ä—É—à–∞ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç',
                23: '–ê–ø–µ–ª—å—Å–∏–Ω —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                24: '–ö–∏—Å–ª–æ–º–æ–ª–æ—á–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫',
                25: '–≠–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–Ω—ã–π –ø–æ—Ä–æ—à–æ–∫',
                26: '–ë–µ–ª–∫–∏ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ',
                27: '–õ–∏–æ—Ñ–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–≤–æ—â–∏',
                28: '–ö—Ä—É–ø–∞ —è—á–Ω–µ–≤–∞—è —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                29: '–Ø–≥–æ–¥—ã –º–∏–∫—Å–æ–≤–∞–Ω–Ω—ã–µ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ',
                30: '–ê—Ä–∞—Ö–∏—Å–æ–≤–∞—è –ø–∞—Å—Ç–∞ –ø–æ—Ä—Ü–∏—è',
                51: '–ú–∏–Ω—Ç–∞–π —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                52: '–ú–æ—Ä–∫–æ–≤—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                53: '–ö–∞–±–∞—á–æ–∫ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                54: '–ß–µ—á–µ–≤–∏—Ü–∞ –∫—Ä–∞—Å–Ω–∞—è —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                55: '–ì–æ—Ä–æ—Ö –∑–µ–ª—ë–Ω—ã–π —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                56: '–ù—É—Ç —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                57: '–Ø—á–Ω–µ–≤–∞—è –∫—Ä—É–ø–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                58: '–ë–∞–Ω–∞–Ω —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                59: '–¢–≤–æ—Ä–æ–≥ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                60: '–ì—Ä—É—à–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
                61: '–ú–∏–Ω–¥–∞–ª—å —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                62: '–ö–µ—à—å—é —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                63: '–ò–∑—é–º —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π',
                64: '–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –≥–µ–ª—å',
                65: '–õ–∏–º–æ–Ω–Ω–æ-–∏–º–±–∏—Ä–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫',
                66: '–Ø–≥–æ–¥–Ω—ã–π –º–æ—Ä—Å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç',
                67: '–ó–µ–ª—ë–Ω—ã–π —á–∞–π –ø–æ—Ä—Ü–∏—è',
                68: '–ö–∞–∫–∞–æ-–ø–æ—Ä–æ—à–æ–∫',
                69: '–°—É—Ö–æ–µ –º–æ–ª–æ–∫–æ',
                70: '–ß–µ—Ä–Ω–∏–∫–∞ —Å—É–±–ª–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è',
            },
            en: {
                1: 'Chicken fillet freeze-dried',
                2: 'Trout freeze-dried pieces',
                3: 'Vegetable mix freeze-dried',
                4: 'Spinach freeze-dried',
                5: 'Broccoli freeze-dried',
                6: 'Beef freeze-dried pieces',
                7: 'Potato puree freeze-dried',
                8: 'Pasta products',
                9: 'Rice with chicken freeze-dried',
                10: 'Beans freeze-dried',
                11: 'Strawberry freeze-dried',
                12: 'Apples freeze-dried',
                13: 'Buckwheat porridge freeze-dried',
                14: 'Honey portion',
                15: 'Peach freeze-dried',
                16: 'Nuts assorted freeze-dried',
                17: 'Energy bar',
                18: 'Dried fruit assortment',
                19: 'Dark chocolate bar',
                20: 'Condensed milk portion',
                21: 'Sports drink powder',
                22: 'Pear compote concentrate',
                23: 'Orange freeze-dried',
                24: 'Fermented milk drink',
                25: 'Electrolyte powder',
                26: 'Proteins freeze-dried',
                27: 'Freeze-dried vegetables',
                28: 'Barley porridge freeze-dried',
                29: 'Mixed berries freeze-dried',
                30: 'Peanut butter portion',
                51: 'Pollock freeze-dried',
                52: 'Carrot freeze-dried',
                53: 'Zucchini freeze-dried',
                54: 'Red lentil freeze-dried',
                55: 'Green peas freeze-dried',
                56: 'Chickpeas freeze-dried',
                57: 'Barley porridge freeze-dried',
                58: 'Banana freeze-dried',
                59: 'Cottage cheese freeze-dried',
                60: 'Pear freeze-dried',
                61: 'Almond freeze-dried',
                62: 'Cashew freeze-dried',
                63: 'Raisins freeze-dried',
                64: 'Energy gel',
                65: 'Lemon-ginger drink',
                66: 'Berry juice concentrate',
                67: 'Green tea portion',
                68: 'Cocoa powder',
                69: 'Powdered milk',
                70: 'Blueberry freeze-dried',
            },
            kz: {
                1: '–¢–∞—É—ã“õ —Ñ–∏–ª–µ—Å—ñ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                2: '–§–æ—Ä–µ–ª—å —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É —Ç–∞“ì–∞–º–¥–∞—Ä—ã',
                3: '–ö”©–∫”©–Ω—ñ—Å –∞—Ä–∞–ª–∞—Å—É—ã —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                4: '–®–ø–∏–Ω–∞—Ç —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                5: '–ë—Ä–æ–∫–∫–æ–ª—å—ñ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                6: '–°–∏—ã—Ä –µ—Ç—Ç–µ—Ä—ñ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É —Ç–∞“ì–∞–º–¥–∞—Ä—ã',
                7: '–ö–∞—Ä—Ç–æ–ø—ñ–ª—å–∫—ñ –∫”ô—Å—ñ–ª —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                8: '–ú–∞–∫–∞—Ä–æ–Ω ”©–Ω—ñ–º–¥–µ—Ä—ñ',
                9: '–¢–∞—É—ã“õ –∞—Ä–∞–º—ã —Ä–∏—Å —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                10: '“ö“±—Ä–∞“õ–µ—Ç —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                11: '“ö“±–ª–ø—ã–Ω–∞–π —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                12: 'Almalar —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                13: '–ì—Ä–µ—á–∫–∞ “õ“±—Å–∞–º–∞—Å—ã —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                14: '–ê—Ä–∞ —Å–∞–ª—Ç—ã—Å—ã –±”©–ª—ñ–Ω—ñ—Å—ñ',
                15: '–®–∞–±–∞—Ä —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                16: '“ö“±—Å –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç—ñ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                17: '–≠–Ω–µ—Ä–≥–∏—è –±–∞—Ç–æ–Ω—á–∏–≥—ñ',
                18: '“ö“±—Ä—Ä–∞–Ω—ã“£ –∞—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç—ñ',
                19: '“ö–∞—Ä–∞ —à–æ–∫–æ–ª–∞–¥ –ø–ª–∞—Å—Ç–∏–Ω–∞—Å—ã',
                20: '–°–≥—É—â–µ–Ω–Ω–æ–µ —Å“Ø—Ç –±”©–ª—ñ–Ω—ñ—Å—ñ',
                21: '–°–ø–æ—Ä—Ç —ñ—à—ñ–º–¥—ñ–≥—ñ “±–Ω—Ç–∞“ì—ã',
                22: '–ì—Ä—É—à–∞ –∫–æ–º–ø–æ—Ç—ã –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç—ã',
                23: '–ê–ø–µ–ª—å—Å–∏–Ω —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                24: '–°“Ø—Ç –∞—Å—ã–ª —ñ—à—ñ–º–¥—ñ–≥—ñ',
                25: '–≠–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç “±–Ω—Ç–∞“ì—ã',
                26: '–ê“ì–∑–∞–º –¥–∞“ì—ã —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                27: '–†–µ–¥—Å–∏—Ç –∫”©–∫”©–Ω—ñ—Å',
                28: '–Ø—á–º–µ–Ω—å “õ“±—Å–∞–º–∞—Å—ã —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                29: '–ò—Ä–ª—ñ–∫ —è–≥–æ–¥–∞–ª–∞—Ä —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                30: '–ê—Ä–∞—Ö–∏—Å—Ç—ñ“£ —Å“Ø—Ç –ø–∞—Å—Ç–∞—Å—ã –±”©–ª—ñ–Ω—ñ—Å—ñ',
                51: '–ú–∏–Ω—Ç–∞–π —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                52: '–°”ô–±—ñ–∑ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                53: '–ö–∞–±–∞—á–æ–∫ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                54: '“ö“±–ª–∞“õ —Å“Ø–Ω–¥—ñ–∫ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                55: '–ñ–∞—Å—ã–ª –±“±—Ä—ã—à —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                56: '–ù—É—Ç —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                57: '–Ø—á–º–µ–Ω—å “õ“±—Å–∞–º–∞—Å—ã —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                58: '–ë–∞–Ω–∞–Ω —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                59: '–¢–≤–æ—Ä–æ–≥ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                60: '–ì—Ä—É—à–∞ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                61: '–ú–∏–Ω–¥–∞–ª—å —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                62: '–ö–µ—à—å—é —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                63: '–¢–∞“£–¥–∞–ª“ì–∞–Ω –∞“ì–∑–∞–º–¥–∞—Ä —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
                64: '–≠–Ω–µ—Ä–≥–∏—è –∂–µ–ª—ñ',
                65: '–õ–∏–º–æ–Ω-–∏–º–±—ñ—Ä —ñ—à—ñ–º–¥—ñ–≥—ñ',
                66: '–Ø–≥–æ–¥–∞ –º–æ—Ä—Å—ã –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç—ã',
                67: '–ñ–∞—Å—ã–ª —à–∞–π –±”©–ª—ñ–Ω—ñ—Å—ñ',
                68: '–ö–∞–∫–∞–æ “±–Ω—Ç–∞“ì—ã',
                69: '“ö“±—Ä“ì–∞“õ —Å“Ø—Ç',
                70: '–ß–µ—Ä–Ω–∏–∫–∞ —Å—É–±–ª–∏–º–∞—Ü–∏—è–ª–∞—É',
            }
        };

        // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø –ü–ï–†–ï–í–ï–î–ï–ù–ù–û–ì–û –ù–ê–ó–í–ê–ù–ò–Ø –ü–†–û–î–£–ö–¢–ê
        function getProductName(product) {
            if (PRODUCT_NAMES[currentLang] && PRODUCT_NAMES[currentLang][product.id]) {
                return PRODUCT_NAMES[currentLang][product.id];
            }
            return product.name;
        }

        // STATE
        let state = {
            step: 1,
            category: null,
            products: [],
            mealType: 'breakfast',
            mealName: '',
            aiModel: 'can_defect',
            cameraStream: null,
            aiResult: null
        };

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        console.log('üìÑ –ù–∞—á–∞–ª–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏');
        console.log('document.readyState:', document.readyState);
        
        function init() {
            try {
                console.log('üöÄ init() –∑–∞–ø—É—â–µ–Ω–∞');
                console.log('state:', state);
                console.log('CATEGORIES:', CATEGORIES);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —è–∑—ã–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
                const savedLang = localStorage.getItem('cosmodiet_lang') || 'ru';
                currentLang = savedLang;
                if (savedLang !== 'ru') {
                    applyLanguage(savedLang);
                }
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å UI
                console.log('‚Üí –í—ã–∑–æ–≤ updateUI()');
                updateUI();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å step titles –∏ subtitles
                const t = TRANSLATIONS[currentLang];
                const stepTitles = {
                    1: { title: t.step1, subtitle: t.step1sub },
                    2: { title: t.step2, subtitle: t.step2sub },
                    3: { title: t.step3, subtitle: t.step3sub },
                    4: { title: t.step4, subtitle: t.step4sub },
                    5: { title: t.step5, subtitle: t.step5sub },
                    6: { title: t.step6, subtitle: t.step6sub }
                };
                
                for (let i = 1; i <= 6; i++) {
                    const stepContent = document.getElementById('step-' + i);
                    if (stepContent) {
                        const stepTitle = stepContent.querySelector('.step-title');
                        const stepSubtitle = stepContent.querySelector('.step-subtitle');
                        
                        if (stepTitle && stepTitles[i]) {
                            stepTitle.textContent = stepTitles[i].title;
                        }
                        if (stepSubtitle && stepTitles[i]) {
                            stepSubtitle.textContent = stepTitles[i].subtitle;
                        }
                    }
                }
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å step labels
                const stepLabels = document.querySelectorAll('.step-label');
                if (stepLabels.length >= 6) {
                    stepLabels[0].textContent = t.stepLabel1;
                    stepLabels[1].textContent = t.stepLabel2;
                    stepLabels[2].textContent = t.stepLabel3;
                    stepLabels[3].textContent = t.stepLabel4;
                    stepLabels[4].textContent = t.stepLabel5;
                    stepLabels[5].textContent = t.stepLabel6;
                }
                
                console.log('‚Üí –í—ã–∑–æ–≤ renderCategories()');
                renderCategories();
                
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.addEventListener('input', filterProducts);
                }
                
                console.log('‚úì –ì–û–¢–û–í–û - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
            } catch(e) {
                console.error('‚ùå –û–®–ò–ë–ö–ê –í init():', e.message);
                console.error('Stack:', e.stack);
            }
        }
        
        // –í—ã–∑–æ–≤–µ–º init –∫–æ–≥–¥–∞ DOM –≥–æ—Ç–æ–≤
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            // DOM —É–∂–µ –≥–æ—Ç–æ–≤
            init();
        }

        function renderCategories() {
            console.log('üé® renderCategories –≤—ã–∑–≤–∞–Ω–∞');
            const grid = document.getElementById('categoryGrid');
            console.log('‚úì categoryGrid –Ω–∞–π–¥–µ–Ω–∞:', !!grid);
            console.log('‚úì CATEGORIES:', Object.keys(CATEGORIES).length, '—ç–ª–µ–º–µ–Ω—Ç–æ–≤');
            
            if (!grid) {
                console.error('‚ùå categoryGrid –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ DOM!');
                return;
            }
            
            try {
                const html = Object.entries(CATEGORIES).map(([key, cat]) => `
                    <button class="card ${state.category === key ? 'selected' : ''}" onclick="selectCategory('${key}')">
                        <div class="card-icon"><i class="fas ${cat.icon}"></i></div>
                        <div class="card-title">${cat.name}</div>
                        <div class="card-desc">${cat.desc}</div>
                    </button>
                `).join('');
                
                grid.innerHTML = html;
                console.log('‚úì –û—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–æ', grid.children.length, '–∫–∞—Ä—Ç–æ—á–µ–∫');
            } catch(e) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ:', e.message);
            }
        }

        function selectCategory(cat) {
            state.category = cat;
            state.products = [];
            state.step = 2;
            updateUI();
            renderProducts();
        }

        function renderProducts() {
            const list = document.getElementById('productsList');
            const noMsg = document.getElementById('noProducts');
            const searchInput = document.getElementById('searchInput');
            
            if (!list || !noMsg || !searchInput) {
                return;
            }
            
            const search = searchInput.value.toLowerCase();

            let filtered = PRODUCTS.filter(p => p.category === state.category);
            if (search) filtered = filtered.filter(p => getProductName(p).toLowerCase().includes(search));

            if (!filtered.length) {
                list.innerHTML = '';
                noMsg.style.display = 'block';
                return;
            }

            noMsg.style.display = 'none';
            list.innerHTML = filtered.map(p => `
                <div class="product-card ${state.products.includes(p.id) ? 'selected' : ''}" onclick="toggleProduct(${p.id})">
                    <div class="checkbox">
                        ${state.products.includes(p.id) ? '<i class="fas fa-check"></i>' : ''}
                    </div>
                    <div class="product-info">
                        <div class="product-name">${getProductName(p)}</div>
                        <div class="product-meta">
                            <span><i class="fas fa-flash" style="margin-right: 4px; color: #00d9ff;"></i>${p.kcal} –∫–∫–∞–ª</span>
                            <span><i class="fas fa-egg" style="margin-right: 4px; color: #00d9ff;"></i>–ë: ${p.protein}–≥</span>
                            <span><i class="fas fa-droplet" style="margin-right: 4px; color: #00d9ff;"></i>–ñ: ${p.fat}–≥</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterProducts() {
            renderProducts();
        }

        function toggleProduct(id) {
            const idx = state.products.indexOf(id);
            if (idx >= 0) state.products.splice(idx, 1);
            else state.products.push(id);
            renderProducts();
        }

        function calculateScore() {
            if (!state.products.length) return 0;
            
            const prods = state.products.map(id => PRODUCTS.find(p => p.id === id)).filter(Boolean);
            if (!prods.length) return 0;

            let score = 40;

            // –ö–ê–õ–û–†–ò–ò: –æ—Ü–µ–Ω–∫–∞ –±–µ–∑ —à—Ç—Ä–∞—Ñ–æ–≤
            const totalKcal = prods.reduce((s, p) => s + p.kcal, 0);
            if (totalKcal >= 300 && totalKcal <= 700) score += 25;
            else if (totalKcal >= 200 && totalKcal < 300) score += 15;
            else if (totalKcal >= 700 && totalKcal <= 1200) score += 18;

            // –ë–ï–õ–ö–ò: —á–µ–º –±–æ–ª—å—à–µ - —Ç–µ–º –ª—É—á—à–µ
            const totalProtein = prods.reduce((s, p) => s + p.protein, 0);
            if (totalProtein >= 20 && totalProtein <= 70) score += 20;
            else if (totalProtein >= 10 && totalProtein < 20) score += 10;
            else if (totalProtein > 70) score += 15;

            // –ñ–ò–†–´: —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å
            const totalFat = prods.reduce((s, p) => s + p.fat, 0);
            if (totalFat >= 5 && totalFat <= 50) score += 10;
            else if (totalFat > 50) score += 5;

            // –£–ì–õ–ï–í–û–î–´: –Ω—É–∂–Ω—ã —ç–Ω–µ—Ä–≥–∏—è
            const totalCarbs = prods.reduce((s, p) => s + p.carbs, 0);
            if (totalCarbs >= 30 && totalCarbs <= 150) score += 10;
            else if (totalCarbs > 150) score += 5;

            // –ù–ê–¢–†–ò–ô: –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–æ –±–µ–∑ —à—Ç—Ä–∞—Ñ–æ–≤
            const avgSodium = prods.reduce((s, p) => s + p.sodium, 0) / prods.length;
            if (avgSodium < 250) score += 8;
            else if (avgSodium >= 250 && avgSodium <= 400) score += 10;
            else if (avgSodium > 400) score += 5;

            return Math.min(100, Math.max(0, score));
        }

        function updateStep4() {
            const t = TRANSLATIONS[currentLang];
            const prods = state.products.map(id => PRODUCTS.find(p => p.id === id));
            const kcal = prods.reduce((s, p) => s + p.kcal, 0);
            const protein = prods.reduce((s, p) => s + p.protein, 0);
            const fat = prods.reduce((s, p) => s + p.fat, 0);
            const carbs = prods.reduce((s, p) => s + p.carbs, 0);

            document.getElementById('nutritionGrid').innerHTML = `
                <div class="nutrition-card">
                    <div class="nutrition-label">${t.macroEnergy}</div>
                    <div class="nutrition-value">${kcal}</div>
                    <div style="font-size: 0.7rem; color: rgba(224,231,255,0.5);">${t.kcal}</div>
                </div>
                <div class="nutrition-card">
                    <div class="nutrition-label">${t.macroProtein}</div>
                    <div class="nutrition-value">${protein}</div>
                    <div style="font-size: 0.7rem;">${t.grams}</div>
                </div>
                <div class="nutrition-card">
                    <div class="nutrition-label">${t.macroFat}</div>
                    <div class="nutrition-value">${fat}</div>
                    <div style="font-size: 0.7rem;">${t.grams}</div>
                </div>
                <div class="nutrition-card">
                    <div class="nutrition-label">${t.macroCarbs}</div>
                    <div class="nutrition-value">${carbs}</div>
                    <div style="font-size: 0.7rem;">${t.grams}</div>
                </div>
            `;

            const score = calculateScore();
            const totalKcal = prods.reduce((s, p) => s + p.kcal, 0);
            const totalProtein = prods.reduce((s, p) => s + p.protein, 0);
            const totalFat = prods.reduce((s, p) => s + p.fat, 0);
            const totalCarbs = prods.reduce((s, p) => s + p.carbs, 0);

            let text, description, warning = '', recommendation = '';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ª–æ—Ä–∏–π
            if (totalKcal > 1200) {
                warning = t.highCalories + '<br>';
                recommendation = t.recommendRemoveHighEnergy + '<br>';
                text = t.caloriesExceeded;
                description = t.tooManyCalories;
            } else if (totalKcal < 200) {
                warning = t.lowEnergy2 + '<br>';
                recommendation = t.recommendAddEnergy + '<br>';
                text = t.lowEnergy;
                description = t.needMoreCalories;
            } else if (totalProtein < 15) {
                warning = t.lowProtein2 + '<br>';
                recommendation = t.recommendAddProtein + '<br>';
                text = t.lowProtein;
                description = t.insufficientProtein;
            } else {
                // –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                if (score >= 85) {
                    text = t.excellentDiet;
                    description = t.perfectlyBalanced;
                } else if (score >= 75) {
                    text = t.goodDiet;
                    description = t.goodRatio;
                } else if (score >= 65) {
                    text = t.acceptableDiet;
                    description = t.canImprove;
                    recommendation = t.recommendDiversity + '<br>';
                } else if (score >= 55) {
                    text = t.weakDiet;
                    description = t.needsImprovement;
                    recommendation = t.recommendBalance + '<br>';
                } else {
                    text = t.inadequateDiet;
                    description = t.needsReview;
                    recommendation = t.recommendReview + '<br>';
                }
            }

            document.getElementById('scoreNumber').textContent = score;
            document.getElementById('scoreText').textContent = text;
            document.getElementById('scoreTips').innerHTML = `
                <strong>${warning}${description}</strong><br><br>
                ${recommendation}
                <strong style="color: #00d9ff;">${t.composition}</strong> ${t.macroEnergy}: ${totalKcal}${t.kcal} | ${t.macroProtein}: ${totalProtein}${t.grams} | ${t.macroFat}: ${totalFat}${t.grams} | ${t.macroCarbs}: ${totalCarbs}${t.grams}<br>
                <small style="opacity:0.7;">${t.analysisFormula}</small>
            `;
            document.getElementById('selectedList').innerHTML = prods.map(p => `
                <div style="padding: 12px; background: rgba(0,217,255,0.05); border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #00d9ff;">
                    <strong>${getProductName(p)}</strong><br>
                    <span style="font-size: 0.8rem; color: rgba(224,231,255,0.6);">${p.kcal} ${t.kcal} ‚Ä¢ ${t.macroProtein}: ${p.protein}${t.grams}</span>
                </div>
            `).join('');
        }

        function updateStep6() {
            const prods = state.products.map(id => PRODUCTS.find(p => p.id === id));
            const kcal = prods.reduce((s, p) => s + p.kcal, 0);
            const protein = prods.reduce((s, p) => s + p.protein, 0);
            const fat = prods.reduce((s, p) => s + p.fat, 0);
            const carbs = prods.reduce((s, p) => s + p.carbs, 0);

            document.getElementById('finalNutrition').innerHTML = `
                <div class="nutrition-card">
                    <div class="nutrition-label">–≠–Ω–µ—Ä–≥–∏—è</div>
                    <div class="nutrition-value">${kcal}</div>
                    <span>–∫–∫–∞–ª</span>
                </div>
                <div class="nutrition-card">
                    <div class="nutrition-label">–ë–µ–ª–∫–∏</div>
                    <div class="nutrition-value">${protein}</div>
                    <span>–≥</span>
                </div>
                <div class="nutrition-card">
                    <div class="nutrition-label">–ñ–∏—Ä—ã</div>
                    <div class="nutrition-value">${fat}</div>
                    <span>–≥</span>
                </div>
                <div class="nutrition-card">
                    <div class="nutrition-label">–£–≥–ª–µ–≤–æ–¥—ã</div>
                    <div class="nutrition-value">${carbs}</div>
                    <span>–≥</span>
                </div>
            `;
        }

        function switchTab(tab) {
            document.querySelectorAll('[id$="-tab"]').forEach(el => el.classList.remove('active'));
            document.getElementById(tab + '-tab').classList.add('active');
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
        }

        function switchModel(model) {
            state.aiModel = model;
            document.querySelectorAll('.tabs .tab').forEach(el => el.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
        }

        let detectionRunning = false;
        let detectionInterval = null;

        function selectDetectionModel(model) {
            console.log(`üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –º–æ–¥–µ–ª—å: ${model}`);
            state.aiModel = model;
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∞—Å—Å—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            document.querySelectorAll('.quality-model-card').forEach(card => {
                card.classList.remove('active');
            });
            const modelCard = document.getElementById('model-' + model);
            if (modelCard) {
                modelCard.classList.add('active');
                console.log(`‚úì –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞: model-${model}`);
            } else {
                console.error(`‚ùå –ö–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: model-${model}`);
            }
        }

        function openCamera() {
            if (detectionRunning) {
                console.warn('‚ö† –ö–∞–º–µ—Ä–∞ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞');
                return;
            }
            
            console.log('üé• –û—Ç–∫—Ä—ã–≤–∞—é –∫–∞–º–µ—Ä—É...');
            detectionRunning = true;
            document.getElementById('cameraStartBtn').disabled = true;
            document.getElementById('cameraStopBtn').disabled = false;
            
            const video = document.getElementById('cameraVideo');
            const canvas = document.getElementById('detectionCanvas');
            
            if (!canvas) {
                console.error('‚ùå Canvas –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM');
                detectionRunning = false;
                document.getElementById('cameraStartBtn').disabled = false;
                document.getElementById('cameraStopBtn').disabled = true;
                return;
            }
            
            navigator.mediaDevices.getUserMedia({ 
                video: { width: { ideal: 640 }, height: { ideal: 480 }, facingMode: 'user' },
                audio: false 
            })
                .then(stream => {
                    console.log('‚úì –ü–æ—Ç–æ–∫ –∫–∞–º–µ—Ä—ã –ø–æ–ª—É—á–µ–Ω');
                    state.cameraStream = stream;
                    video.srcObject = stream;
                    video.style.display = 'none';
                    canvas.style.display = 'block';
                    
                    video.onloadedmetadata = () => {
                        console.log(`‚úì –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ, —Ä–∞–∑–º–µ—Ä: ${video.videoWidth}x${video.videoHeight}`);
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        console.log(`‚úì Canvas —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ${canvas.width}x${canvas.height}`);
                        video.play();
                        console.log('‚úì –í–∏–¥–µ–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è');
                        startContinuousDetection();
                    };
                    
                    video.onerror = (err) => {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –≤–∏–¥–µ–æ:', err);
                    };
                })
                .catch(err => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã:', err);
                    alert('–û—à–∏–±–∫–∞ –∫–∞–º–µ—Ä—ã: ' + err.message);
                    detectionRunning = false;
                    document.getElementById('cameraStartBtn').disabled = false;
                    document.getElementById('cameraStopBtn').disabled = true;
                });
        }

        function startContinuousDetection() {
            console.log('üéØ –ó–∞–ø—É—Å–∫–∞—é –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –¥–µ—Ç–µ–∫—Ü–∏—é...');
            document.getElementById('detectionResult').innerHTML = '<p style="color: #00d9ff;">‚è≥ –ö–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞. –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –ø—Ä–æ–¥—É–∫—Ç—ã...</p>';
            
            let frameCount = 0;
            
            detectionInterval = setInterval(() => {
                if (!detectionRunning) {
                    console.log('‚è∏ –î–µ—Ç–µ–∫—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
                    return;
                }
                
                frameCount++;
                const video = document.getElementById('cameraVideo');
                const canvas = document.getElementById('detectionCanvas');
                
                if (!video || !canvas) {
                    console.error(`‚ùå –í–∏–¥–µ–æ –∏–ª–∏ canvas –Ω–µ –Ω–∞–π–¥–µ–Ω—ã: video=${!!video}, canvas=${!!canvas}`);
                    return;
                }
                
                const ctx = canvas.getContext('2d');
                if (!ctx) {
                    console.error('‚ùå Context 2D –Ω–µ –ø–æ–ª—É—á–µ–Ω');
                    return;
                }
                
                try {
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                } catch (drawErr) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏–∏ –≤–∏–¥–µ–æ –Ω–∞ canvas:', drawErr);
                    return;
                }
                
                // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º canvas –≤ base64
                const imageData = canvas.toDataURL('image/jpeg', 0.8);
                const model = state.aiModel || 'can_defect';
                
                if (frameCount % 5 === 0) {  // –õ–æ–≥–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π 5-–π –∫–∞–¥—Ä —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å
                    console.log(`üéØ –ö–∞–¥—Ä ${frameCount}: –æ—Ç–ø—Ä–∞–≤–ª—è—é –¥–µ—Ç–µ–∫—Ü–∏—é (${model}), —Ä–∞–∑–º–µ—Ä=${imageData.length} —Å–∏–º–≤–æ–ª–æ–≤`);
                }
                
                fetch('/api/detect', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        image: imageData,
                        model: model
                    })
                })
                    .then(r => {
                        if (frameCount % 5 === 0) {
                            console.log(`üì° –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: —Å—Ç–∞—Ç—É—Å=${r.status}`);
                        }
                        if (!r.ok) {
                            throw new Error(`HTTP ${r.status}`);
                        }
                        return r.json();
                    })
                    .then(data => {
                        if (frameCount % 5 === 0) {
                            console.log(`‚úì –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞:`, {
                                model: data.model,
                                detections_count: data.detections?.length || 0,
                                has_image: !!data.annotated_image
                            });
                        }
                        
                        // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ –æ—Ç–≤–µ—Ç–µ
                        if (data.error) {
                            console.error('‚ùå –û—à–∏–±–∫–∞ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞:', data.error);
                            if (frameCount % 10 === 0) {
                                document.getElementById('detectionResult').innerHTML = 
                                    `<p style="color: #ff4444;">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${data.error}</p>`;
                            }
                            return;
                        }
                        
                        state.aiResult = data;
                        
                        // –ï—Å–ª–∏ –µ—Å—Ç—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –≤—ã–≤–æ–¥–∏–º –µ–≥–æ
                        if (data.annotated_image) {
                            const img = new Image();
                            img.onload = () => {
                                if (detectionRunning) {
                                    ctx.drawImage(img, 0, 0);
                                    if (frameCount % 5 === 0) {
                                        console.log('‚úì –ê–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ');
                                    }
                                }
                            };
                            img.onerror = (err) => {
                                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', err);
                            };
                            img.src = data.annotated_image;
                        }
                        
                        updateDetectionText(data);
                    })
                    .catch(err => {
                        console.error('‚ùå –û—à–∏–±–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏:', err);
                        if (frameCount % 10 === 0) {
                            document.getElementById('detectionResult').innerHTML = 
                                `<p style="color: #ff4444;">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${err.message}</p>`;
                        }
                    });
            }, 500);
            
            console.log('‚úì –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–µ—Ç–µ–∫—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 500–º—Å');
        }

        function drawDetections(data, canvas) {
            const ctx = canvas.getContext('2d');
            
            if (!data || !data.detections || !Array.isArray(data.detections)) return;
            
            const colors = ['#00d9ff', '#9d4edd', '#ff006e', '#ffbe0b'];
            
            data.detections.forEach((det, i) => {
                if (!det.box) return;
                
                const [x1, y1, x2, y2] = det.box;
                const width = x2 - x1;
                const height = y2 - y1;
                const color = colors[i % colors.length];
                
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.strokeRect(x1, y1, width, height);
                
                ctx.fillStyle = color;
                ctx.font = 'bold 12px Arial';
                const text = `${det.class} ${(det.confidence * 100).toFixed(0)}%`;
                const textWidth = ctx.measureText(text).width;
                ctx.fillRect(x1, y1 - 20, textWidth + 4, 18);
                ctx.fillStyle = '#000';
                ctx.fillText(text, x1 + 2, y1 - 5);
            });
        }

        function updateDetectionText(data) {
            const modelIcon = state.aiModel === 'can_defect' ? '<i class="fas fa-bottle" style="color: #00d9ff; margin-right: 8px;"></i>' : '<i class="fas fa-biohazard" style="color: #9d4edd; margin-right: 8px;"></i>';
            const modelName = state.aiModel === 'can_defect' ? '–î–µ—Ñ–µ–∫—Ç—ã –±–∞–Ω–æ–∫' : '–ü–ª–µ—Å–µ–Ω—å –∏ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è';
            
            let html = `<p style="color: #00d9ff; margin-bottom: 15px; font-weight: 600; font-size: 1.05rem;">${modelIcon}${modelName}</p>`;
            
            if (data && data.detections && data.detections.length > 0) {
                html += `<div style="color: #ffaa22; font-weight: 600; margin-bottom: 15px;"><strong><i class="fas fa-crosshairs" style="margin-right: 6px;"></i>–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: ${data.detections.length}</strong></div>`;
                const uniqueClasses = [...new Set(data.detections.map(d => d.class))];
                uniqueClasses.forEach(cls => {
                    const items = data.detections.filter(d => d.class === cls);
                    const count = items.length;
                    const avgConf = (items.reduce((s, d) => s + d.confidence, 0) / count * 100).toFixed(0);
                    const maxConf = (Math.max(...items.map(d => d.confidence)) * 100).toFixed(0);
                    html += `<div style="padding: 12px; background: linear-gradient(135deg, rgba(255,170,34,0.15), rgba(255,170,34,0.05)); margin-bottom: 10px; border-left: 4px solid #ffaa22; border-radius: 8px;">
                        <strong style="color: #ffaa22;">${cls}</strong><br>
                        <small style="color: rgba(224,231,255,0.7);">–ù–∞–π–¥–µ–Ω–æ: ${count} | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: ${avgConf}% (–º–∞–∫—Å ${maxConf}%)</small>
                    </div>`;
                });
            } else {
                html += '<p style="color: #00ff00; font-weight: 600;"><strong><i class="fas fa-check-circle" style="margin-right: 6px;"></i>–û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω</strong></p><small style="color: rgba(224,231,255,0.5);">–ò–∑–¥–µ–ª–∏–µ –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏</small>';
            }
            
            document.getElementById('detectionResult').innerHTML = html;
        }

        function closeCamera() {
            detectionRunning = false;
            if (detectionInterval) clearInterval(detectionInterval);
            if (state.cameraStream) {
                state.cameraStream.getTracks().forEach(t => t.stop());
            }
            document.getElementById('cameraVideo').style.display = 'none';
            document.getElementById('detectionCanvas').style.display = 'block';
            document.getElementById('cameraStartBtn').disabled = false;
            document.getElementById('cameraStopBtn').disabled = true;
            document.getElementById('detectionResult').innerHTML = '<p style="color: rgba(224,231,255,0.6);">‚úì –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å"</p>';
        }

        function setMealType(type) {
            state.mealType = type;
            document.querySelectorAll('#step-6 .tabs .tab').forEach(el => el.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
        }

        function nextStep() {
            if (state.step === 1 && !state.category) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é');
                return;
            }
            if (state.step === 2 && !state.products.length) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç');
                return;
            }
            if (state.step === 3) updateStep4();
            if (state.step === 6) {
                state.mealName = document.getElementById('mealName').value || '–†–∞—Ü–∏–æ–Ω ' + new Date().toLocaleDateString();
                updateStep6();
                saveMeal();
                return;
            }

            state.step++;
            updateUI();
        }

        function prevStep() {
            state.step--;
            updateUI();
        }

        function updateUI() {
            try {
                // –°–∫—Ä—ã—Ç—å –≤—Å–µ —à–∞–≥–∏
                document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
                
                // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–≥
                const currentStep = document.getElementById('step-' + state.step);
                if (currentStep) {
                    currentStep.classList.add('active');
                } else {
                    console.warn('‚ö†Ô∏è –®–∞–≥ step-' + state.step + ' –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM');
                }

                // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
                for (let i = 1; i <= 6; i++) {
                    const circle = document.getElementById('circle-' + i);
                    if (circle) {
                        circle.classList.remove('active', 'completed');
                        if (i < state.step) circle.classList.add('completed');
                        if (i === state.step) circle.classList.add('active');
                    }
                }

                // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
                const progress = ((state.step - 1) / 5) * 100;
                const progressBar = document.getElementById('progressBar');
                if (progressBar) {
                    progressBar.style.width = progress + '%';
                }

                // –ö–Ω–æ–ø–∫–∏
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const t = TRANSLATIONS[currentLang];
                if (prevBtn) prevBtn.style.display = state.step > 1 ? 'block' : 'none';
                if (nextBtn) nextBtn.innerHTML = state.step === 6 ? 
                    '<i class="fas fa-save"></i> ' + t.save : '<i class="fas fa-arrow-right"></i> ' + t.next;
            } catch(e) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ updateUI():', e.message);
            }
        }

        function saveMeal() {
            // –í—ã—á–∏—Å–ª—è–µ–º –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
            const prods = state.products.map(id => PRODUCTS.find(p => p.id === id));
            const kcal = prods.reduce((s, p) => s + p.kcal, 0);
            const protein = prods.reduce((s, p) => s + p.protein, 0);
            const fat = prods.reduce((s, p) => s + p.fat, 0);
            const carbs = prods.reduce((s, p) => s + p.carbs, 0);
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –æ–Ω –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            const currentUser = JSON.parse(localStorage.getItem('cosmodiet_user')) || { id: 'guest', name: '–ì–æ—Å—Ç—å' };
            
            const meal = {
                id: Date.now(),
                userId: currentUser.id,
                name: state.mealName,
                type: state.mealType,
                category: state.category,
                products: state.products.map(id => PRODUCTS.find(p => p.id === id)),
                score: calculateScore(),
                calories: Math.round(kcal),
                protein: Math.round(protein * 10) / 10,
                fat: Math.round(fat * 10) / 10,
                carbs: Math.round(carbs * 10) / 10,
                date: new Date().toLocaleString('ru-RU')
            };

            let meals = JSON.parse(localStorage.getItem('cosmodiet_history') || '[]');
            meals.push(meal);
            localStorage.setItem('cosmodiet_history', JSON.stringify(meals));

            alert('–†–∞—Ü–∏–æ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω: ' + state.mealName);
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
