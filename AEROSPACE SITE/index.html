<!DOCTYPE html>

<html lang="ru">

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>CosmoDiet — Персонализированное питание для космоса</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <style>
        :root {

            /* Темная тема */

            --dark-bg: #0a0e17;

            --dark-card: rgba(16, 23, 41, 0.8);

            --dark-text: #e0e7ff;

            --dark-accent: #00d9ff;

            --dark-accent2: #9d4edd;

            --dark-gradient: linear-gradient(135deg, #0a0e17 0%, #1a1f3c 50%, #0d152e 100%);



            /* Светлая тема */

            --light-bg: #f4f7ff;

            --light-card: rgba(255, 255, 255, 0.9);

            --light-text: #0b1220;

            --light-accent: #0b5bff;

            --light-accent2: #7b3dff;

            --light-gradient:

                radial-gradient(1200px 800px at 10% -10%, rgba(224, 235, 255, 0.9) 0%, rgba(224, 235, 255, 0) 60%),

                radial-gradient(900px 700px at 90% 10%, rgba(214, 230, 255, 0.8) 0%, rgba(214, 230, 255, 0) 60%),

                linear-gradient(135deg, #f7f9ff 0%, #e9efff 50%, #dfe7ff 100%);



            /* Общие */

            --primary-font: 'Exo 2', Arial, sans-serif;
            --heading-font: 'Orbitron', sans-serif;

            --glow: 0 0 15px rgba(0, 217, 255, 0.7);

            --transition: all 0.3s ease;

            --border-radius: 12px;

            --glass: rgba(255, 255, 255, 0.05);

            --glass-border: rgba(255, 255, 255, 0.1);

            --shadow-raise: 0 15px 30px rgba(0, 0, 0, 0.3);

            --shadow-raise-light: 0 18px 40px rgba(16, 31, 70, 0.14);

            --shadow-soft-light: 0 12px 30px rgba(16, 31, 70, 0.08);

        }

        /* Fallback иконок если Font Awesome не загружается */

        i[class*="fas"] {

            font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', cursive;

            font-weight: 900;

            -webkit-font-smoothing: antialiased;

            -moz-osx-font-smoothing: grayscale;

        }



        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

        }



        body {

            font-family: var(--primary-font);

            background: var(--dark-gradient);

            color: var(--dark-text);

            line-height: 1.6;

            overflow-x: hidden;

            transition: var(--transition);

            position: relative;

        }



        body.light-theme {

            background: var(--light-gradient);

            color: var(--light-text);

            --glass: rgba(0, 0, 0, 0.04);

            --glass-border: rgba(0, 0, 0, 0.12);

            --glow: 0 0 20px rgba(27, 91, 255, 0.35);

        }



        body.light-theme::before,

        body.light-theme::after {

            content: '';

            position: fixed;

            inset: -20%;

            z-index: -1;

            pointer-events: none;

            background:

                radial-gradient(500px 400px at 12% 18%, rgba(40, 110, 255, 0.18), transparent 60%),

                radial-gradient(600px 500px at 90% 12%, rgba(140, 90, 255, 0.2), transparent 65%),

                radial-gradient(700px 600px at 50% 85%, rgba(10, 190, 255, 0.12), transparent 70%);

            filter: blur(10px);

        }



        body.light-theme::after {

            opacity: 0.6;

            background:

                radial-gradient(450px 360px at 25% 75%, rgba(120, 80, 255, 0.16), transparent 65%),

                radial-gradient(520px 420px at 75% 65%, rgba(20, 140, 255, 0.14), transparent 70%);

        }



        h1,
        h2,
        h3,
        h4 {

            font-family: var(--heading-font);

            font-weight: 700;

            margin-bottom: 1rem;

        }



        h1 {

            font-size: 3.5rem;

            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));

            -webkit-background-clip: text;

            background-clip: text;

            color: transparent;

            line-height: 1.2;

        }



        .light-theme h1 {

            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2), #12b8ff);

            -webkit-background-clip: text;

            background-clip: text;

            -webkit-text-fill-color: transparent;

        }



        h2 {

            font-size: 2.5rem;

            margin-bottom: 2rem;

            text-align: center;

        }



        p {

            margin-bottom: 1.5rem;

            font-size: 1.1rem;

        }



        .container {

            width: 100%;

            max-width: 1200px;

            margin: 0 auto;

            padding: 0 20px;

        }



        section {

            padding: 100px 0;

        }



        .light-theme section {

            border-top: 1px solid rgba(27, 91, 255, 0.05);

        }



        .light-theme section:first-of-type {

            border-top: none;

        }



        .btn {

            display: inline-block;

            padding: 15px 30px;

            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));

            color: white;

            border: none;

            border-radius: 50px;

            font-family: var(--heading-font);

            font-weight: 500;

            text-decoration: none;

            cursor: pointer;

            transition: var(--transition);

            text-transform: uppercase;

            letter-spacing: 1px;

            box-shadow: var(--glow);

            position: relative;

            overflow: hidden;

            z-index: 1;

        }



        .btn:hover {

            transform: translateY(-3px);

            box-shadow: 0 0 25px rgba(0, 217, 255, 0.9);

        }



        .light-theme .btn {

            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2));

            box-shadow: 0 0 15px rgba(0, 102, 204, 0.5);

        }



        .light-theme .btn:hover {

            box-shadow: 0 0 25px rgba(0, 102, 204, 0.8);

        }



        .btn-outline {

            background: rgba(10, 20, 45, 0.7);

            border: 2px solid rgba(0, 217, 255, 0.25);

            color: #00d9ff;

            box-shadow: none;

            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);

            position: relative;

            overflow: hidden;

            font-weight: 600;

        }

        .btn-outline::before {

            content: '';

            position: absolute;

            left: -100%;

            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.2), transparent);

            height: 100%;

            width: 100%;

            transition: left 0.5s ease;

            pointer-events: none;

        }

        .btn-outline:hover::before {

            left: 100%;

        }

        .btn.btn-outline {

            box-shadow: none;

            padding: 12px 24px;

        }



        .btn-outline:hover {

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(123, 61, 255, 0.15));

            border-color: rgba(0, 217, 255, 0.6);

            box-shadow: 0 8px 20px rgba(0, 217, 255, 0.25), inset 0 0 10px rgba(0, 217, 255, 0.08);

            transform: translateY(-2px);

        }



        .light-theme .btn-outline:hover {

            box-shadow: 0 0 25px rgba(27, 91, 255, 0.35);

        }



        .light-theme .btn-outline {

            background: rgba(255, 255, 255, 0.9);

            border-color: rgba(31, 107, 255, 0.3);

            color: #0b5bff;

        }



        .light-theme .btn-outline:hover {

            background: linear-gradient(135deg, rgba(31, 107, 255, 0.15), rgba(123, 61, 255, 0.1));

            border-color: rgba(31, 107, 255, 0.5);

            box-shadow: 0 8px 20px rgba(31, 107, 255, 0.2), inset 0 0 10px rgba(31, 107, 255, 0.05);

            transform: translateY(-2px);

        }



        /* Шапка */



        /* Улучшенная шапка */

        header {

            position: fixed;

            top: 0;

            left: 0;

            width: 100%;

            z-index: 1000;

            padding: 12px 0;

            transition: var(--transition);

            backdrop-filter: blur(15px);

            background: rgba(10, 14, 23, 0.95);

            border-bottom: 1px solid var(--glass-border);

            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);

        }



        header.scrolled {

            padding: 10px 0;

            background: rgba(10, 14, 23, 0.98);

            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);

        }



        .light-theme header {

            background: rgba(248, 249, 255, 0.95);

            border-bottom: 1px solid rgba(0, 0, 0, 0.1);

            box-shadow: var(--shadow-soft-light);

        }



        .light-theme header.scrolled {

            background: rgba(255, 255, 255, 0.98);

            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);

        }



        .header-container {

            display: grid;

            grid-template-columns: auto 1fr auto;

            align-items: center;

            gap: 24px;

        }



        .logo {

            font-family: var(--heading-font);

            font-size: 2rem;

            font-weight: 900;

            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));

            -webkit-background-clip: text;

            background-clip: text;

            -webkit-text-fill-color: transparent;

            color: transparent;

            display: flex;

            align-items: center;

            gap: 12px;

            text-decoration: none;

            transition: var(--transition);

            letter-spacing: 1px;

        }



        .logo:hover {

            transform: translateY(-1px) scale(1.05);

            filter: drop-shadow(0 10px 24px rgba(0, 217, 255, 0.55));

        }



        .light-theme .logo:hover {

            filter: drop-shadow(0 10px 24px rgba(11, 91, 255, 0.55));

        }



        .light-theme .logo {

            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2), #12b8ff);

            -webkit-background-clip: text;

            background-clip: text;

            -webkit-text-fill-color: transparent;

            color: transparent;

        }



        .logo i {

            font-size: 2.2rem;

            animation: pulse 2s infinite;

        }



        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

        }



        nav ul {

            display: flex;

            list-style: none;

            gap: 24px;

            margin: 0;

            padding: 0;

            justify-content: center;

            flex-wrap: wrap;

        }



        nav a {

            color: var(--dark-text);

            text-decoration: none;

            font-weight: 800;

            position: relative;

            padding: 8px 0;

            transition: var(--transition);

            font-size: 0.80rem;

            letter-spacing: 0.5px;

            white-space: nowrap;

            font-family: var(--heading-font);

            text-transform: uppercase;

        }



        .light-theme nav a {

            color: #0b5bff;

        }

        .light-theme nav a:hover {

            color: #0b5bff;

            text-shadow: 0 0 8px rgba(31, 107, 255, 0.3);

        }



        nav a::before {

            content: '';

            position: absolute;

            width: 0;

            height: 2px;

            bottom: 0;

            left: 50%;

            transform: translateX(-50%);

            background: var(--dark-accent);

            transition: var(--transition);

        }



        .light-theme nav a::before {

            background: var(--light-accent);

        }



        nav a:hover::before {

            width: 100%;

        }



        nav a:hover {

            color: var(--dark-accent);

        }



        .light-theme nav a:hover {

            color: var(--light-accent);

        }



        nav a.active {

            color: var(--dark-accent);

        }



        .light-theme nav a.active {

            color: var(--light-accent);

        }



        .header-controls {

            display: flex;

            align-items: center;

            gap: 14px;

        }



        .theme-toggle,
        .language-toggle,
        .auth-btn {

            background: transparent;

            border: 1px solid var(--glass-border);

            color: var(--dark-text);

            width: 40px;

            height: 40px;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            cursor: pointer;

            transition: var(--transition);

            position: relative;

            overflow: hidden;

        }

        .auth-btn.full {

            width: auto;

            border-radius: 25px;

            padding: 0 16px 0 44px;

            gap: 6px;

            display: flex;

            align-items: center;

            justify-content: center;

            height: 40px;

            border: 2px solid rgba(0, 217, 255, 0.25);

            background: rgba(10, 20, 45, 0.7);

            color: #00d9ff;

            font-weight: 700;

            position: relative;

            overflow: hidden;

        }

        .auth-btn.full span {

            display: inline-block;

            font-size: 0.9rem;

            letter-spacing: 0.3px;

            font-family: var(--heading-font);

            font-weight: 800;

            text-transform: uppercase;

            line-height: 1;

            margin: 0;

            padding: 0;

        }

        .auth-btn.full i,
        .auth-btn.full .api-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            width: 16px;
            height: 16px;
            min-width: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            object-fit: contain;
            transform: translateY(-50%);
        }


        .theme-toggle::before,
        .language-toggle::before,
        .auth-btn::before {

            content: '';

            position: absolute;

            top: 0;

            left: -100%;

            width: 100%;

            height: 100%;

            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);

            transition: 0.5s;

        }



        .theme-toggle:hover::before,
        .language-toggle:hover::before,
        .auth-btn:hover::before {

            left: 100%;

        }



        .theme-toggle:hover,
        .language-toggle:hover,
        .auth-btn:hover {

            background: var(--glass);

            transform: translateY(-3px);

            box-shadow: var(--glow);

            border-color: var(--dark-accent);

        }



        .light-theme .theme-toggle,
        .light-theme .language-toggle,
        .light-theme .auth-btn {

            border-color: rgba(0, 0, 0, 0.1);

            color: var(--light-text);

        }



        .light-theme .theme-toggle:hover,
        .light-theme .language-toggle:hover,
        .light-theme .auth-btn:hover {

            border-color: var(--light-accent);

        }



        .auth-btn.full {

            width: auto;

            padding: 8px 16px 8px 36px;

            gap: 8px;

            border-radius: 25px;

            border: 2px solid rgba(0, 217, 255, 0.25);

        }

        .auth-btn.full:hover {

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(123, 61, 255, 0.15));

            border-color: rgba(0, 217, 255, 0.6);

            color: #00d9ff;

            box-shadow: 0 8px 20px rgba(0, 217, 255, 0.25), inset 0 0 10px rgba(0, 217, 255, 0.08);

            transform: translateY(-3px);

        }

        .light-theme .auth-btn.full {

            background: rgba(255, 255, 255, 0.9);

            border-color: rgba(31, 107, 255, 0.3);

            color: #0b5bff;

        }

        .light-theme .auth-btn.full:hover {

            background: linear-gradient(135deg, rgba(31, 107, 255, 0.15), rgba(123, 61, 255, 0.1));

            border-color: rgba(31, 107, 255, 0.5);

            color: #0b5bff;

            box-shadow: 0 8px 20px rgba(31, 107, 255, 0.2), inset 0 0 10px rgba(31, 107, 255, 0.05);

        }



        .auth-btn.full span {

            display: inline-block;

            font-size: 0.95rem;

            font-family: var(--heading-font);

            font-weight: 800;

            text-transform: uppercase;

            letter-spacing: 0.3px;

            margin: 0;

            padding: 0;

        }



        .mobile-menu-btn {

            display: none;

            background: transparent;

            border: 1px solid var(--glass-border);

            color: var(--dark-text);

            width: 45px;

            height: 45px;

            border-radius: 50%;

            align-items: center;

            justify-content: center;

            cursor: pointer;

            transition: var(--transition);

        }



        .light-theme .mobile-menu-btn {

            color: var(--light-text);

            border-color: rgba(0, 0, 0, 0.1);

        }



        .mobile-menu-btn:hover {

            background: var(--glass);

            border-color: var(--dark-accent);

        }



        .light-theme .mobile-menu-btn:hover {

            border-color: var(--light-accent);

        }



        .mobile-menu {

            position: fixed;

            top: 90px;

            left: 0;

            width: 100%;

            background: rgba(10, 14, 23, 0.98);

            backdrop-filter: blur(20px);

            padding: 30px;

            display: none;

            z-index: 999;

            border-top: 1px solid var(--glass-border);

            border-bottom: 1px solid var(--glass-border);

            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);

            animation: slideDown 0.3s ease;

        }



        @keyframes slideDown {

            from {

                opacity: 0;

                transform: translateY(-20px);

            }

            to {

                opacity: 1;

                transform: translateY(0);

            }

        }



        .light-theme .mobile-menu {

            background: rgba(255, 255, 255, 0.98);

            border-color: rgba(0, 0, 0, 0.1);

        }



        .mobile-menu.active {

            display: block;

        }



        .mobile-menu ul {

            flex-direction: column;

            gap: 20px;

        }



        .mobile-menu a {

            display: block;

            padding: 15px 0;

            font-size: 1.3rem;

            border-bottom: 1px solid var(--glass-border);

            transition: var(--transition);

        }



        .mobile-menu a:hover {

            color: var(--dark-accent);

            padding-left: 15px;

        }



        .light-theme .mobile-menu a:hover {

            color: var(--light-accent);

        }



        .mobile-menu a:last-child {

            border-bottom: none;

        }



        /* Адаптивность шапки */

        @media (max-width: 992px) {

            nav ul {

                gap: 25px;

            }



            .logo {

                font-size: 1.8rem;

            }



            .logo i {

                font-size: 2rem;

            }

        }



        @media (max-width: 768px) {

            .header-controls {

                gap: 15px;

            }



            nav ul {

                display: none;

            }



            .mobile-menu-btn {

                display: flex;

            }



            .auth-btn.full span {

                display: none;

            }



            .auth-btn.full {

                width: 40px;

                padding: 0;

            }

        }



        @media (max-width: 576px) {

            .logo {

                font-size: 1.5rem;

            }



            .logo i {

                font-size: 1.8rem;

            }



            .header-controls {

                gap: 10px;

            }



            .theme-toggle,
            .language-toggle,
            .auth-btn {

                width: 40px;

                height: 40px;

            }

        }









        /* Hero блок */

        .hero {

            padding-top: 180px;

            min-height: 100vh;

            display: flex;

            align-items: center;

            position: relative;

            overflow: hidden;

        }



        .hero-bg {

            position: absolute;

            top: 0;

            left: 0;

            width: 100%;

            height: 100%;

            z-index: -1;

            background: url('https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1471&q=80') center/cover no-repeat;

            opacity: 0.3;

        }



        .light-theme .hero-bg {

            opacity: 0.1;

        }



        .hero-content {

            max-width: 800px;

        }



        .hero-subtitle {

            font-size: 1.3rem;

            margin-bottom: 40px;

            color: #a0b3ff;

        }



        .light-theme .hero-subtitle {

            color: #2b3856;

        }



        .hero-buttons {

            display: flex;

            gap: 20px;

            margin-top: 40px;

        }



        /* Блоки с карточками */

        .card-grid {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));

            gap: 30px;

            margin-top: 50px;

        }



        .card {

            background: var(--dark-card);

            border-radius: var(--border-radius);

            padding: 30px;

            transition: var(--transition);

            border: 1px solid var(--glass-border);

            backdrop-filter: blur(10px);

            position: relative;

            overflow: hidden;

            z-index: 1;

        }



        .light-theme .card {

            background: var(--light-card);

            border: 1px solid rgba(10, 30, 60, 0.08);

            box-shadow: var(--shadow-soft-light);

        }



        .light-theme #how-it-works .card {

            box-shadow: none !important;

            filter: none !important;

        }



        .light-theme #how-it-works .card:hover {

            box-shadow: 0 22px 50px rgba(24, 42, 90, 0.25);

        }



        .light-theme .card::before {

            background: linear-gradient(135deg, rgba(11, 91, 255, 0.18), rgba(123, 61, 255, 0.18));

        }



        .card::before {

            content: '';

            position: absolute;

            top: 0;

            left: 0;

            width: 100%;

            height: 100%;

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.05), rgba(157, 78, 221, 0.05));

            z-index: -1;

            opacity: 0;

            transition: var(--transition);

        }



        .card:hover::before {

            opacity: 1;

        }



        .card:hover {

            transform: translateY(-10px);

            box-shadow: var(--shadow-raise);

        }



        .light-theme .card:hover {

            box-shadow: var(--shadow-raise-light);

        }



        .card-icon {

            font-size: 2.5rem;

            color: inherit;

            margin-bottom: 20px;

        }



        .light-theme .card-icon {

            color: inherit;

        }

        /* Монохромные эмодзи для главной страницы */
        .icon-image {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .api-icon,
        .inline-api-icon,
        .detector-status-icon,
        .results-label-icon,
        .dash-rocket-icon {
            width: 1em;
            height: 1em;
            object-fit: contain;
            display: inline-block;
            vertical-align: -0.12em;
        }

        .inline-api-icon {
            margin-right: 8px;
        }

        .detector-status-icon,
        .results-label-icon {
            margin-right: 6px;
        }

        .results-label-icon {
            vertical-align: -0.2em;
        }

        .dash-rocket-icon {
            width: 1.25rem;
            height: 1.25rem;
            vertical-align: middle;
        }



        .light-theme .benefit-icon {

            color: var(--light-accent2);

        }



        .card h3 {

            font-size: 1.5rem;

            margin-bottom: 15px;

        }



        /* Как работает система */

        .workflow {

            display: flex;

            justify-content: space-between;

            align-items: center;

            margin-top: 60px;

            flex-wrap: wrap;

            gap: 30px;

        }



        .workflow-step {

            flex: 1;

            min-width: 200px;

            text-align: center;

            position: relative;

        }



        .workflow-step:not(:last-child)::after {

            content: '→';

            position: absolute;

            right: -30px;

            top: 50%;

            transform: translateY(-50%);

            font-size: 2rem;

            color: var(--dark-accent);

        }



        .light-theme .workflow-step:not(:last-child)::after {

            color: var(--light-accent);

        }



        .step-number {

            width: 60px;

            height: 60px;

            background: linear-gradient(135deg, var(--dark-accent), var(--dark-accent2));

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            font-family: var(--heading-font);

            font-size: 1.5rem;

            margin: 0 auto 20px;

            box-shadow: var(--glow);

        }



        .light-theme .step-number {

            background: linear-gradient(135deg, rgba(98, 155, 255, 0.95), rgba(170, 125, 255, 0.95));

            box-shadow: 0 14px 28px rgba(72, 110, 200, 0.28);

            filter: brightness(1.18);

        }



        /* Калькулятор */

        .calculator {

            background: var(--dark-card);

            border-radius: var(--border-radius);

            padding: 40px;

            margin-top: 50px;

            border: 1px solid var(--glass-border);

            backdrop-filter: blur(10px);

        }



        .light-theme .calculator {

            background: var(--light-card);

            border: 1px solid rgba(10, 30, 60, 0.08);

            box-shadow: var(--shadow-soft-light);

        }



        .calculator-form {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));

            gap: 20px;

            margin-bottom: 40px;

        }



        .form-group {

            display: flex;

            flex-direction: column;

        }



        .form-group label {

            margin-bottom: 8px;

            font-weight: 500;

        }



        .form-group input,
        .form-group select {

            padding: 15px;

            background: rgba(255, 255, 255, 0.05);

            border: 1px solid var(--glass-border);

            border-radius: 8px;

            color: var(--dark-text);

            font-family: var(--primary-font);

            transition: var(--transition);

        }



        .light-theme .form-group input,
        .light-theme .form-group select {

            background: rgba(255, 255, 255, 0.9);

            border-color: rgba(10, 30, 60, 0.12);

            color: var(--light-text);

        }



        .form-group input:focus,
        .form-group select:focus {

            outline: none;

            border-color: var(--dark-accent);

            box-shadow: 0 0 10px rgba(0, 217, 255, 0.3);

        }



        .light-theme .form-group input:focus,
        .light-theme .form-group select:focus {

            border-color: var(--light-accent);

            box-shadow: 0 0 10px rgba(0, 102, 204, 0.3);

        }



        .calculator-result {

            display: none;

            background: rgba(0, 217, 255, 0.05);

            border-radius: var(--border-radius);

            padding: 30px;

            margin-top: 30px;

            border: 1px solid rgba(0, 217, 255, 0.2);

        }



        .light-theme .calculator-result {

            background: rgba(27, 91, 255, 0.06);

            border-color: rgba(27, 91, 255, 0.22);

        }



        .result-grid {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));

            gap: 20px;

            margin-top: 20px;

        }



        .result-item {

            text-align: center;

            padding: 20px;

            background: rgba(255, 255, 255, 0.05);

            border-radius: 8px;

        }



        .light-theme .result-item {

            background: rgba(255, 255, 255, 0.85);

            border: 1px solid rgba(10, 30, 60, 0.08);

        }



        .result-value {

            font-size: 2rem;

            font-family: var(--heading-font);

            color: var(--dark-accent);

            margin-bottom: 5px;

        }



        .light-theme .result-value {

            color: var(--light-accent);

        }



        /* Команда */

        .team-grid {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));

            gap: 30px;

            margin-top: 50px;

        }



        .team-member {

            text-align: center;

        }



        .member-photo {

            width: 150px;

            height: 150px;

            border-radius: 50%;

            margin: 0 auto 20px;

            background: linear-gradient(135deg, var(--dark-accent), var(--dark-accent2));

            display: flex;

            align-items: center;

            justify-content: center;

            font-size: 3rem;

            color: white;

            box-shadow: var(--glow);

        }



        .light-theme .member-photo {

            background: linear-gradient(135deg, var(--light-accent), var(--light-accent2));

            box-shadow: 0 12px 25px rgba(27, 91, 255, 0.35);

        }



        /* Личный кабинет */

        .auth-modal,
        .dashboard-modal {

            position: fixed;

            top: 0;

            left: 0;

            width: 100%;

            height: 100%;

            background: rgba(0, 0, 0, 0.8);

            display: flex;

            align-items: center;

            justify-content: center;

            z-index: 2000;

            backdrop-filter: blur(10px);

            opacity: 0;

            visibility: hidden;

            transition: var(--transition);

        }



        .auth-modal.active,
        .dashboard-modal.active {

            opacity: 1;

            visibility: visible;

        }



        .auth-content,
        .dashboard-content {

            background: var(--dark-card);

            border-radius: var(--border-radius);

            width: 90%;

            max-width: 500px;

            padding: 40px;

            border: 1px solid var(--glass-border);

            transform: translateY(-30px);

            transition: var(--transition);

            margin: 0 auto;

            margin: 0 auto;

        }



        .auth-modal.active .auth-content,
        .dashboard-modal.active .dashboard-content {

            transform: translateY(0);

        }



        .light-theme .auth-content,
        .light-theme .dashboard-content {

            background: var(--light-card);

            border-color: rgba(10, 30, 60, 0.1);

            box-shadow: var(--shadow-raise-light);

        }



        .auth-tabs {

            display: flex;

            margin-bottom: 30px;

            border-bottom: 1px solid var(--glass-border);

        }



        .auth-tab {

            flex: 1;

            padding: 15px;

            text-align: center;

            background: transparent;

            border: none;

            color: var(--dark-text);

            font-family: var(--primary-font);

            font-size: 1.1rem;

            cursor: pointer;

            transition: var(--transition);

            border-bottom: 3px solid transparent;

        }



        .auth-tab.active {

            border-bottom-color: var(--dark-accent);

            color: var(--dark-accent);

        }



        .light-theme .auth-tab.active {

            border-bottom-color: var(--light-accent);

            color: var(--light-accent);

        }



        .auth-form {

            display: none;

        }



        .auth-form.active {

            display: block;

        }



        .dashboard-content {
            width: 90%;
            max-width: 900px;
            max-height: 85vh;
            height: auto;
            overflow-y: auto;
            overflow-x: hidden;
            background:
                radial-gradient(140% 120% at 15% -10%, rgba(0, 217, 255, 0.18), transparent 60%),
                radial-gradient(140% 120% at 90% 0%, rgba(123, 61, 255, 0.18), transparent 55%),
                rgba(10, 16, 36, 0.92);
            border: 1px solid rgba(0, 217, 255, 0.18);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.45);
            backdrop-filter: blur(18px);
            position: relative;
            font-family: var(--primary-font);
            margin: 0 auto;
        }

        /* Синяя прокрутка */
        .dashboard-content::-webkit-scrollbar {
            width: 10px;
        }

        .dashboard-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .dashboard-content::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d9ff, #3a86ff);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        .dashboard-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #00eaff, #4a96ff);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.7);
        }

        .dashboard-content {
            scrollbar-color: linear-gradient(180deg, #00d9ff, #3a86ff) rgba(255, 255, 255, 0.05);
            scrollbar-width: thin;
        }

        .dashboard-content * {
            font-family: var(--primary-font) !important;
        }


        .dashboard-content::before,

        .dashboard-content::after {

            content: '';

            position: absolute;

            inset: 0;

            pointer-events: none;

        }



        .dashboard-content::before {

            background:

                radial-gradient(1px 1px at 15% 20%, rgba(255, 255, 255, 0.5) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 30% 35%, rgba(255, 255, 255, 0.45) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 55% 25%, rgba(255, 255, 255, 0.4) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 70% 55%, rgba(255, 255, 255, 0.45) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 85% 30%, rgba(255, 255, 255, 0.5) 0 1px, transparent 2px);

            opacity: 0.35;

            animation: starDrift 22s linear infinite;

        }



        .dashboard-content::after {

            background:

                linear-gradient(120deg, transparent 0%, rgba(0, 217, 255, 0.35) 45%, transparent 70%);

            width: 140px;

            height: 140px;

            top: -40px;

            left: -40px;

            border-radius: 50%;

            opacity: 0.25;

            filter: blur(6px);

            animation: cometTrail 9s ease-in-out infinite;

        }



        .dashboard-header {

            display: flex;

            justify-content: space-between;

            align-items: center;

            margin-bottom: 30px;

        }



        .dash-tabs {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 24px;
            justify-content: center;
            padding: 16px;
            background: rgba(0, 217, 255, 0.04);
            border-radius: 16px;
            border: 1px solid rgba(0, 217, 255, 0.1);
        }

        .light-theme .dash-tabs {
            background: rgba(31, 107, 255, 0.06);
            border-color: rgba(31, 107, 255, 0.15);
        }



        .dash-tab {
            padding: 14px 24px;
            border-radius: 12px;
            border: 2px solid rgba(0, 217, 255, 0.15);
            background: rgba(10, 16, 36, 0.6);
            color: rgba(224, 231, 255, 0.75);
            cursor: pointer;
            font-weight: 800;
            font-size: 1.05rem;
            letter-spacing: 0.5px;
            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
        }

        .dash-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .dash-tab:hover::before {
            left: 100%;
        }

        .dash-tab.active {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.35), rgba(123, 61, 255, 0.35));
            border-color: rgba(0, 217, 255, 0.6);
            color: #00d9ff;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.4), inset 0 0 15px rgba(0, 217, 255, 0.1);
            transform: translateY(-3px);
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        .dash-tab:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(0, 217, 255, 0.3);
            border-color: rgba(0, 217, 255, 0.4);
            color: rgba(224, 231, 255, 0.95);
            background: rgba(15, 25, 50, 0.8);
        }



        .dash-panel {

            display: none;

            position: relative;

            padding: 12px 24px 20px;

            border-radius: 16px;

            background: rgba(255, 255, 255, 0.05);

            border: 2px solid rgba(0, 217, 255, 0.3);

            overflow: hidden;

            flex-direction: column;

            justify-content: flex-start;

            align-items: stretch;

            gap: 10px;

            min-height: 0;

            box-shadow: 0 15px 35px rgba(0, 217, 255, 0.2), inset 0 0 20px rgba(0, 217, 255, 0.08);

            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);

            backdrop-filter: blur(12px);

            -webkit-backdrop-filter: blur(12px);

        }



        .dash-panel>h4 {

            margin-top: 0;

            font-size: 1.25rem;

            font-weight: 800;

            text-transform: uppercase;

            letter-spacing: 0.75px;

            color: #00d9ff;

            text-shadow: 0 0 12px rgba(0, 217, 255, 0.4);

            margin-bottom: 16px;

        }



        .dash-panel .dash-grid {

            margin-top: 6px;

        }



        .dash-panel.active {

            display: flex;

        }



        .dash-panel .history-list:empty::before {

            content: 'Пока пусто — сохраните расчёт в личный кабинет.';

            display: block;

            text-align: left;

            color: #a0b3ff;

        }



        .dash-panel .history-list {

            margin-top: 10px;

        }



        .dash-panel::before {

            content: '';

            position: absolute;

            inset: 0;

            background:

                radial-gradient(400px 260px at 10% 0%, rgba(0, 217, 255, 0.18), transparent 60%),

                radial-gradient(420px 280px at 90% 20%, rgba(123, 61, 255, 0.18), transparent 60%);

            opacity: 0.6;

            pointer-events: none;

        }



        .dash-panel::after {

            content: '';

            position: absolute;

            inset: -10%;

            background:

                radial-gradient(1px 1px at 20% 20%, rgba(255, 255, 255, 0.6) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 35% 45%, rgba(255, 255, 255, 0.5) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 70% 30%, rgba(255, 255, 255, 0.5) 0 1px, transparent 2px);

            opacity: 0.4;

            pointer-events: none;

        }



        .dash-panel .dash-orbit {

            position: absolute;

            inset: -20%;

            border-radius: 50%;

            border: 1px dashed rgba(0, 217, 255, 0.22);

            animation: orbitSpin 26s linear infinite;

            pointer-events: none;

            opacity: 0.35;

        }



        .dash-panel .dash-orbit.second {

            inset: -10%;

            border-color: rgba(123, 61, 255, 0.2);

            animation-duration: 34s;

        }



        .dash-panel .dash-orbit.third {

            inset: -2%;

            border-color: rgba(255, 255, 255, 0.12);

            animation-duration: 40s;

        }



        .dash-panel .dash-stars {

            position: absolute;

            inset: -20%;

            background:

                radial-gradient(1px 1px at 12% 20%, rgba(255, 255, 255, 0.8) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 25% 40%, rgba(255, 255, 255, 0.6) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 40% 15%, rgba(255, 255, 255, 0.7) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 60% 35%, rgba(255, 255, 255, 0.6) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 75% 60%, rgba(255, 255, 255, 0.7) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 85% 25%, rgba(255, 255, 255, 0.8) 0 1px, transparent 2px);

            opacity: 0.35;

            animation: starDrift 18s linear infinite;

            pointer-events: none;

        }



        .dash-panel .dash-rocket {

            position: absolute;

            right: 16px;

            bottom: 14px;

            font-size: 1.1rem;

            color: rgba(0, 217, 255, 0.65);

            animation: rocketFloat 4s ease-in-out infinite;

            pointer-events: none;

        }



        .dash-rocket i,

        .dash-rocket img {

            filter: drop-shadow(0 6px 16px rgba(0, 217, 255, 0.45));

        }



        .dash-panel .dash-comet {

            position: absolute;

            top: 30px;

            left: -120px;

            width: 120px;

            height: 2px;

            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.7), transparent);

            box-shadow: 0 0 12px rgba(0, 217, 255, 0.6);

            transform: rotate(12deg);

            animation: dashComet 10s ease-in-out infinite;

            pointer-events: none;

            opacity: 0.5;

        }



        @keyframes rocketFloat {

            0%,
            100% {
                transform: translateY(0) rotate(-8deg);
            }

            50% {
                transform: translateY(-6px) rotate(-4deg);
            }

        }



        @keyframes cometTrail {

            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0.15;
            }

            50% {
                transform: translate(220px, 80px) rotate(15deg);
                opacity: 0.35;
            }

            100% {
                transform: translate(420px, 160px) rotate(25deg);
                opacity: 0;
            }

        }



        @keyframes dashComet {

            0% {
                transform: translateX(0) rotate(12deg);
                opacity: 0;
            }

            30% {
                transform: translateX(260px) rotate(12deg);
                opacity: 0.6;
            }

            60% {
                transform: translateX(520px) rotate(12deg);
                opacity: 0;
            }

            100% {
                transform: translateX(520px) rotate(12deg);
                opacity: 0;
            }

        }



        .dash-grid {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));

            gap: 16px;

            margin-top: 12px;

        }



        .dash-card {

            background: rgba(255, 255, 255, 0.06);

            border: 2px solid rgba(0, 217, 255, 0.25);

            border-radius: 14px;

            padding: 18px 20px;

            word-wrap: break-word;

            overflow-wrap: break-word;

            word-break: break-word;

            box-shadow: 0 10px 25px rgba(0, 217, 255, 0.15), inset 0 0 15px rgba(0, 217, 255, 0.08);

            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);

            position: relative;

            overflow: hidden;

            backdrop-filter: blur(10px);

            -webkit-backdrop-filter: blur(10px);

        }

        .dash-card::before {

            content: '';

            position: absolute;

            inset: 0;

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(123, 61, 255, 0.05));

            opacity: 0;

            transition: opacity 0.3s ease;

            pointer-events: none;

        }

        .dash-card:hover::before {

            opacity: 1;

        }

        .dash-card h4 {

            margin-bottom: 8px;

            font-size: 1.05rem;

            font-weight: 700;

            color: #00d9ff;

        }



        .dash-actions {

            display: grid;

            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));

            gap: 12px;

            margin-top: 10px;

        }



        .dash-action {

            padding: 14px 20px;

            border-radius: 12px;

            background: rgba(255, 255, 255, 0.06);

            border: 2px solid rgba(0, 217, 255, 0.3);

            display: flex;

            align-items: center;

            justify-content: center;

            gap: 10px;

            cursor: pointer;

            transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);

            position: relative;

            overflow: hidden;

            font-weight: 600;

            color: #e0e7ff;

            backdrop-filter: blur(10px);

            -webkit-backdrop-filter: blur(10px);

        }

        .dash-action::before {

            content: '';

            position: absolute;

            left: -100%;

            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.25), transparent);

            height: 100%;

            width: 100%;

            transition: left 0.5s ease;

            pointer-events: none;

        }

        .dash-action:hover::before {

            left: 100%;

        }

        .dash-action:hover {

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.3), rgba(123, 61, 255, 0.2));

            border-color: rgba(0, 217, 255, 0.5);

            transform: translateY(-3px);

            box-shadow: 0 12px 28px rgba(0, 217, 255, 0.3), inset 0 0 15px rgba(0, 217, 255, 0.1);

            color: #00d9ff;

        }

        .dash-action:active {

            transform: translateY(-1px) scale(0.98);

            box-shadow: 0 6px 14px rgba(0, 217, 255, 0.2);

        }



        .dash-action i {

            color: var(--dark-accent);

        }



        .dash-section {

            margin-top: 14px;

        }



        .dash-field {

            display: grid;

            grid-template-columns: 1fr;

            gap: 8px;

        }



        .dash-field input {

            padding: 12px 16px;

            border-radius: 10px;

            border: 2px solid rgba(0, 217, 255, 0.15);

            background: rgba(10, 20, 45, 0.8);

            color: #e7f0ff;

            transition: all 0.3s ease;

            font-size: 0.95rem;

        }

        .dash-field input:focus {

            border-color: rgba(0, 217, 255, 0.5);

            background: rgba(10, 20, 45, 0.95);

            box-shadow: 0 0 15px rgba(0, 217, 255, 0.2), inset 0 0 10px rgba(0, 217, 255, 0.05);

            outline: none;

        }



        .dash-field label {

            font-size: 0.9rem;

            color: #00d9ff;

            font-weight: 600;

            text-transform: uppercase;

            letter-spacing: 0.3px;

        }



        .light-theme .dash-tab {
            background: rgba(31, 107, 255, 0.1);
            border-color: rgba(31, 107, 255, 0.3);
            color: #0d2a7a;
        }

        .light-theme .dash-tab:hover {
            box-shadow: 0 15px 30px rgba(31, 107, 255, 0.25);
            background: rgba(31, 107, 255, 0.15);
            color: #0b1f60;
        }

        .light-theme .dash-tab.active {
            background: linear-gradient(135deg, rgba(31, 107, 255, 0.3), rgba(123, 61, 255, 0.2));
            border-color: rgba(31, 107, 255, 0.5);
            color: #0b5bff;
            box-shadow: 0 0 20px rgba(31, 107, 255, 0.35);
        }



        .light-theme .dash-action {

            background: rgba(255, 255, 255, 0.95);

            border-color: rgba(31, 107, 255, 0.3);

            color: #0d2a7a;

        }

        .light-theme .dash-action:hover {

            background: linear-gradient(135deg, rgba(31, 107, 255, 0.2), rgba(123, 61, 255, 0.1));

            border-color: rgba(31, 107, 255, 0.5);

            box-shadow: 0 12px 28px rgba(31, 107, 255, 0.25), inset 0 0 15px rgba(31, 107, 255, 0.05);

            color: #0b5bff;

        }



        .light-theme .dash-field input {

            background: #ffffff;

            border-color: rgba(31, 107, 255, 0.3);

            color: #1a2540;

        }

        .light-theme .dash-field input:focus {

            border-color: rgba(31, 107, 255, 0.6);

            background: #ffffff;

            box-shadow: 0 0 15px rgba(31, 107, 255, 0.2), inset 0 0 10px rgba(31, 107, 255, 0.05);

        }

        .light-theme .dash-field label {

            color: #0b5bff;

        }



        .dash-muted {

            color: #00d9ff;

            font-size: 0.95rem;

            opacity: 0.85;

            font-weight: 500;

        }

        .light-theme .dash-muted {

            color: #0b5bff;

            opacity: 0.9;

        }



        .light-theme .dash-panel {

            background: rgba(255, 255, 255, 0.95);

            border-color: rgba(31, 107, 255, 0.3);

            box-shadow: 0 15px 35px rgba(31, 107, 255, 0.15), inset 0 0 20px rgba(31, 107, 255, 0.03);

        }

        .light-theme .dash-panel::before {

            opacity: 0.25;

        }

        .light-theme .dash-card {

            background: rgba(255, 255, 255, 0.95);

            border-color: rgba(31, 107, 255, 0.3);

            box-shadow: 0 10px 25px rgba(31, 107, 255, 0.12), inset 0 0 15px rgba(31, 107, 255, 0.02);

        }

        .light-theme .dash-card h4 {

            color: #0b5bff;

        }

        .light-theme .dash-panel>h4 {

            color: #0b5bff;

            text-shadow: 0 0 12px rgba(31, 107, 255, 0.25);

        }

        .light-theme .dynamic-text {
            color: #0b1220;
        }

        .light-theme .dynamic-link {
            color: #0b5bff !important;
        }

        .dynamic-text {
            color: #a0b3ff;
        }

        .dynamic-link {
            color: #00d9ff;
        }



        .light-theme .dashboard-content {

            background:

                radial-gradient(140% 120% at 15% -10%, rgba(120, 170, 255, 0.25), transparent 60%),

                radial-gradient(140% 120% at 90% 0%, rgba(170, 130, 255, 0.2), transparent 55%),

                rgba(246, 249, 255, 0.96);

            border-color: rgba(31, 107, 255, 0.15);

            box-shadow: 0 24px 60px rgba(70, 90, 160, 0.25);

        }



        .history-list {

            margin-top: 20px;

        }



        .history-item {

            background: rgba(255, 255, 255, 0.06);

            border-radius: 12px;

            padding: 18px 20px;

            margin-bottom: 15px;

            border: 2px solid rgba(0, 217, 255, 0.25);

            box-shadow: 0 8px 20px rgba(0, 217, 255, 0.15), inset 0 0 12px rgba(0, 217, 255, 0.08);

            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);

            position: relative;

            overflow: hidden;

            backdrop-filter: blur(10px);

            -webkit-backdrop-filter: blur(10px);

        }

        .history-item::before {

            content: '';

            position: absolute;

            inset: 0;

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.08), rgba(123, 61, 255, 0.04));

            opacity: 0;

            transition: opacity 0.3s ease;

            pointer-events: none;

        }

        .history-item:hover::before {

            opacity: 1;

        }

        .history-item:hover {

            border-color: rgba(0, 217, 255, 0.3);

            box-shadow: 0 12px 28px rgba(0, 217, 255, 0.2), inset 0 0 15px rgba(0, 217, 255, 0.05);

        }



        .light-theme .history-item {

            background: rgba(255, 255, 255, 0.95);

            border-color: rgba(31, 107, 255, 0.3);

            box-shadow: 0 8px 20px rgba(31, 107, 255, 0.12), inset 0 0 12px rgba(31, 107, 255, 0.02);

        }

        .light-theme .history-item:hover {

            border-color: rgba(31, 107, 255, 0.45);

            box-shadow: 0 12px 28px rgba(31, 107, 255, 0.18), inset 0 0 15px rgba(31, 107, 255, 0.04);

        }



        .history-item-header {

            display: flex;

            justify-content: space-between;

            align-items: center;

            margin-bottom: 10px;

        }



        .history-actions {

            display: flex;

            gap: 10px;

            margin-top: 15px;

        }



        /* Футер */

        footer {

            background: rgba(5, 10, 20, 0.9);

            padding: 60px 0 30px;

            border-top: 1px solid var(--glass-border);

        }



        .light-theme footer {

            background: linear-gradient(180deg, rgba(235, 240, 255, 0.95) 0%, rgba(220, 230, 255, 0.95) 100%);

            border-top: 1px solid rgba(10, 30, 60, 0.1);

        }



        .footer-content {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));

            gap: 40px;

            margin-bottom: 40px;

        }



        .footer-logo {

            font-family: var(--heading-font);

            font-size: 1.8rem;

            font-weight: 900;

            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));

            -webkit-background-clip: text;

            background-clip: text;

            color: transparent;

            margin-bottom: 20px;

            display: inline-block;

            text-decoration: none;

        }



        .light-theme .footer-logo {

            background: linear-gradient(90deg, var(--light-accent), var(--light-accent2), #12b8ff);

            -webkit-background-clip: text;

            background-clip: text;

            -webkit-text-fill-color: transparent;

        }



        .social-links {

            display: flex;

            gap: 15px;

            margin-top: 20px;

        }



        .social-links a {

            display: flex;

            align-items: center;

            justify-content: center;

            width: 40px;

            height: 40px;

            background: rgba(255, 255, 255, 0.05);

            border-radius: 50%;

            color: var(--dark-text);

            transition: var(--transition);

        }



        .light-theme .social-links a {

            background: rgba(255, 255, 255, 0.85);

            color: #25304a;

            border: 1px solid rgba(10, 30, 60, 0.08);

        }



        .social-links a:hover {

            background: var(--dark-accent);

            color: white;

            transform: translateY(-3px);

        }



        .light-theme .social-links a:hover {

            background: var(--light-accent);

        }



        .footer-bottom {

            text-align: center;

            padding-top: 30px;

            border-top: 1px solid var(--glass-border);

            color: #a0b3ff;

        }



        .light-theme .footer-bottom {

            border-top-color: rgba(0, 0, 0, 0.1);

            color: #666;

        }



        /* Адаптивность */

        @media (max-width: 992px) {

            h1 {

                font-size: 2.8rem;

            }



            h2 {

                font-size: 2.2rem;

            }



            .workflow-step:not(:last-child)::after {

                display: none;

            }



            .hero-buttons {

                flex-direction: column;

                align-items: flex-start;

            }



            .btn {

                width: 100%;

                text-align: center;

            }

        }



        @media (max-width: 768px) {

            h1 {

                font-size: 2.3rem;

            }



            h2 {

                font-size: 1.8rem;

            }



            section {

                padding: 70px 0;

            }



            .header-controls {

                gap: 10px;

            }



            nav ul {

                display: none;

            }



            .mobile-menu-btn {

                display: block;

            }



            .mobile-menu {

                position: fixed;

                top: 80px;

                left: 0;

                width: 100%;

                background: rgba(10, 14, 23, 0.95);

                backdrop-filter: blur(20px);

                padding: 20px;

                display: none;

                z-index: 999;

                border-top: 1px solid var(--glass-border);

            }



            .light-theme .mobile-menu {

                background: rgba(248, 249, 255, 0.95);

            }



            .mobile-menu.active {

                display: block;

            }



            .mobile-menu ul {

                flex-direction: column;

                gap: 15px;

            }



            .mobile-menu a {

                display: block;

                padding: 10px 0;

                font-size: 1.2rem;

            }



            .workflow {

                flex-direction: column;

            }



            .workflow-step {

                width: 100%;

            }



            .auth-content,
            .dashboard-content {

                padding: 20px;

                width: 95%;

            }

        }



        @media (max-width: 576px) {

            h1 {

                font-size: 2rem;

            }



            .hero {

                padding-top: 140px;

            }



            .calculator {

                padding: 20px;

            }



            .calculator-form {

                grid-template-columns: 1fr;

            }



            .auth-btn.full span {

                display: none;

            }



            .auth-btn.full {

                width: 40px;

                padding: 0;

            }

        }



        /* Анимации */

        @keyframes float {

            0%,
            100% {

                transform: translateY(0);

            }

            50% {

                transform: translateY(-10px);

            }

        }



        .floating {

            animation: float 5s ease-in-out infinite;

        }



        .fade-in {

            opacity: 0;

            transform: translateY(30px);

            transition: opacity 0.8s ease, transform 0.8s ease;

        }



        .fade-in.visible {

            opacity: 1;

            transform: translateY(0);

        }



        /* Индикатор загрузки */

        .loader {

            position: fixed;

            top: 0;

            left: 0;

            width: 100%;

            height: 100%;

            background: var(--dark-bg);

            display: flex;

            align-items: center;

            justify-content: center;

            z-index: 9999;

            transition: opacity 0.5s, visibility 0.5s;

        }



        .loader.hidden {

            opacity: 0;

            visibility: hidden;

        }



        .loader-content {

            text-align: center;

        }



        .loader-logo {

            font-family: var(--heading-font);

            font-size: 3rem;

            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));

            -webkit-background-clip: text;

            background-clip: text;

            color: transparent;

            margin-bottom: 30px;

        }



        .loader-bar {

            width: 300px;

            height: 4px;

            background: rgba(255, 255, 255, 0.1);

            border-radius: 2px;

            overflow: hidden;

            position: relative;

        }



        .loader-bar::after {

            content: '';

            position: absolute;

            top: 0;

            left: 0;

            height: 100%;

            width: 0;

            background: linear-gradient(90deg, var(--dark-accent), var(--dark-accent2));

            animation: loading 2s ease-in-out infinite;

        }



        @keyframes loading {

            0% {

                width: 0;

                left: 0;

            }

            50% {

                width: 100%;

                left: 0;

            }

            100% {

                width: 0;

                left: 100%;

            }

        }



        /* Эффект частиц */

        #particles-js {

            position: absolute;

            width: 100%;

            height: 100%;

            top: 0;

            left: 0;

            z-index: -1;

        }



        /* Языковое меню */

        .language-dropdown {

            position: relative;

        }



        .language-menu {

            position: absolute;

            top: 45px;

            right: 0;

            background: var(--dark-card);

            border-radius: var(--border-radius);

            padding: 10px 0;

            min-width: 150px;

            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);

            border: 1px solid var(--glass-border);

            backdrop-filter: blur(10px);

            display: none;

            z-index: 1001;

        }



        .light-theme .language-menu {

            background: var(--light-card);

            border-color: rgba(0, 0, 0, 0.1);

        }



        .language-menu.active {

            display: block;

        }



        .language-option {

            padding: 10px 20px;

            cursor: pointer;

            transition: var(--transition);

            display: flex;

            align-items: center;

            gap: 10px;

        }



        .language-option:hover {

            background: rgba(0, 217, 255, 0.1);

        }



        .language-option.active {

            background: rgba(0, 217, 255, 0.2);

        }



        .language-flag {

            width: 20px;

            height: 15px;

            border-radius: 2px;

        }



        /* Сублимация */

        .sublimation-animation {

            display: flex;

            justify-content: space-between;

            align-items: center;

            margin-top: 50px;

            flex-wrap: wrap;

            gap: 30px;

        }



        .sublimation-item {

            text-align: center;

            flex: 1;

            min-width: 200px;

        }



        .sublimation-icon {

            font-size: 3rem;

            color: var(--dark-accent);

            margin-bottom: 20px;

            animation: pulse 2s infinite;

        }



        @keyframes pulse {

            0%,
            100% {

                transform: scale(1);

            }

            50% {

                transform: scale(1.1);

            }

        }



        /* Преимущества */

        .benefits-grid {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));

            gap: 30px;

            margin-top: 50px;

        }



        .benefit-card {

            display: flex;

            align-items: flex-start;

            gap: 20px;

        }



        .benefit-icon {

            font-size: 2rem;

            color: var(--dark-accent);

            flex-shrink: 0;

        }



        /* AI Dashboard */

        .ai-dashboard {

            background: var(--dark-card);

            border-radius: var(--border-radius);

            padding: 40px;

            margin-top: 50px;

            border: 1px solid var(--glass-border);

            backdrop-filter: blur(10px);

            position: relative;

            overflow: hidden;

        }



        .light-theme .ai-dashboard {

            background: linear-gradient(135deg, rgba(104, 150, 255, 0.78), rgba(170, 135, 255, 0.78));

            color: #f7f9ff;

            border-color: rgba(90, 130, 255, 0.25);

            box-shadow: 0 16px 40px rgba(70, 90, 160, 0.18);

        }



        .light-theme .ai-dashboard .btn-outline {

            border-color: rgba(255, 255, 255, 0.7);

            color: #ffffff;

        }



        .light-theme .ai-dashboard .btn-outline:hover {

            background: rgba(255, 255, 255, 0.12);

            color: #ffffff;

        }



        .dashboard-stats {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));

            gap: 20px;

        }



        .stat-item {

            text-align: center;

            padding: 20px;

            background: rgba(255, 255, 255, 0.06);

            border-radius: 8px;

            backdrop-filter: blur(10px);

            -webkit-backdrop-filter: blur(10px);

            border: 1px solid rgba(0, 217, 255, 0.2);

        }



        .light-theme .stat-item {

            background: rgba(10, 20, 60, 0.4);

            border: 1px solid rgba(255, 255, 255, 0.28);

            color: #f0f4ff;

        }



        .stat-value {

            font-size: 2rem;

            font-family: var(--heading-font);

            color: var(--dark-accent);

        }



        .light-theme .stat-value {

            color: #ffffff;

            text-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);

        }



        /* Личный кабинет */

        .account-features {

            display: grid;

            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));

            gap: 30px;

            margin-top: 50px;

        }



        .feature-card {

            text-align: center;

            padding: 30px;

            background: rgba(255, 255, 255, 0.06);

            border-radius: var(--border-radius);

            border: 2px solid rgba(0, 217, 255, 0.25);

            backdrop-filter: blur(10px);

            -webkit-backdrop-filter: blur(10px);

        }



        .light-theme .feature-card {

            background: linear-gradient(135deg, rgba(219, 230, 255, 0.98), rgba(205, 216, 255, 0.98));

            border-color: rgba(27, 91, 255, 0.15);

            box-shadow: var(--shadow-soft-light);

        }

        /* МОДАЛЬНЫЕ ОКНА */
        .modal-account {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3000;
        }

        .modal-account.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .modal-content {
            position: relative;
            background: rgba(255, 255, 255, 0.07);
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            max-width: 500px;
            width: 90%;
            animation: modalSlideIn 0.3s ease;
            box-shadow: 0 25px 50px rgba(0, 217, 255, 0.3), inset 0 0 30px rgba(0, 217, 255, 0.1);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 25px;
            border-bottom: 2px solid rgba(0, 217, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            background: linear-gradient(135deg, #00d9ff 0%, #7b3dff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: #ff6464;
            cursor: pointer;
            transition: all 0.3s;
            padding: 0 5px;
        }

        .modal-close:hover {
            transform: scale(1.2);
            color: #ff8888;
        }

        .modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-input {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.06);
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 10px;
            color: #e0e7ff;
            font-family: var(--primary-font);
            transition: all 0.3s;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .modal-input:focus {
            outline: none;
            border-color: rgba(0, 217, 255, 0.7);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.3);
        }

        .modal-input::placeholder {
            color: #888;
        }

        .modal-input-readonly {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 10px;
            background: rgba(0, 217, 255, 0.05);
            border: 2px solid rgba(0, 217, 255, 0.2);
            border-radius: 10px;
            color: #00d9ff;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
        }

        .modal-btn-primary {
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2) 0%, rgba(123, 61, 255, 0.2) 100%);
            border: 2px solid rgba(0, 217, 255, 0.5);
            border-radius: 10px;
            color: #00d9ff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            margin-top: 10px;
        }

        .modal-btn-primary:hover {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.3) 0%, rgba(123, 61, 255, 0.3) 100%);
            border-color: rgba(0, 217, 255, 0.8);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.4);
        }

        .modal-btn-secondary {
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.06);
            border: 2px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            color: #00d9ff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .modal-btn-secondary:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.7);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.3);
        }

        .api-key-item {
            background: rgba(0, 217, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .stat-box {
            background: rgba(0, 217, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .stat-label {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 6px;
        }

        .stat-value {
            color: #00d9ff;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .stat-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 217, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-progress {
            height: 100%;
            background: linear-gradient(90deg, #00d9ff, #7b3dff);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: rgba(0, 217, 255, 0.05);
            border-radius: 4px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d9ff, #7b3dff);
            border-radius: 4px;
        }

        /* Account Forms - AI Assistant Style */

        .account-modal-content {
            background:
                radial-gradient(140% 120% at 15% -10%, rgba(0, 217, 255, 0.12), transparent 60%),
                radial-gradient(140% 120% at 90% 100%, rgba(123, 61, 255, 0.1), transparent 55%),
                rgba(6, 10, 24, 0.95) !important;
            border: 1px solid rgba(0, 217, 255, 0.15) !important;
            max-width: 500px !important;
        }

        .account-modal-body {
            padding: 24px !important;
        }

        .account-form-group {
            margin-bottom: 16px;
        }

        .account-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: #e7f0ff;
            padding: 12px 14px;
            border-radius: 10px;
            font-family: var(--primary-font);
            font-size: 0.95rem;
            transition: all 0.3s;
            box-sizing: border-box;
        }

        .account-input:focus {
            outline: none;
            border-color: rgba(0, 217, 255, 0.6);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.25);
        }

        .account-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .account-btn-submit {
            width: 100%;
            background: linear-gradient(135deg, #00d9ff, #7b3dff);
            border: none;
            color: white;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .account-btn-submit:hover {
            box-shadow: 0 8px 25px rgba(0, 217, 255, 0.35);
            transform: translateY(-2px);
        }

        .account-btn-submit:active {
            transform: translateY(0);
        }

        .language-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .language-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #e7f0ff;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .language-option:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0, 217, 255, 0.2);
        }

        .lang-flag {
            font-size: 1.5rem;
        }

        .lang-name {
            font-weight: 500;
            font-size: 1rem;
        }

        .export-btn {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 10px;
            color: #e7f0ff;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .export-btn:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0, 217, 255, 0.2);
        }

        .export-format-label {
            margin-bottom: 15px;
            color: #e7f0ff;
        }



        /* AI Assistant */

        .ai-assistant {

            position: fixed;

            right: 24px;

            bottom: 24px;

            z-index: 2500;

            font-family: var(--primary-font);

        }



        .ai-fab {

            width: 64px;

            height: 64px;

            border-radius: 50%;

            border: none;

            cursor: pointer;

            background: conic-gradient(from 120deg, #00d9ff, #7b3dff, #00d9ff);

            box-shadow: 0 12px 30px rgba(0, 217, 255, 0.35);

            position: relative;

            display: grid;

            place-items: center;

            animation: fabSpin 6s linear infinite;

        }



        .ai-fab::before,

        .ai-fab::after {

            content: '';

            position: absolute;

            inset: -8px;

            border-radius: 50%;

            border: 1px solid rgba(0, 217, 255, 0.35);

            animation: fabPulse 2.6s ease-out infinite;

        }



        .ai-fab::after {

            inset: -16px;

            border-color: rgba(123, 61, 255, 0.25);

            animation-delay: 0.7s;

        }



        .ai-fab-inner {

            width: 52px;

            height: 52px;

            border-radius: 50%;

            background: radial-gradient(circle at 30% 30%, #ffffff, #9ed8ff 45%, #1b5bff 100%);

            display: grid;

            place-items: center;

            color: #0a0e17;

            font-weight: 700;

            letter-spacing: 0.5px;

            box-shadow: inset 0 0 12px rgba(255, 255, 255, 0.6);

            animation: fabGlow 3s ease-in-out infinite;

        }



        .light-theme .ai-fab {

            background: conic-gradient(from 120deg, #1f6bff, #9a6bff, #1f6bff);

            box-shadow: 0 12px 30px rgba(40, 80, 200, 0.25);

        }



        .light-theme .ai-fab::before,

        .light-theme .ai-fab::after {

            border-color: rgba(31, 107, 255, 0.35);

        }



        .ai-panel {

            position: fixed;

            right: 24px;

            bottom: 100px;

            width: 360px;

            max-width: calc(100vw - 48px);

            border-radius: 18px;

            background: radial-gradient(120% 120% at 20% -10%, rgba(40, 90, 255, 0.35), transparent 60%),

                radial-gradient(120% 120% at 90% 0%, rgba(150, 80, 255, 0.25), transparent 55%),

                rgba(8, 12, 28, 0.96);

            color: #e7f0ff;

            border: 1px solid rgba(0, 217, 255, 0.2);

            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);

            backdrop-filter: blur(18px);

            overflow: hidden;

            transform: translateY(10px) scale(0.98);

            opacity: 0;

            pointer-events: none;

            transition: all 0.25s ease;

            z-index: 2499;

        }



        .ai-panel.active {

            transform: translateY(0) scale(1);

            opacity: 1;

            pointer-events: auto;

        }



        .ai-panel::before {

            content: '';

            position: absolute;

            inset: 0;

            background:

                radial-gradient(1px 1px at 15% 25%, rgba(255, 255, 255, 0.6) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 35% 15%, rgba(255, 255, 255, 0.5) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 65% 18%, rgba(255, 255, 255, 0.5) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 85% 30%, rgba(255, 255, 255, 0.6) 0 1px, transparent 2px),

                radial-gradient(600px 360px at 10% 0%, rgba(0, 217, 255, 0.22), transparent 60%),

                radial-gradient(500px 320px at 90% 20%, rgba(123, 61, 255, 0.28), transparent 60%);

            opacity: 0.6;

            pointer-events: none;

        }



        .ai-panel::after {

            content: '';

            position: absolute;

            inset: 0;

            background:

                radial-gradient(2px 2px at 25% 60%, rgba(255, 255, 255, 0.45) 0 2px, transparent 3px),

                radial-gradient(2px 2px at 55% 70%, rgba(255, 255, 255, 0.4) 0 2px, transparent 3px),

                radial-gradient(2px 2px at 78% 55%, rgba(255, 255, 255, 0.4) 0 2px, transparent 3px);

            opacity: 0.35;

            pointer-events: none;

        }



        .ai-panel .ai-stars {

            position: absolute;

            inset: -20%;

            background:

                radial-gradient(1px 1px at 10% 20%, rgba(255, 255, 255, 0.85) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 22% 55%, rgba(230, 215, 255, 0.9) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 30% 40%, rgba(255, 255, 255, 0.75) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 40% 18%, rgba(210, 200, 255, 0.85) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 55% 25%, rgba(255, 255, 255, 0.8) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 65% 70%, rgba(210, 200, 255, 0.85) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 75% 60%, rgba(255, 255, 255, 0.8) 0 1px, transparent 2px),

                radial-gradient(1px 1px at 85% 35%, rgba(255, 255, 255, 0.85) 0 1px, transparent 2px);

            opacity: 0.4;

            animation: starDrift 18s linear infinite;

            pointer-events: none;

        }



        .ai-panel-header {

            display: flex;

            align-items: center;

            justify-content: space-between;

            padding: 16px 18px;

            border-bottom: 1px solid rgba(255, 255, 255, 0.08);

            background: linear-gradient(90deg, rgba(0, 217, 255, 0.18), rgba(123, 61, 255, 0.18));

        }



        .ai-title {

            display: flex;

            align-items: center;

            gap: 10px;

            font-family: var(--heading-font);

            font-size: 1rem;

            letter-spacing: 0.6px;

        }



        .ai-title .dot {

            width: 10px;

            height: 10px;

            border-radius: 50%;

            background: #00d9ff;

            box-shadow: 0 0 10px rgba(0, 217, 255, 0.8);

            animation: dotBlink 1.8s ease-in-out infinite;

        }



        .ai-close {

            background: transparent;

            border: none;

            color: #e7f0ff;

            font-size: 1.2rem;

            cursor: pointer;

            opacity: 0.8;

        }



        .ai-body {

            padding: 16px 16px 0;

            max-height: 340px;

            overflow-y: auto;

            position: relative;

        }



        .ai-message {

            margin-bottom: 14px;

            padding: 12px 14px;

            border-radius: 14px;

            background: rgba(255, 255, 255, 0.06);

            border: 1px solid rgba(255, 255, 255, 0.08);

            font-size: 0.95rem;

            line-height: 1.45;

            position: relative;

        }



        .ai-message.user {

            background: linear-gradient(135deg, rgba(0, 217, 255, 0.2), rgba(123, 61, 255, 0.2));

            border-color: rgba(0, 217, 255, 0.25);

            align-self: flex-end;

        }



        .ai-suggestions {

            display: flex;

            flex-wrap: wrap;

            gap: 8px;

            margin-bottom: 14px;

        }



        .ai-chip {

            padding: 8px 10px;

            border-radius: 999px;

            border: 1px solid rgba(0, 217, 255, 0.2);

            background: rgba(0, 217, 255, 0.08);

            color: #e7f0ff;

            font-size: 0.85rem;

            cursor: pointer;

        }



        .ai-input {

            display: flex;

            gap: 10px;

            padding: 14px 16px 16px;

            border-top: 1px solid rgba(255, 255, 255, 0.08);

            background: rgba(6, 10, 24, 0.92);

        }



        .ai-input input {

            flex: 1;

            background: rgba(255, 255, 255, 0.06);

            border: 1px solid rgba(255, 255, 255, 0.12);

            color: #e7f0ff;

            padding: 10px 12px;

            border-radius: 10px;

            font-family: var(--primary-font);

        }



        .ai-input button {

            background: linear-gradient(135deg, #00d9ff, #7b3dff);

            border: none;

            color: white;

            padding: 10px 14px;

            border-radius: 10px;

            cursor: pointer;

            font-weight: 600;

        }



        .light-theme .ai-panel {

            background:

                radial-gradient(140% 120% at 15% -10%, rgba(120, 170, 255, 0.25), transparent 60%),

                radial-gradient(140% 120% at 90% 0%, rgba(170, 130, 255, 0.2), transparent 55%),

                rgba(246, 249, 255, 0.98);

            color: #1a2540;

            border-color: rgba(31, 107, 255, 0.15);

            box-shadow: 0 20px 50px rgba(70, 90, 160, 0.2);

        }



        .light-theme .ai-panel::before {

            opacity: 0.9;

        }



        .light-theme .ai-panel::after {

            opacity: 0.9;

        }



        .light-theme .ai-panel .ai-stars {

            opacity: 1;

            filter: brightness(0.8);

        }



        .ai-panel .ai-nebula {

            position: absolute;

            inset: -10%;

            background:

                radial-gradient(300px 220px at 20% 30%, rgba(80, 90, 200, 0.3), transparent 60%),

                radial-gradient(320px 240px at 80% 20%, rgba(150, 90, 220, 0.32), transparent 60%),

                radial-gradient(420px 280px at 60% 80%, rgba(90, 140, 220, 0.28), transparent 65%);

            opacity: 0.6;

            mix-blend-mode: screen;

            filter: blur(4px);

            animation: nebulaFloat 16s ease-in-out infinite;

            pointer-events: none;

        }



        .ai-panel .ai-orbit {

            position: absolute;

            inset: -10%;

            background:

                radial-gradient(circle at 30% 40%, rgba(255, 255, 255, 0.9) 0 2px, transparent 3px),

                radial-gradient(circle at 70% 60%, rgba(255, 255, 255, 0.8) 0 2px, transparent 3px);

            opacity: 0.35;

            pointer-events: none;

        }



        .ai-panel .ai-orbit::before,

        .ai-panel .ai-orbit::after {

            content: '';

            position: absolute;

            inset: 10%;

            border-radius: 50%;

            border: 1px dashed rgba(0, 217, 255, 0.25);

            animation: orbitSpin 22s linear infinite;

        }



        .ai-panel .ai-orbit::after {

            inset: 18%;

            border-color: rgba(123, 61, 255, 0.22);

            animation-duration: 28s;

        }





        .light-theme .ai-panel .ai-nebula {

            opacity: 0.85;

        }



        .light-theme .ai-message {

            background: rgba(255, 255, 255, 0.9);

            border-color: rgba(31, 107, 255, 0.12);

            color: #1a2540;

        }



        .light-theme .ai-message.user {

            background: rgba(31, 107, 255, 0.12);

            border-color: rgba(31, 107, 255, 0.2);

        }



        .light-theme .ai-chip {

            background: rgba(31, 107, 255, 0.08);

            border-color: rgba(31, 107, 255, 0.2);

            color: #1a2540;

        }



        .light-theme .ai-input {

            background: rgba(240, 245, 255, 0.98);

        }



        .light-theme .ai-input input {

            background: white;

            border-color: rgba(31, 107, 255, 0.2);

            color: #1a2540;

        }

        /* Light Theme - Account Modals */

        .light-theme .account-modal-content {
            background:
                radial-gradient(140% 120% at 15% -10%, rgba(120, 170, 255, 0.15), transparent 60%),
                radial-gradient(140% 120% at 90% 100%, rgba(170, 130, 255, 0.1), transparent 55%),
                rgba(246, 249, 255, 0.98) !important;
            border: 1px solid rgba(31, 107, 255, 0.15) !important;
        }

        .light-theme .account-input {
            background: white;
            border: 1px solid rgba(31, 107, 255, 0.2);
            color: #1a2540;
        }

        .light-theme .account-input:focus {
            border-color: rgba(31, 107, 255, 0.6);
            background: #f8f9ff;
            box-shadow: 0 0 20px rgba(31, 107, 255, 0.25);
        }

        .light-theme .account-input::placeholder {
            color: rgba(26, 37, 64, 0.4);
        }

        .light-theme .account-btn-submit {
            background: linear-gradient(135deg, #1f6bff, #9a6bff);
            color: white;
        }

        .light-theme .account-btn-submit:hover {
            box-shadow: 0 8px 25px rgba(31, 107, 255, 0.3);
        }

        .light-theme .language-option {
            background: rgba(240, 245, 255, 0.8);
            border: 1px solid rgba(31, 107, 255, 0.15);
            color: #1a2540;
        }

        .light-theme .language-option:hover {
            background: rgba(31, 107, 255, 0.1);
            border-color: rgba(31, 107, 255, 0.4);
            box-shadow: 0 4px 15px rgba(31, 107, 255, 0.15);
        }

        .light-theme .export-btn {
            background: rgba(240, 245, 255, 0.8);
            border: 1px solid rgba(31, 107, 255, 0.15);
            color: #1a2540;
        }

        .light-theme .export-btn:hover {
            background: rgba(31, 107, 255, 0.1);
            border-color: rgba(31, 107, 255, 0.4);
            box-shadow: 0 4px 15px rgba(31, 107, 255, 0.15);
        }

        .light-theme .export-format-label {
            color: #1a2540;
        }

        .light-theme .modal-header h3 {
            color: #1a2540;
        }

        .light-theme .modal-header h3 svg {
            stroke: #1f6bff;
        }

        .light-theme .account-modal-body p {
            color: #1a2540;
        }

        @keyframes fabSpin {

            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }

        }



        @keyframes fabPulse {

            0% {
                transform: scale(0.9);
                opacity: 0.9;
            }

            100% {
                transform: scale(1.25);
                opacity: 0;
            }

        }



        @keyframes fabGlow {

            0%,
            100% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.2);
            }

        }



        @keyframes dotBlink {

            0%,
            100% {
                opacity: 0.4;
            }

            50% {
                opacity: 1;
            }

        }



        @keyframes starDrift {

            0% {
                transform: translateY(0) translateX(0);
            }

            100% {
                transform: translateY(6%) translateX(-4%);
            }

        }



        @keyframes nebulaFloat {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-2%) scale(1.03);
            }

        }



        @keyframes orbitSpin {

            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }

        }

        /* Космический детектор стили */
        @keyframes spaceParticle {
            0% {
                opacity: 0;
                transform: translateY(100vh) translateX(0);
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateY(-100vh) translateX(100px);
            }
        }

        @keyframes floatParticle {

            0%,
            100% {
                transform: translateX(0);
            }

            50% {
                transform: translateX(30px);
            }
        }

        .detector-space-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }

        .detector-space-particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: radial-gradient(circle, #00d9ff, rgba(0, 217, 255, 0.3));
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.6), 0 0 20px rgba(123, 61, 255, 0.3);
            animation: spaceParticle linear infinite;
            left: var(--x, 50%);
        }

        .detector-space-particle:nth-child(1) {
            left: 10%;
            animation-duration: 8s;
            animation-delay: 0s;
            width: 3px;
            height: 3px;
        }

        .detector-space-particle:nth-child(2) {
            left: 30%;
            animation-duration: 10s;
            animation-delay: 2s;
            width: 2px;
            height: 2px;
        }

        .detector-space-particle:nth-child(3) {
            left: 60%;
            animation-duration: 12s;
            animation-delay: 4s;
            width: 1.5px;
            height: 1.5px;
        }

        .detector-space-particle:nth-child(4) {
            left: 80%;
            animation-duration: 9s;
            animation-delay: 1s;
            width: 2.5px;
            height: 2.5px;
        }

        .detector-space-particle:nth-child(5) {
            left: 50%;
            animation-duration: 11s;
            animation-delay: 3s;
            width: 2px;
            height: 2px;
        }

        .detector-btn {
            background: rgba(255, 255, 255, 0.06);
            border: 2px solid;
            color: #00d9ff;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.05rem;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .detector-btn-play {
            border-color: rgba(0, 217, 255, 0.5);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.3), inset 0 0 10px rgba(0, 217, 255, 0.1);
        }

        .detector-btn-play:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.8);
            box-shadow: 0 0 25px rgba(0, 217, 255, 0.5), inset 0 0 15px rgba(0, 217, 255, 0.2);
            transform: translateY(-2px);
        }

        .detector-btn-stop {
            border-color: rgba(255, 100, 100, 0.5);
            color: #ff6464;
            text-shadow: 0 0 10px rgba(255, 100, 100, 0.5);
            box-shadow: 0 0 15px rgba(255, 100, 100, 0.2), inset 0 0 10px rgba(255, 100, 100, 0.05);
        }

        .detector-btn-stop:hover {
            background: rgba(255, 100, 100, 0.15);
            border-color: rgba(255, 100, 100, 0.8);
            box-shadow: 0 0 25px rgba(255, 100, 100, 0.4), inset 0 0 15px rgba(255, 100, 100, 0.1);
            transform: translateY(-2px);
        }

        .detector-btn-save {
            border-color: rgba(0, 217, 255, 0.5);
            color: #00d9ff;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.3), inset 0 0 10px rgba(0, 217, 255, 0.1);
        }

        .detector-btn-save:hover {
            background: rgba(0, 217, 255, 0.15);
            border-color: rgba(0, 217, 255, 0.8);
            box-shadow: 0 0 25px rgba(0, 217, 255, 0.5), inset 0 0 15px rgba(0, 217, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Стили для переключателя моделей */
        .detector-models-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .detector-model-card {
            background: rgba(255, 255, 255, 0.06);
            border: 2px solid rgba(0, 217, 255, 0.4);
            border-radius: 30px;
            padding: 20px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .detector-model-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.3), rgba(123, 61, 255, 0.3));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
            border-radius: 30px;
        }

        .detector-model-card:hover {
            border-color: rgba(0, 217, 255, 0.7);
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 25px rgba(0, 217, 255, 0.3);
        }

        .detector-model-card.active {
            border-color: rgba(0, 217, 255, 0.9);
            background: rgba(0, 217, 255, 0.1);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.4), inset 0 0 15px rgba(0, 217, 255, 0.1);
        }

        .detector-model-card.active::after {
            content: '✓';
            position: absolute;
            top: 10px;
            right: 15px;
            color: #00d9ff;
            font-weight: bold;
            font-size: 1.6rem;
        }

        .detector-model-icon {
            font-size: 3.2rem;
            margin-bottom: 8px;
            color: #00d9ff;
            display: block;
            width: 70px;
            height: 70px;
            margin-left: auto;
            margin-right: auto;
        }

        .detector-model-name {
            font-weight: 700;
            background: linear-gradient(135deg, #00d9ff 0%, #7b3dff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 6px;
            font-size: 1.15rem;
            font-family: var(--heading-font);
            letter-spacing: 0.6px;
            text-shadow: 0 2px 10px rgba(0, 217, 255, 0.2);
        }

        .detector-model-description {
            font-size: 0.95rem;
            color: #ccc;
            line-height: 1.3;
            font-family: var(--primary-font);
        }

        #detectorResults::-webkit-scrollbar {
            width: 8px;
        }

        #detectorResults::-webkit-scrollbar-track {
            background: rgba(0, 217, 255, 0.05);
            border-radius: 10px;
        }

        #detectorResults::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d9ff, #7b3dff);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        #detectorResults::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #00e6ff, #9d4edd);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.7);
        }

        #detectorSessions::-webkit-scrollbar {
            width: 8px;
        }

        #detectorSessions::-webkit-scrollbar-track {
            background: rgba(0, 217, 255, 0.05);
            border-radius: 10px;
        }

        #detectorSessions::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d9ff, #7b3dff);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        #detectorSessions::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #00e6ff, #9d4edd);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.7);
        }

        /* Шрифты для детектора */
        #detectorVideoTitle,
        #detectorResultsTitle,
        #detectorHistoryTitle {
            font-family: var(--heading-font);
            font-weight: 800;
            font-size: 1.15rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #detectorResults,
        #detectorSessions {
            font-family: var(--body-font);
            font-weight: 600;
        }

        #detectorResults p,
        #detectorSessions p {
            font-family: var(--body-font);
            font-weight: 600;
            font-size: 0.95rem;
        }

        #detectorContainer {
            font-family: var(--body-font);
            font-weight: 600;
        }

        .detector-btn {
            font-family: var(--heading-font);
            font-weight: 700;
            letter-spacing: 0.3px;
        }
    </style>

</head>

<body>

    <!-- Индикатор загрузки -->

    <div class="loader" id="loader">

        <div class="loader-content">

            <div class="loader-logo" id="loaderLogo">COSMODIET</div>

            <div class="loader-bar"></div>

            <p id="loaderText" style="margin-top: 20px;">Инициализация космических систем...</p>

        </div>

    </div>



    <!-- Модальное окно авторизации -->

    <div class="auth-modal" id="authModal">

        <div class="auth-content">

            <div class="auth-tabs">

                <button class="auth-tab active" data-tab="login" id="authLoginTab">Вход</button>

                <button class="auth-tab" data-tab="register" id="authRegisterTab">Регистрация</button>

                <button class="auth-tab" id="closeAuthModal"
                    style="position: absolute; right: 10px; top: 10px; width: 30px; height: 30px; border: none;">

                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>

                </button>

            </div>



            <form class="auth-form active" id="loginForm">

                <div class="form-group">

                    <label for="loginEmail" id="loginEmailLabel">Email</label>

                    <input type="email" id="loginEmail" required>

                </div>



                <div class="form-group">

                    <label for="loginPassword" id="loginPasswordLabel">Пароль</label>

                    <input type="password" id="loginPassword" required>

                </div>



                <button type="submit" class="btn" id="loginBtn" style="width: 100%; margin-top: 20px;">

                    <i class="fas fa-sign-in-alt"></i> <span id="loginBtnText">Войти</span>

                </button>

            </form>



            <form class="auth-form" id="registerForm">

                <div class="form-group">

                    <label for="registerName" id="registerNameLabel">Имя</label>

                    <input type="text" id="registerName" required>

                </div>



                <div class="form-group">

                    <label for="registerEmail" id="registerEmailLabel">Email</label>

                    <input type="email" id="registerEmail" required>

                </div>



                <div class="form-group">

                    <label for="registerPassword" id="registerPasswordLabel">Пароль</label>

                    <input type="password" id="registerPassword" required>

                </div>



                <div class="form-group">

                    <label for="registerConfirmPassword" id="registerConfirmLabel">Подтвердите пароль</label>

                    <input type="password" id="registerConfirmPassword" required>

                </div>



                <button type="submit" class="btn" id="registerBtn" style="width: 100%; margin-top: 20px;">

                    <i class="fas fa-user-plus"></i> <span id="registerBtnText">Зарегистрироваться</span>

                </button>

            </form>

        </div>

    </div>



    <!-- Личный кабинет -->

    <div class="dashboard-modal" id="dashboardModal">

        <div class="dashboard-content">

            <div class="dashboard-header">

                <h3 id="dashboardTitle">Личный кабинет</h3>

                <button class="btn btn-outline" id="closeDashboardModal">

                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg> <span id="dashboardClose">Закрыть</span>

                </button>

            </div>



            <div class="dash-tabs">

                <button class="dash-tab active" data-tab="overview" id="tabOverview">Аккаунт</button>

                <button class="dash-tab" data-tab="biometrics" id="tabBiometrics">Биометрия</button>

                <button class="dash-tab" data-tab="analyses" id="tabAnalyses">Анализы</button>

                <button class="dash-tab" data-tab="diets" id="tabDiets">Рационы</button>

                <button class="dash-tab" data-tab="ai-detector" id="tabAIDetector">ИИ Детектор</button>

                <button class="dash-tab" data-tab="telegram" id="tabTelegram">Телеграм</button>

            </div>



            <div class="dash-panel active" id="tab-overview">

                <div class="dash-stars"></div>

                <div class="dash-comet"></div>

                <div class="dash-orbit"></div>

                <div class="dash-orbit second"></div>

                <div class="dash-orbit third"></div>

                <div class="dash-rocket"><i class="fas fa-rocket"></i></div>

                <div id="userInfo">

                    <h4 id="welcomeTitle">Добро пожаловать, <span id="userName"></span>!</h4>

                    <p id="userEmailLabelText">Ваш email: <span id="userEmail"></span></p>

                    <p id="userRegDateLabel">Дата регистрации: <span id="userRegDate"></span></p>

                    <p id="totalDietsLabel">Всего сохранённых рационов: <span id="totalDiets">0</span></p>

                </div>



                <div class="dash-section">

                    <h4 id="accountManageTitle">Управление аккаунтом</h4>

                    <div class="dash-actions">

                        <div class="dash-action" id="actChangePass"><svg width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" style="vertical-align:middle;margin-right:6px">
                                <path
                                    d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" />
                            </svg>Сменить пароль</div>

                        <div class="dash-action" id="actEditProfile"><svg width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" style="vertical-align:middle;margin-right:6px">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                            </svg>Редактировать профиль</div>

                        <div class="dash-action" id="actLanguage"><svg width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" style="vertical-align:middle;margin-right:6px">
                                <circle cx="12" cy="12" r="10" />
                                <line x1="2" y1="12" x2="22" y2="12" />
                                <path
                                    d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                            </svg>Язык</div>

                    </div>

                </div>



                <div class="dash-section">

                    <h4 id="integrationTitle">Интеграция и сервисы</h4>

                    <div class="dash-grid">

                        <div class="dash-card">

                            <h4 id="exportDataTitle">Экспорт данных</h4>

                            <p class="dash-muted" id="exportDataDesc">Скачать вашу информацию</p>

                        </div>

                    </div>

                </div>



                <div class="dash-section" style="text-align: center;">

                    <button class="btn" id="logoutBtn">

                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            style="vertical-align:middle;margin-right:6px">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <polyline points="16 17 21 12 16 7" />
                            <line x1="21" y1="12" x2="9" y2="12" />
                        </svg> <span id="logoutText">Выход</span>

                    </button>

                </div>

            </div>

            <div class="dash-panel" id="tab-biometrics">

                <div class="dash-stars"></div>

                <div class="dash-comet"></div>

                <div class="dash-orbit"></div>

                <div class="dash-orbit second"></div>

                <div class="dash-rocket">
                    <img class="dash-rocket-icon" src="https://api.iconify.design/mdi/rocket-launch.svg?color=%2300d9ff"
                        alt="">
                </div>

                <h4 id="dashBioTitle">Параметры и биометрия</h4>

                <div class="dash-grid">

                    <div class="dash-card">

                        <h4 id="latestBioTitle">Последние параметры</h4>

                        <div id="latestBio" class="dash-muted">Нет данных</div>

                    </div>

                    <div class="dash-card">

                        <h4 id="latestMissionTitle">Профиль миссии</h4>

                        <div id="latestMission" class="dash-muted">Нет данных</div>

                    </div>

                </div>

                <div style="margin-top: 20px;">

                    <h4 id="historyBioTitle">История параметров</h4>

                    <div class="history-list" id="bioHistory">

                        <!-- Биометрия будет загружаться здесь -->

                    </div>

                </div>

            </div>



            <div class="dash-panel" id="tab-analyses">

                <div class="dash-stars"></div>

                <div class="dash-comet"></div>

                <div class="dash-orbit"></div>

                <div class="dash-orbit second"></div>

                <div class="dash-rocket">
                    <img class="dash-rocket-icon" src="https://api.iconify.design/mdi/rocket-launch.svg?color=%2300d9ff"
                        alt="">
                </div>

                <h4 id="dashAnalysisTitle">История анализов и рационов</h4>

                <div class="history-list" id="dietHistory">

                    <!-- История будет загружаться здесь -->

                </div>

            </div>

            <div class="dash-panel" id="tab-diets">

                <div class="dash-stars"></div>

                <div class="dash-comet"></div>

                <div class="dash-orbit"></div>

                <div class="dash-rocket">
                    <img class="dash-rocket-icon"
                        src="https://api.iconify.design/mdi/food-fork-drink.svg?color=%2300d9ff" alt="">
                </div>

                <h4 style="color: #00d9ff; margin-bottom: 20px; font-size: 1.4rem;">Мои рационы</h4>

                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;"
                    id="dietsContainer">
                    <!-- Рационы будут загружаться здесь -->
                </div>

                <p id="emptyDietsText" style="text-align: center; padding: 30px; font-size: 1.1rem;"
                    class="dynamic-text">
                    😋 У вас ещё нет созданных рационов. <br>
                    <a href="diet-builder.html" class="dynamic-link"
                        style="text-decoration: none; font-weight: 600;">Создайте первый рацион →</a>
                </p>

            </div>

            <div class="dash-panel" id="tab-ai-detector">

                <div class="dash-stars"></div>

                <div class="dash-comet"></div>

                <div class="dash-orbit"></div>

                <div class="dash-rocket"><i class="fas fa-robot"></i></div>

                <div class="detector-space-bg">
                    <div class="detector-space-particle"></div>
                    <div class="detector-space-particle"></div>
                    <div class="detector-space-particle"></div>
                    <div class="detector-space-particle"></div>
                    <div class="detector-space-particle"></div>
                </div>

                <div style="position: relative; z-index: 2;">
                    <h4 id="dashDetectorTitle"
                        style="background: linear-gradient(135deg, #00d9ff 0%, #7b3dff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 15px; font-size: 2.2rem;">
                        <img class="inline-api-icon"
                            src="https://api.iconify.design/mdi/robot-outline.svg?color=%2300d9ff" alt=""
                            style="font-size: 2.5rem; margin-right: 8px;">
                        ИИ Детектор YOLOv8
                    </h4>

                    <p id="detectorDesc" class="dash-muted" style="margin-bottom: 30px; font-size: 1.15rem;">
                        Детектирование объектов в реальном времени через камеру</p>

                    <!-- Переключатель моделей детекторов -->
                    <div class="detector-models-selector" id="detectorModelsSelector">
                        <div class="detector-model-card active" data-model="can_defect">
                            <img class="detector-model-icon"
                                src="https://api.iconify.design/mdi/bottle-wine.svg?color=%2300d9ff" alt="">
                            <div class="detector-model-name">CanDefect Detector</div>
                            <div class="detector-model-description">Дефекты в консервных банках</div>
                        </div>
                        <div class="detector-model-card" data-model="mold_detector">
                            <img class="detector-model-icon"
                                src="https://api.iconify.design/mdi/biohazard.svg?color=%2300d9ff" alt="">
                            <div class="detector-model-name">Mold Detector</div>
                            <div class="detector-model-description">Плесень и загрязнения</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">

                        <div>

                            <h5 id="detectorVideoTitle"
                                style="color: #00d9ff; text-shadow: 0 0 10px rgba(0, 217, 255, 0.5); margin-bottom: 20px; font-size: 1.4rem;">
                                <img class="inline-api-icon"
                                    src="https://api.iconify.design/mdi/camera-outline.svg?color=%2300d9ff" alt=""
                                    style="font-size: 2rem;">
                                Видеопоток
                            </h5>

                            <div id="detectorContainer"
                                style="position: relative; width: 100%; aspect-ratio: 4/3; background: rgba(255, 255, 255, 0.05); border-radius: 20px; overflow: hidden; border: 3px solid rgba(0, 217, 255, 0.5); box-shadow: 0 0 25px rgba(0, 217, 255, 0.4), inset 0 0 25px rgba(123, 61, 255, 0.15); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">

                                <video id="detectorVideo" style="width: 100%; height: 100%; display: none;"></video>

                                <canvas id="detectorCanvas" style="width: 100%; height: 100%; display: block;"></canvas>

                            </div>

                            <div style="display: flex; gap: 15px; margin-top: 22px;">

                                <button id="detectorStart" class="detector-btn detector-btn-play"
                                    style="flex: 1; padding: 16px; font-size: 1.1rem;">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"
                                        style="vertical-align:middle;margin-right:6px">
                                        <polygon points="5 3 19 12 5 21 5 3" />
                                    </svg> Запустить
                                </button>

                                <button id="detectorStop" class="detector-btn detector-btn-stop"
                                    style="flex: 1; padding: 16px; font-size: 1.1rem;">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"
                                        style="vertical-align:middle;margin-right:6px">
                                        <rect x="4" y="4" width="16" height="16" rx="2" />
                                    </svg> Остановить
                                </button>

                            </div>

                        </div>

                        <div>

                            <h5 id="detectorResultsTitle"
                                style="color: #00d9ff; text-shadow: 0 0 10px rgba(0, 217, 255, 0.5); margin-bottom: 20px; font-size: 1.4rem;">
                                <img class="inline-api-icon"
                                    src="https://api.iconify.design/mdi/chart-box-outline.svg?color=%2300d9ff" alt=""
                                    style="font-size: 2rem;">
                                Результаты
                            </h5>

                            <div id="detectorResults"
                                style="background: rgba(255, 255, 255, 0.06); border: 3px solid rgba(0, 217, 255, 0.4); border-radius: 16px; padding: 22px; height: 280px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 1.05rem; box-shadow: 0 0 20px rgba(0, 217, 255, 0.25), inset 0 0 20px rgba(0, 217, 255, 0.1); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">

                                <p style="color: #aaa; font-size: 1.05rem;">
                                    <img class="detector-status-icon"
                                        src="https://api.iconify.design/mdi/timer-sand.svg?color=%23aaaaaa" alt="">
                                    Готово к использованию
                                </p>

                            </div>

                            <button id="detectorSaveSession" class="detector-btn detector-btn-save"
                                style="width: 100%; margin-top: 18px; padding: 16px; font-size: 1.1rem;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                    style="vertical-align:middle;margin-right:6px">
                                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                                    <polyline points="17 21 17 13 7 13 7 21" />
                                    <polyline points="7 3 7 8 15 8" />
                                </svg> Сохранить сессию
                            </button>

                        </div>

                    </div>

                    <h5 id="detectorHistoryTitle"
                        style="color: #00d9ff; text-shadow: 0 0 10px rgba(0, 217, 255, 0.5); margin-top: 35px; margin-bottom: 20px; font-size: 1.4rem;">
                        <img class="inline-api-icon" src="https://api.iconify.design/mdi/history.svg?color=%2300d9ff"
                            alt="" style="font-size: 2rem;">
                        История сессий
                    </h5>

                    <div id="detectorSessions"
                        style="background: rgba(255, 255, 255, 0.06); border: 3px solid rgba(0, 217, 255, 0.3); border-radius: 14px; padding: 20px; max-height: 280px; overflow-y: auto; box-shadow: inset 0 0 20px rgba(0, 217, 255, 0.1); font-size: 1.05rem; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);">

                        <p id="detectorHistoryEmpty" style="color: #666; text-align: center; font-size: 1.1rem;">История
                            пуста</p>

                    </div>
                </div>

            </div>

            <div class="dash-panel" id="tab-telegram">

                <div class="dash-stars"></div>

                <div class="dash-comet"></div>

                <div class="dash-orbit"></div>

                <div class="dash-rocket"><i class="fas fa-rocket"></i></div>

                <h4 id="tgTitle">Телеграм</h4>

                <div class="dash-grid">

                    <div class="dash-card">

                        <h4 id="tgStatusTitle">Статус</h4>

                        <p id="tgStatus" class="dash-muted">Не подключено</p>

                    </div>

                    <div class="dash-card">

                        <h4 id="tgCommandsTitle">Команды</h4>

                        <p class="dash-muted" id="tgCommandsList">/start, /bio, /diet</p>

                    </div>

                </div>

                <div class="dash-actions" style="margin-top: 10px;">

                    <div class="dash-action" id="tgCheck"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            style="vertical-align:middle;margin-right:6px">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2" />
                        </svg>Проверить статус</div>

                    <div class="dash-action" id="tgTest"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            style="vertical-align:middle;margin-right:6px">
                            <line x1="22" y1="2" x2="11" y2="13" />
                            <polygon points="22 2 15 22 11 13 2 9 22 2" />
                        </svg>Отправить тест</div>

                </div>

                <div class="dash-card" style="margin-top: 10px;">

                    <p id="tgHint">В Telegram найдите <strong><a href="https://t.me/CosmoDietAI_bot" target="_blank"
                                style="color: #00d9ff; text-decoration: none; border-bottom: 1px solid #00d9ff; transition: all 0.3s;">@CosmoDietAI_bot</a></strong>,
                        чтобы привязать email и рацион.</p>

                </div>

            </div>

        </div>

        <!-- МОДАЛЬНЫЕ ОКНА ФУНКЦИОНАЛЬНОСТИ -->

        <!-- Модаль: Смена пароля -->
        <!-- Модаль: Сменить пароль -->
        <div id="modalChangePassword" class="modal-account">
            <div class="modal-overlay"></div>
            <div class="modal-content account-modal-content">
                <div class="modal-header">
                    <h3><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 1v6m4-2l-4 4m4 4h6m-8-6h-4m0 8v2m0 4v2" />
                        </svg> Сменить пароль</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body account-modal-body">
                    <div class="account-form-group">
                        <input type="password" placeholder="Текущий пароль" class="account-input">
                    </div>
                    <div class="account-form-group">
                        <input type="password" placeholder="Новый пароль" class="account-input">
                    </div>
                    <div class="account-form-group">
                        <input type="password" placeholder="Подтвердить пароль" class="account-input">
                    </div>
                    <button class="account-btn-submit">Сохранить</button>
                </div>
            </div>
        </div>

        <!-- Модаль: Редактирование профиля -->
        <div id="modalEditProfile" class="modal-account">
            <div class="modal-overlay"></div>
            <div class="modal-content account-modal-content">
                <div class="modal-header">
                    <h3><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 3a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" />
                        </svg> Редактировать профиль</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body account-modal-body">
                    <div class="account-form-group">
                        <input type="text" placeholder="Полное имя" class="account-input">
                    </div>
                    <div class="account-form-group">
                        <input type="email" placeholder="Email" class="account-input">
                    </div>
                    <div class="account-form-group">
                        <input type="text" placeholder="Профессия" class="account-input">
                    </div>
                    <button class="account-btn-submit">Сохранить</button>
                </div>
            </div>
        </div>

        <!-- Модаль: Выбор языка -->
        <div id="modalLanguage" class="modal-account">
            <div class="modal-overlay"></div>
            <div class="modal-content account-modal-content">
                <div class="modal-header">
                    <h3><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path
                                d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                        </svg> Выбор языка</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body account-modal-body language-options">
                    <button class="language-option" data-lang="kz">
                        <span class="lang-flag">🇰🇿</span>
                        <span class="lang-name">Қазақша</span>
                    </button>
                    <button class="language-option" data-lang="ru">
                        <span class="lang-flag">🇷🇺</span>
                        <span class="lang-name">Русский</span>
                    </button>
                    <button class="language-option" data-lang="en">
                        <span class="lang-flag">🇺🇸</span>
                        <span class="lang-name">English</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Модаль: Экспорт данных -->
        <div id="modalExportData" class="modal-account">
            <div class="modal-overlay"></div>
            <div class="modal-content account-modal-content">
                <div class="modal-header">
                    <h3><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />
                        </svg> Экспорт ваших данных</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body account-modal-body">
                    <p class="export-format-label">Выберите формат:</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="export-btn" data-format="csv">CSV</button>
                        <button class="export-btn" data-format="json">JSON</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Модаль: Просмотр анализа -->
        <div id="modalViewAnalysis" class="modal-account">
            <div class="modal-overlay"></div>
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h3><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 3v18h18" />
                            <path d="M18 17V9M13 17v-4M8 17v-1" />
                        </svg> Подробный анализ</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="analysisContent">
                    <div class="analysis-stats">
                        <div class="stat-box">
                            <div class="stat-label">Общая энергия</div>
                            <div class="stat-value">2450 ккал</div>
                            <div class="stat-bar">
                                <div class="stat-progress" style="width: 78%;"></div>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Белки</div>
                            <div class="stat-value">125г</div>
                            <div class="stat-bar">
                                <div class="stat-progress" style="width: 85%;"></div>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Жиры</div>
                            <div class="stat-value">78г</div>
                            <div class="stat-bar">
                                <div class="stat-progress" style="width: 70%;"></div>
                            </div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Углеводы</div>
                            <div class="stat-value">310г</div>
                            <div class="stat-bar">
                                <div class="stat-progress" style="width: 82%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>



    <!-- Шапка -->

    <header>

        <div class="container header-container">

            <a href="#" class="logo">

                <i class="fas fa-rocket"></i> COSMODIET

            </a>



            <nav>

                <ul>

                    <li><a href="#home">Главная</a></li>

                    <li><a href="#problem">Проблема</a></li>

                    <li><a href="#solution">Решение</a></li>

                    <li><a href="#how-it-works">Как работает</a></li>

                    <li><a href="#sublimation">Сублимация</a></li>

                    <li><a href="#calculator">Калькулятор</a></li>

                    <li><a href="#team">Команда</a></li>

                </ul>

            </nav>



            <div class="header-controls">

                <button class="theme-toggle" id="themeToggle" title="Сменить тему">

                    <i class="fas fa-moon"></i>

                </button>

                <div class="language-dropdown">

                    <button class="language-toggle" id="languageToggle" title="Сменить язык">

                        <i class="fas fa-globe"></i>

                    </button>

                    <div class="language-menu" id="languageMenu">

                        <div class="language-option active" data-lang="ru">

                            <img src="https://flagcdn.com/ru.svg" alt="Русский" class="language-flag">

                            Русский

                        </div>

                        <div class="language-option" data-lang="en">

                            <img src="https://flagcdn.com/us.svg" alt="English" class="language-flag">

                            English

                        </div>

                        <div class="language-option" data-lang="kz">

                            <img src="https://flagcdn.com/kz.svg" alt="Қазақша" class="language-flag">

                            Қазақша

                        </div>

                    </div>

                </div>

                <button class="auth-btn" id="authBtn" title="Войти">

                    <i class="fas fa-user"></i>

                    <span>Войти</span>

                </button>

                <button class="mobile-menu-btn" id="mobileMenuBtn">

                    <i class="fas fa-bars"></i>

                </button>

            </div>

        </div>



        <!-- Мобильное меню -->

        <div class="mobile-menu" id="mobileMenu">

            <ul>

                <li><a href="#home">Главная</a></li>

                <li><a href="#problem">Проблема</a></li>

                <li><a href="#solution">Решение</a></li>

                <li><a href="#how-it-works">Как работает</a></li>

                <li><a href="#sublimation">Сублимация</a></li>

                <li><a href="#calculator">Калькулятор</a></li>

                <li><a href="#team">Команда</a></li>

            </ul>

        </div>

    </header>



    <!-- Hero блок -->

    <section class="hero" id="home">

        <div class="hero-bg"></div>

        <div id="particles-js"></div>



        <div class="container">

            <div class="hero-content">

                <h1 class="fade-in">CosmoDiet — персонализированное питание для космоса</h1>

                <p class="hero-subtitle fade-in">

                    Искусственный интеллект, биометрия и сублимированные продукты для здоровья космонавтов

                </p>

                <div class="hero-buttons fade-in">

                    <a href="#calculator" class="btn floating">Рассчитать рацион</a>

                    <a href="#how-it-works" class="btn btn-outline">Как это работает</a>

                </div>

            </div>

        </div>

    </section>



    <!-- Проблема -->

    <section id="problem">

        <div class="container">

            <h2>Проблема стандартизированного питания в космосе</h2>

            <p style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Традиционные подходы к питанию
                космонавтов не учитывают индивидуальные потребности организма в условиях микрогравитации, что приводит к
                серьезным проблемам со здоровьем и снижению эффективности миссий.</p>



            <div class="card-grid">

                <div class="card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-utensils"></i>

                    </div>

                    <h3>Стандартизированное питание</h3>

                    <p>Одинаковый рацион для всех космонавтов не учитывает индивидуальные особенности организма,
                        метаболизма и физической активности, что снижает эффективность питания на 30-40%.</p>

                </div>



                <div class="card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-bone"></i>

                    </div>

                    <h3>Потеря мышц и костной ткани</h3>

                    <p>В условиях микрогравитации космонавты теряют до 1-2% костной массы и 20% мышечной массы в месяц,
                        что требует специального питания для компенсации.</p>

                </div>



                <div class="card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-weight"></i>

                    </div>

                    <h3>Повышенные нагрузки</h3>

                    <p>Космические миссии требуют максимальной производительности, а неоптимальное питание снижает
                        работоспособность на 15-30%, увеличивая риски выполнения задач.</p>

                </div>



                <div class="card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-exclamation-triangle"></i>

                    </div>

                    <h3>Риски для миссий</h3>

                    <p>Неправильное питание увеличивает риск медицинских проблем, что ставит под угрозу успех длительных
                        миссий к Марсу и другим планетам.</p>

                </div>

            </div>

        </div>

    </section>



    <!-- Решение -->

    <section id="solution">

        <div class="container">

            <h2>Решение — CosmoDiet</h2>

            <p style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Интеллектуальная система
                персонализированного питания для космических миссий на основе ИИ и биометрических данных</p>



            <div class="workflow">

                <div class="workflow-step fade-in">

                    <div class="step-number">1</div>

                    <h3>Данные</h3>

                    <p>Сбор биометрических показателей космонавта: вес, рост, возраст, пульс, активность, генетические
                        маркеры и метаболические особенности.</p>

                </div>



                <div class="workflow-step fade-in">

                    <div class="step-number">2</div>

                    <h3>AI-анализ</h3>

                    <p>Искусственный интеллект анализирует данные и прогнозирует потребности организма в условиях
                        микрогравитации с точностью 95%.</p>

                </div>



                <div class="workflow-step fade-in">

                    <div class="step-number">3</div>

                    <h3>Персональный рацион</h3>

                    <p>Формирование индивидуального плана питания с точным балансом БЖУ, витаминов, микроэлементов и
                        биологически активных веществ.</p>

                </div>



                <div class="workflow-step fade-in">

                    <div class="step-number">4</div>

                    <h3>Здоровый экипаж</h3>

                    <p>Поддержание оптимальной физической формы, снижение усталости на 40% и максимальная
                        производительность на протяжении всей миссии.</p>

                </div>

            </div>

        </div>

    </section>



    <!-- Как работает система -->

    <section id="how-it-works">

        <div class="container">

            <h2>Как работает система</h2>

            <p style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Шестиэтапный процесс создания
                персонализированного рациона для космических миссий</p>



            <div class="card-grid">

                <div class="card fade-in">

                    <h3>1. Ввод данных</h3>

                    <p>Космонавт вводит свои биометрические данные: рост, вес, возраст, уровень активности, длительность
                        полёта, генетические показатели и другие параметры через интуитивный интерфейс.</p>

                </div>



                <div class="card fade-in">

                    <h3>2. AI-анализ физиологии</h3>

                    <p>Нейросеть анализирует данные и прогнозирует метаболические потребности в условиях микрогравитации
                        с учетом стресс-факторов космического полета.</p>

                </div>



                <div class="card fade-in">

                    <h3>3. Расчёт питания</h3>

                    <p>Система рассчитывает оптимальную калорийность, баланс белков, жиров, углеводов, витаминов и
                        микроэлементов с поправкой на условия космического полета.</p>

                </div>



                <div class="card fade-in">

                    <h3>4. Подбор продуктов</h3>

                    <p>Автоматический подбор сублимированных продуктов, соответствующих расчётным требованиям, с учетом
                        вкусовых предпочтений космонавта.</p>

                </div>



                <div class="card fade-in">

                    <h3>5. Готовый рацион</h3>

                    <p>Формирование полного рациона на весь период полёта с ежедневным меню, инструкциями по
                        приготовлению и графиком приема пищи.</p>

                </div>



                <div class="card fade-in">

                    <h3>6. Мониторинг и коррекция</h3>

                    <p>Непрерывный мониторинг состояния космонавта и автоматическая коррекция рациона в реальном времени
                        по мере изменения условий.</p>

                </div>

            </div>

        </div>

    </section>



    <!-- Сублимация -->

    <section id="sublimation">

        <div class="container">

            <h2>Технология сублимации</h2>

            <p style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Современная технология сублимационной
                сушки сохраняет питательные вещества и обеспечивает длительное хранение продуктов в условиях космоса</p>



            <div class="sublimation-animation">

                <div class="sublimation-item fade-in">

                    <div class="sublimation-icon">

                        <i class="fas fa-seedling"></i>

                    </div>

                    <h3>Сохранение питательных веществ</h3>

                    <p>Технология сохраняет 90–95% витаминов, минералов и биологически активных веществ в продуктах.</p>

                </div>



                <div class="sublimation-item fade-in">

                    <div class="sublimation-icon">

                        <i class="fas fa-weight-hanging"></i>

                    </div>

                    <h3>Минимальный вес и объём</h3>

                    <p>Сублимированные продукты в 5-10 раз легче и занимают в 3-7 раз меньше места по сравнению с
                        обычными.</p>

                </div>



                <div class="sublimation-item fade-in">

                    <div class="sublimation-icon">

                        <i class="fas fa-calendar-alt"></i>

                    </div>

                    <h3>Длительный срок хранения</h3>

                    <p>Продукты сохраняют свои свойства до 25 лет без потери качества и питательной ценности.</p>

                </div>



                <div class="sublimation-item fade-in">

                    <div class="sublimation-icon">

                        <i class="fas fa-shield-alt"></i>

                    </div>

                    <h3>Безопасность в микрогравитации</h3>

                    <p>Специальная упаковка предотвращает распространение крошек и жидкости в условиях невесомости.</p>

                </div>

            </div>



            <div style="margin-top: 60px;">

                <h3 id="benefitsTitle" style="text-align: center; margin-bottom: 30px;">Преимущества для космических
                    миссий</h3>

                <div class="benefits-grid">

                    <div class="benefit-card fade-in">

                        <div class="benefit-icon">

                            <i class="fas fa-heartbeat"></i>

                        </div>

                        <div>

                            <h4 id="benefitAstronautsTitle">Для космонавтов</h4>

                            <ul>

                                <li id="benefitAst1">Поддержание оптимальной физической формы</li>

                                <li id="benefitAst2">Снижение усталости на 40%</li>

                                <li id="benefitAst3">Быстрое восстановление после нагрузок</li>

                                <li id="benefitAst4">Индивидуальный подход к питанию</li>

                            </ul>

                        </div>

                    </div>



                    <div class="benefit-card fade-in">

                        <div class="benefit-icon">

                            <i class="fas fa-rocket"></i>

                        </div>

                        <div>

                            <h4 id="benefitMissionsTitle">Для миссий</h4>

                            <ul>

                                <li id="benefitMis1">Экономия ресурсов и пространства</li>

                                <li id="benefitMis2">Минимизация медицинских рисков</li>

                                <li id="benefitMis3">Точный контроль питания экипажа</li>

                                <li id="benefitMis4">Повышение надежности миссий</li>

                            </ul>

                        </div>

                    </div>

                </div>

            </div>

            <div style="margin-top: 50px; text-align: center;">

                <a href="diet-builder.html" class="btn" id="createDietBtn"
                    style="display: inline-block; padding: 16px 40px; background: linear-gradient(135deg, #00d9ff, #7b3dff); color: white; border-radius: 10px; text-decoration: none; font-weight: 600; transition: all 0.3s; box-shadow: 0 12px 30px rgba(0, 217, 255, 0.35);">

                    <i class="fas fa-utensils"></i> Создать свой рацион

                </a>

            </div>

        </div>

    </section>



    <!-- AI & Data -->

    <section id="ai-data">

        <div class="container">

            <h2 id="aiTitle">Искусственный интеллект и анализ данных</h2>

            <p id="aiDesc" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Мощные алгоритмы машинного
                обучения анализируют биометрические данные в реальном времени для оптимального планирования питания</p>



            <div class="ai-dashboard fade-in">

                <div class="dashboard-header">

                    <h3 id="aiDashboardTitle">Панель мониторинга CosmoDiet AI</h3>

                    <div class="btn btn-outline" id="aiRefreshBtn" style="padding: 10px 20px;">

                        <i class="fas fa-sync-alt"></i> Обновить данные

                    </div>

                </div>



                <div class="dashboard-stats">

                    <div class="stat-item">

                        <div class="stat-value" id="aiStat1Value">95%</div>

                        <div id="aiStat1Label">Точность прогнозирования</div>

                    </div>



                    <div class="stat-item">

                        <div class="stat-value" id="aiStat2Value">24/7</div>

                        <div id="aiStat2Label">Мониторинг в реальном времени</div>

                    </div>



                    <div class="stat-item">

                        <div class="stat-value" id="aiStat3Value">100+</div>

                        <div id="aiStat3Label">Биометрических параметров</div>

                    </div>



                    <div class="stat-item">

                        <div class="stat-value" id="aiStat4Value">0.1с</div>

                        <div id="aiStat4Label">Время анализа данных</div>

                    </div>

                </div>



                <div style="margin-top: 40px; text-align: center;">

                    <p id="aiDashboardDesc">Система анализирует данные с носимых устройств, медицинских датчиков и
                        биометрических сканеров для создания динамического профиля питания</p>

                </div>

            </div>

        </div>

    </section>



    <!-- Калькулятор -->

    <section id="calculator">

        <div class="container">

            <h2>Интерактивный калькулятор рациона</h2>

            <p style="text-align: center; margin-bottom: 30px;">Рассчитайте персональный рацион для космической миссии
                на основе ваших индивидуальных параметров</p>



            <div class="calculator fade-in">

                <form class="calculator-form" id="dietCalculator">

                    <div class="form-group">

                        <label for="height">Рост (см)</label>

                        <input type="number" id="height" min="150" max="220" value="180" required>

                    </div>



                    <div class="form-group">

                        <label for="weight">Вес (кг)</label>

                        <input type="number" id="weight" min="50" max="120" value="75" required>

                    </div>



                    <div class="form-group">

                        <label for="age">Возраст</label>

                        <input type="number" id="age" min="18" max="65" value="35" required>

                    </div>



                    <div class="form-group">

                        <label for="activity">Уровень активности</label>

                        <select id="activity" required>

                            <option value="1.2">Низкая (офисная работа)</option>

                            <option value="1.375" selected>Средняя (тренировки 3-4 раза в неделю)</option>

                            <option value="1.55">Высокая (ежедневные тренировки)</option>

                            <option value="1.725">Очень высокая (профессиональный спорт)</option>

                        </select>

                    </div>



                    <div class="form-group">

                        <label for="pulse">Средний пульс (уд/мин)</label>

                        <input type="number" id="pulse" min="50" max="100" value="72" required>

                    </div>



                    <div class="form-group">

                        <label for="missionDuration">Длительность миссии (дни)</label>

                        <input type="number" id="missionDuration" min="1" max="365" value="90" required>

                    </div>



                    <div class="form-group">

                        <label for="gravity">Уровень гравитации</label>

                        <select id="gravity" required>

                            <option value="1">Микрогравитация (космос)</option>

                            <option value="0.9">Лунная (0.16g)</option>

                            <option value="0.8">Марсианская (0.38g)</option>

                        </select>

                    </div>



                    <div class="form-group">

                        <label for="stressLevel">Уровень стресса</label>

                        <select id="stressLevel" required>

                            <option value="1">Низкий</option>

                            <option value="1.1" selected>Средний</option>

                            <option value="1.2">Высокий</option>

                        </select>

                    </div>

                </form>



                <button type="button" class="btn" id="calculateBtn" style="width: 100%;">

                    <i class="fas fa-calculator"></i> Рассчитать персональный рацион

                </button>



                <div class="calculator-result" id="calculatorResult">

                    <h3 style="text-align: center;">Ваш персональный рацион для космической миссии</h3>

                    <div class="result-grid">

                        <div class="result-item">

                            <div class="result-value" id="calories">0</div>

                            <div id="caloriesUnit">Ккал в сутки</div>

                        </div>



                        <div class="result-item">

                            <div class="result-value" id="protein">0</div>

                            <div id="proteinUnit">Белки (г/сутки)</div>

                        </div>



                        <div class="result-item">

                            <div class="result-value" id="fat">0</div>

                            <div id="fatUnit">Жиры (г/сутки)</div>

                        </div>



                        <div class="result-item">

                            <div class="result-value" id="carbs">0</div>

                            <div id="carbUnit">Углеводы (г/сутки)</div>

                        </div>

                    </div>



                    <div style="margin-top: 30px;">

                        <h4 id="recommendedTitle">Рекомендуемые сублимированные продукты:</h4>

                        <ul id="recommendedFoods" style="list-style-type: none; columns: 2; margin-top: 15px;">

                            <!-- Динамически заполняется JavaScript -->

                        </ul>

                    </div>



                    <div style="margin-top: 30px;">

                        <h4 id="mealRecTitle">Рекомендации по приему пищи:</h4>

                        <p id="mealRec1">• 5-6 приемов пищи в день небольшими порциями</p>

                        <p id="mealRec2">• Основной прием пищи за 2-3 часа до физической нагрузки</p>

                        <p id="mealRec3">• Обязательный прием жидкости: 2-2.5 литра в день</p>

                        <p id="mealRec4">• Витаминные добавки принимать во время еды</p>

                    </div>



                    <div style="margin-top: 20px; text-align: center;">

                        <button class="btn btn-outline" id="exportBtn">

                            <i class="fas fa-download"></i> Экспортировать рацион в PDF

                        </button>

                        <button class="btn" id="saveBtn" style="margin-left: 15px;">

                            <i class="fas fa-save"></i> Сохранить в личном кабинете

                        </button>

                    </div>

                </div>

            </div>

        </div>

    </section>



    <!-- Личный кабинет и API -->

    <section id="account">

        <div class="container">

            <h2 id="featuresTitle">Дополнительные функции</h2>

            <p id="featuresSubtitle" style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Расширенные
                возможности для космических агентств и индивидуальных пользователей</p>



            <div class="account-features">

                <div class="feature-card fade-in">

                    <div class="card-icon">

                        <svg width="40" height="40" viewBox="0 0 24 24" fill="#00d9ff">
                            <path
                                d="M12 2a5 5 0 0 0-5 5v1a5 5 0 0 0 10 0V7a5 5 0 0 0-5-5zm0 2a3 3 0 0 1 3 3v1a3 3 0 1 1-6 0V7a3 3 0 0 1 3-3zM5 18a7 7 0 0 1 14 0v2H5v-2z" />
                            <circle cx="12" cy="2" r="1.5" />
                        </svg>

                    </div>

                    <h3 id="feature1Title">Личный кабинет космонавта</h3>

                    <p id="feature1Desc">Индивидуальный доступ к истории питания, рекомендациям, биометрическим данным и
                        планировщику рациона.</p>

                </div>



                <div class="feature-card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-file-pdf"></i>

                    </div>

                    <h3 id="feature2Title">Экспорт рациона</h3>

                    <p id="feature2Desc">Возможность экспортировать подробный план питания в форматах PDF, JSON или XML
                        для интеграции с другими системами.</p>

                </div>



                <div class="feature-card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-code"></i>

                    </div>

                    <h3 id="feature3Title">API для агентств</h3>

                    <p id="feature3Desc">Мощное API для интеграции системы CosmoDiet с существующими платформами
                        космических агентств.</p>

                </div>



                <div class="feature-card fade-in">

                    <div class="card-icon">

                        <i class="fas fa-tachometer-alt"></i>

                    </div>

                    <h3 id="feature4Title">Административная панель</h3>

                    <p id="crewControlText">Полный контроль над питанием экипажа, мониторинг состояния здоровья и
                        управление запасами продуктов.</p>

                </div>

            </div>

        </div>

    </section>



    <!-- Команда -->

    <section id="team">

        <div class="container">

            <h2 id="teamHeading">Наша команда экспертов</h2>

            <p id="teamSubheading" style="text-align: center; max-width: 800px; margin: 0 auto 50px;">Междисциплинарная
                команда специалистов в области космической медицины, диетологии, искусственного интеллекта и пищевых
                технологий</p>



            <div class="team-grid">

                <div class="team-member fade-in">

                    <div class="member-photo">

                        <i class="fas fa-robot"></i>

                    </div>

                    <h3 id="member1Name">Сали Динмухамет</h3>

                    <p id="member1Role">Frontend Developer</p>

                    <p id="member1Bio">Разрабатывает адаптивный интерфейс и UI проекта для демонстрации на хакатоне.</p>

                </div>



                <div class="team-member fade-in">

                    <div class="member-photo">

                        <i class="fas fa-dna"></i>

                    </div>

                    <h3 id="member2Name">Аскерулы Амир</h3>

                    <p id="member2Role">Dataset Engineer</p>

                    <p id="member2Bio">Готовит изображения, разметку и обучает YOLO-модели для анализа продуктов.</p>

                </div>



                <div class="team-member fade-in">

                    <div class="member-photo">

                        <i class="fas fa-user-md"></i>

                    </div>

                    <h3 id="member3Name">Матвейчук Матвей</h3>

                    <p id="member3Role">Backend Developer</p>

                    <p id="member3Bio">Интегрирует AI-модели, настраивает серверную часть и обработку результатов.</p>

                </div>



                <div class="team-member fade-in">

                    <div class="member-photo">

                        <i class="fas fa-utensils"></i>

                    </div>

                    <h3 id="member4Name">Рашидова Милара</h3>

                    <p id="member4Role">Team Lead</p>

                    <p id="member4Bio">Организует работу команды, отвечает за стратегию проекта и финальную презентацию.
                    </p>

                </div>

            </div>

        </div>

    </section>



    <!-- Футер -->

    <footer>

        <div class="container">

            <div class="footer-content">

                <div>

                    <a href="#" class="footer-logo">COSMODIET</a>

                    <p>Интеллектуальная система персонализированного питания для космических миссий нового поколения</p>

                    <div class="social-links">

                        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>

                        <a href="#" title="LinkedIn"><i class="fab fa-linkedin"></i></a>

                        <a href="#" title="GitHub"><i class="fab fa-github"></i></a>

                        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>

                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>

                    </div>

                </div>



                <div>

                    <h4 id="footerContactsTitle">Контакты</h4>

                    <p id="footerAddress"><i class="fas fa-map-marker-alt"></i> Москва, Звёздный бульвар, 12</p>

                    <p id="footerPhone"><i class="fas fa-phone"></i> +7 (495) 123-45-67</p>

                    <p id="footerEmail"><i class="fas fa-envelope"></i> info@cosmodiet.space</p>

                    <p id="footerHours"><i class="fas fa-clock"></i> Пн-Пт: 9:00-18:00</p>

                </div>



                <div>

                    <h4 id="footerPartnersTitle">Партнёры</h4>

                    <p id="partner1">Роскосмос</p>

                    <p id="partner2">NASA</p>

                    <p id="partner3">ESA (Европейское космическое агентство)</p>

                    <p id="partner4">SpaceX</p>

                    <p id="partner5">Blue Origin</p>

                </div>



                <div>

                    <h4 id="footerQuickTitle">Быстрые ссылки</h4>

                    <p><a id="quickHome" href="#home" style="color: inherit; text-decoration: none;">Главная</a></p>

                    <p><a id="quickProblem" href="#problem" style="color: inherit; text-decoration: none;">Проблема</a>
                    </p>

                    <p><a id="quickSolution" href="#solution" style="color: inherit; text-decoration: none;">Решение</a>
                    </p>

                    <p><a id="quickCalculator" href="#calculator"
                            style="color: inherit; text-decoration: none;">Калькулятор</a></p>

                    <p><a id="quickTeam" href="#team" style="color: inherit; text-decoration: none;">Команда</a></p>

                </div>

            </div>



            <div class="footer-bottom">

                <p>&copy; 2023 CosmoDiet. Все права защищены.</p>

                <p>Разработано для будущих космических миссий к Марсу и дальним планетам</p>

                <p style="margin-top: 10px; font-size: 0.9rem;">

                    <a href="#" id="privacyPolicyLink" style="color: inherit; margin-right: 15px;">Политика
                        конфиденциальности</a>

                    <a href="#" style="color: inherit; margin-right: 15px;">Условия использования</a>

                    <a href="#" style="color: inherit;">Карта сайта</a>

                </p>

            </div>

        </div>

    </footer>



    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <script>

        // Инициализация после загрузки страницы

        document.addEventListener('DOMContentLoaded', function () {

            // Проверка загрузки Font Awesome и fallback на Unicode иконки

            const iconApiMap = {
                'fa-rocket': 'https://api.iconify.design/mdi/rocket-launch.svg?color=%2300d9ff',
                'fa-user': 'https://api.iconify.design/mdi/account-circle-outline.svg?color=%2300d9ff',
                'fa-key': 'https://api.iconify.design/mdi/key-variant.svg?color=%2300d9ff',
                'fa-envelope': 'https://api.iconify.design/mdi/email-outline.svg?color=%2300d9ff',
                'fa-shield-alt': 'https://api.iconify.design/mdi/shield-check-outline.svg?color=%2300d9ff',
                'fa-user-edit': 'https://api.iconify.design/mdi/account-edit-outline.svg?color=%2300d9ff',
                'fa-bell': 'https://api.iconify.design/mdi/bell-outline.svg?color=%2300d9ff',
                'fa-language': 'https://api.iconify.design/mdi/translate.svg?color=%2300d9ff',
                'fa-globe': 'https://api.iconify.design/mdi/earth.svg?color=%2300d9ff',
                'fa-file-pdf': 'https://api.iconify.design/mdi/file-pdf-box.svg?color=%2300d9ff',
                'fa-code': 'https://api.iconify.design/mdi/code-tags.svg?color=%2300d9ff',
                'fa-chart-line': 'https://api.iconify.design/mdi/chart-line.svg?color=%2300d9ff',
                'fa-user-plus': 'https://api.iconify.design/mdi/account-plus-outline.svg?color=%2300d9ff',
                'fa-satellite-dish': 'https://api.iconify.design/mdi/satellite-variant.svg?color=%2300d9ff',
                'fa-paper-plane': 'https://api.iconify.design/mdi/send-outline.svg?color=%2300d9ff',
                'fa-user-md': 'https://api.iconify.design/mdi/stethoscope.svg?color=%2300d9ff',
                'fa-heart': 'https://api.iconify.design/mdi/heart-pulse.svg?color=%2300d9ff',
                'fa-star': 'https://api.iconify.design/mdi/star-outline.svg?color=%2300d9ff',
                'fa-moon': 'https://api.iconify.design/mdi/weather-night.svg?color=%239d4edd',
                'fa-sun': 'https://api.iconify.design/mdi/weather-sunny.svg?color=%23ffb703',
                'fa-robot': 'https://api.iconify.design/mdi/robot-outline.svg?color=%2300d9ff',
                'fa-user-astronaut': 'https://api.iconify.design/mdi/account-astronaut-outline.svg?color=%2300d9ff',
                'fa-utensils': 'https://api.iconify.design/mdi/silverware-fork-knife.svg?color=%2300d9ff',
                'fa-bone': 'https://api.iconify.design/mdi/bone.svg?color=%2300d9ff',
                'fa-weight': 'https://api.iconify.design/mdi/weight-kilogram.svg?color=%2300d9ff',
                'fa-exclamation-triangle': 'https://api.iconify.design/mdi/alert-outline.svg?color=%2300d9ff',
                'fa-seedling': 'https://api.iconify.design/mdi/sprout-outline.svg?color=%2300d9ff',
                'fa-weight-hanging': 'https://api.iconify.design/mdi/dumbbell.svg?color=%2300d9ff',
                'fa-calendar-alt': 'https://api.iconify.design/mdi/calendar-month-outline.svg?color=%2300d9ff',
                'fa-heartbeat': 'https://api.iconify.design/mdi/heart-pulse.svg?color=%2300d9ff',
                'fa-tachometer-alt': 'https://api.iconify.design/mdi/speedometer.svg?color=%2300d9ff',
                'fa-sync-alt': 'https://api.iconify.design/mdi/sync.svg?color=%2300d9ff',
                'fa-calculator': 'https://api.iconify.design/mdi/calculator-variant-outline.svg?color=%2300d9ff',
                'fa-save': 'https://api.iconify.design/mdi/content-save-outline.svg?color=%2300d9ff',
                'fa-dna': 'https://api.iconify.design/mdi/dna.svg?color=%2300d9ff',
                'fa-download': 'https://api.iconify.design/mdi/download.svg?color=%2300d9ff',
                'fa-eye': 'https://api.iconify.design/mdi/eye-outline.svg?color=%2300d9ff',
                'fa-check': 'https://api.iconify.design/mdi/check-circle-outline.svg?color=%2300d9ff',
                'fa-clock': 'https://api.iconify.design/mdi/clock-outline.svg?color=%2300d9ff',
                'fa-map-marker-alt': 'https://api.iconify.design/mdi/map-marker-outline.svg?color=%2300d9ff',
                'fa-phone': 'https://api.iconify.design/mdi/phone-outline.svg?color=%2300d9ff'
            };

            function applyApiIcon(icon, iconUrl, altText = '') {
                if (!icon || !iconUrl) return;
                const img = document.createElement('img');
                img.src = iconUrl;
                img.alt = altText;
                img.className = 'api-icon';
                img.loading = 'lazy';
                img.decoding = 'async';
                icon.textContent = '';
                icon.appendChild(img);
                icon.classList.add('icon-image');
            }

            // �������� �������� Font Awesome � fallback �� ������� SVG-������
            setTimeout(() => {
                const testIcon = document.createElement('i');
                testIcon.className = 'fas fa-rocket';
                testIcon.style.display = 'none';
                document.body.appendChild(testIcon);
                const computed = window.getComputedStyle(testIcon, ':before');
                const content = computed.content;
                document.body.removeChild(testIcon);

                if (!content || content === 'none' || content === '""') {
                    console.warn('Font Awesome �� ��������, ���������� ������ �� Iconify API');
                    document.querySelectorAll('i[class*="fa-"]').forEach(icon => {
                        const faClass = Array.from(icon.classList).find(cls => cls.startsWith('fa-'));
                        if (faClass && iconApiMap[faClass]) {
                            applyApiIcon(icon, iconApiMap[faClass]);
                        }
                    });
                }
            }, 100);

            function replaceMainPageIconsWithImages() {
                const icons = document.querySelectorAll('section i[class*="fa-"]');
                icons.forEach(icon => {
                    const faClass = Array.from(icon.classList).find(cls => cls.startsWith('fa-'));
                    if (!faClass || !iconApiMap[faClass]) return;

                    applyApiIcon(icon, iconApiMap[faClass]);
                    Array.from(icon.classList).forEach(cls => {
                        if (cls === 'fas' || cls === 'far' || cls === 'fab' || cls.startsWith('fa-')) {
                            icon.classList.remove(cls);
                        }
                    });
                });
            }

            setTimeout(replaceMainPageIconsWithImages, 120);

            // Скрытие лоадера

            setTimeout(() => {

                document.getElementById('loader').classList.add('hidden');

            }, 1500);



            // Инициализация частиц

            function initParticles(isLightTheme) {
                if (typeof window.particlesJS !== 'function') {
                    return;
                }

                if (window.pJSDom && window.pJSDom.length) {

                    window.pJSDom[0].pJS.canvas.el.remove();

                    window.pJSDom = [];

                }



                const particleColors = isLightTheme

                    ? ["#0d4698", "#1f6bff", "#3a86ff", "#ffffff"]

                    : ["#bfe9ff", "#6fc5ff", "#ffffff", "#4fa3ff"];



                const lineColor = isLightTheme ? "#1f6bff" : "#6fb9ff";

                const lineOpacity = isLightTheme ? 0.4 : 0.35;



                particlesJS('particles-js', {

                    particles: {

                        number: { value: 90, density: { enable: true, value_area: 850 } },

                        color: { value: particleColors },

                        shape: { type: "circle" },

                        opacity: {

                            value: 0.8,

                            random: true,

                            anim: { enable: true, speed: 0.6, opacity_min: 0.35, sync: false }

                        },

                        size: {

                            value: 3.8,

                            random: true,

                            anim: { enable: true, speed: 2.5, size_min: 1.6, sync: false }

                        },

                        line_linked: {

                            enable: true,

                            distance: 160,

                            color: lineColor,

                            opacity: lineOpacity,

                            width: 1

                        },

                        move: {

                            enable: true,

                            speed: 1.6,

                            direction: "none",

                            random: true,

                            straight: false,

                            out_mode: "out",

                            bounce: false

                        }

                    },

                    interactivity: {

                        detect_on: "window",

                        events: {

                            onhover: { enable: true, mode: "repulse" },

                            onclick: { enable: true, mode: "push" }

                        },

                        modes: {

                            repulse: { distance: 155, duration: 0.5 },

                            push: { particles_nb: 3 }

                        }

                    },

                    retina_detect: true

                });

            }



            initParticles(document.body.classList.contains('light-theme'));



            // Система аутентификации

            const authModal = document.getElementById('authModal');

            const dashboardModal = document.getElementById('dashboardModal');

            const authBtn = document.getElementById('authBtn');

            const closeAuthModal = document.getElementById('closeAuthModal');

            const closeDashboardModal = document.getElementById('closeDashboardModal');

            const authTabs = document.querySelectorAll('.auth-tab');

            const authForms = document.querySelectorAll('.auth-form');

            const loginForm = document.getElementById('loginForm');

            const registerForm = document.getElementById('registerForm');

            const logoutBtn = document.getElementById('logoutBtn');

            const saveBtn = document.getElementById('saveBtn');

            const dashTabs = document.querySelectorAll('.dash-tab');

            const dashPanels = document.querySelectorAll('.dash-panel');

            const tgStatus = document.getElementById('tgStatus');

            const tgCheck = document.getElementById('tgCheck');

            const tgTest = document.getElementById('tgTest');



            // Текущий пользователь (в реальном приложении это было бы на сервере)

            let currentUser = JSON.parse(localStorage.getItem('cosmodiet_user')) || null;

            let dietHistory = JSON.parse(localStorage.getItem('cosmodiet_history')) || [];

            let bioHistory = JSON.parse(localStorage.getItem('cosmodiet_bio_history')) || [];

            let authToken = localStorage.getItem('cosmodiet_token');

            // Гарантируем демо-пользователя, чтобы кнопка кабинета всегда открывала модалку
            if (!currentUser || !authToken) {
                currentUser = {
                    id: 'demo',
                    name: 'Тестовый Пользователь',
                    email: 'test@cosmodiet.ru',
                    regDate: '2024-01-15'
                };
                authToken = 'demo_token_12345';
                localStorage.setItem('cosmodiet_user', JSON.stringify(currentUser));
                localStorage.setItem('cosmodiet_token', authToken);
            }



            // Обновление кнопки входа/выхода

            function updateAuthButton() {

                if (currentUser) {

                    authBtn.innerHTML = `<i class="fas fa-user-astronaut"></i><span>${currentUser.name}</span>`;

                    authBtn.classList.add('full');

                    authBtn.setAttribute('title', 'Личный кабинет');

                } else {

                    authBtn.innerHTML = `<i class="fas fa-user"></i><span>Войти</span>`;

                    authBtn.classList.add('full');

                    authBtn.setAttribute('title', 'Войти');

                }

            }



            updateAuthButton();



            async function loadSession() {

                if (!authToken) return;

                try {

                    const res = await fetch('/api/me', {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify({ token: authToken })

                    });

                    if (!res.ok) return;

                    const data = await res.json();

                    currentUser = data.user;

                    localStorage.setItem('cosmodiet_user', JSON.stringify(currentUser));

                    updateAuthButton();

                } catch { }

            }



            loadSession();



            async function updateTelegramStatus() {

                if (!authToken || !tgStatus) return;

                try {

                    const res = await fetch('/api/telegram/status', {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify({ token: authToken })

                    });

                    if (!res.ok) return;

                    const data = await res.json();

                    tgStatus.textContent = data.linked ? 'Привязано' : 'Отвязано';

                    tgStatus.style.color = data.linked ? '#00d9ff' : '#ff5b5b';

                } catch { }

            }



            if (tgCheck) {

                tgCheck.addEventListener('click', updateTelegramStatus);

            }

            if (tgTest) {

                tgTest.addEventListener('click', async () => {

                    if (!authToken) return;

                    const res = await fetch('/api/telegram/test', {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify({ token: authToken })

                    });

                    if (res.ok) {

                        showNotification('Тестовое уведомление отправлено', 'success');

                    } else {

                        showNotification('Телеграм не привязан', 'warning');

                    }

                });

            }



            // Переключение вкладок личного кабинета

            dashTabs.forEach(tab => {

                tab.addEventListener('click', () => {

                    dashTabs.forEach(t => t.classList.remove('active'));

                    dashPanels.forEach(p => p.classList.remove('active'));

                    tab.classList.add('active');

                    const panel = document.getElementById(`tab-${tab.dataset.tab}`);

                    panel.classList.add('active');

                    panel.scrollTop = 0;

                });

            });



            // Открытие модального окна авторизации

            if (authBtn) authBtn.addEventListener('click', function (e) {

                e.preventDefault();

                e.stopPropagation();

                console.log('Auth button clicked, currentUser:', currentUser);

                if (currentUser) {

                    try {

                        openDashboard();

                    } catch (err) {

                        console.error('Error opening dashboard:', err);

                    }

                } else {

                    if (authModal) {

                        authModal.classList.add('active');

                        document.body.style.overflow = 'hidden';

                    }

                }

            });



            // Закрытие модального окна авторизации

            if (closeAuthModal) closeAuthModal.addEventListener('click', function () {

                authModal.classList.remove('active');

                document.body.style.overflow = 'auto';

            });



            // Закрытие модального окна личного кабинета

            closeDashboardModal.addEventListener('click', function () {

                dashboardModal.classList.remove('active');

                document.body.style.overflow = 'auto';

            });



            // Переключение между вкладками входа/регистрации

            authTabs.forEach(tab => {

                tab.addEventListener('click', function () {

                    const tabId = this.getAttribute('data-tab');



                    // Обновление активных вкладок

                    authTabs.forEach(t => t.classList.remove('active'));

                    this.classList.add('active');



                    // Показ соответствующей формы

                    authForms.forEach(form => {

                        form.classList.remove('active');

                        if (form.id === `${tabId}Form`) {

                            form.classList.add('active');

                        }

                    });

                });

            });



            // Обработка входа

            loginForm.addEventListener('submit', function (e) {

                e.preventDefault();



                const email = document.getElementById('loginEmail').value;

                const password = document.getElementById('loginPassword').value;



                fetch('/api/login', {

                    method: 'POST',

                    headers: { 'Content-Type': 'application/json' },

                    body: JSON.stringify({ email, password })

                }).then(async res => {

                    const data = await res.json();

                    if (!res.ok) {

                        showNotification(data.error || 'Ошибка входа', 'error');

                        return;

                    }

                    currentUser = data.user;

                    authToken = data.token;

                    localStorage.setItem('cosmodiet_user', JSON.stringify(currentUser));

                    localStorage.setItem('cosmodiet_token', authToken);

                    updateAuthButton();

                    authModal.classList.remove('active');

                    document.body.style.overflow = 'auto';

                    showNotification('Вы успешно вошли в систему', 'success');

                }).catch(() => {
                    showNotification('Не удалось подключиться к серверу', 'error');
                });

            });



            // Обработка регистрации

            registerForm.addEventListener('submit', function (e) {

                e.preventDefault();



                const name = document.getElementById('registerName').value;

                const email = document.getElementById('registerEmail').value;

                const password = document.getElementById('registerPassword').value;

                const confirmPassword = document.getElementById('registerConfirmPassword').value;



                if (password !== confirmPassword) {

                    showNotification('Пароли не совпадают', 'error');

                    return;

                }



                if (password.length < 6) {

                    showNotification('Пароль должен состоять не менее 6 символов', 'error');

                    return;

                }



                fetch('/api/register', {

                    method: 'POST',

                    headers: { 'Content-Type': 'application/json' },

                    body: JSON.stringify({ name, email, password })

                }).then(async res => {

                    const data = await res.json();

                    if (!res.ok) {

                        showNotification(data.error || 'Ошибка регистрации', 'error');

                        return;

                    }

                    currentUser = data.user;

                    authToken = data.token;

                    localStorage.setItem('cosmodiet_user', JSON.stringify(currentUser));

                    localStorage.setItem('cosmodiet_token', authToken);

                    updateAuthButton();

                    authModal.classList.remove('active');

                    document.body.style.overflow = 'auto';

                    showNotification('Регистрация успешна', 'success');

                }).catch(() => {
                    showNotification('Не удалось подключиться к серверу', 'error');
                });

            });



            // Выход из системы

            logoutBtn.addEventListener('click', function () {

                currentUser = null;

                localStorage.removeItem('cosmodiet_user');



                // Обновление интерфейса

                updateAuthButton();



                // Закрытие личного кабинета

                dashboardModal.classList.remove('active');

                document.body.style.overflow = 'auto';



                // Показать уведомление

                showNotification('Вы успешно вышли из системы', 'info');

            });



            // Открытие личного кабинета

            function saveBioSnapshot() {

                if (!currentUser) return;



                const snapshot = {

                    id: Date.now(),

                    userId: currentUser.id,

                    date: new Date().toLocaleString('ru-RU'),

                    height: document.getElementById('height').value,

                    weight: document.getElementById('weight').value,

                    age: document.getElementById('age').value,

                    pulse: document.getElementById('pulse').value,

                    activity: document.getElementById('activity').value,

                    missionDuration: document.getElementById('missionDuration').value,

                    gravity: document.getElementById('gravity').value,

                    stressLevel: document.getElementById('stressLevel').value

                };



                bioHistory.push(snapshot);

                localStorage.setItem('cosmodiet_bio_history', JSON.stringify(bioHistory));

                if (authToken) {

                    fetch('/api/save_bio', {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify({ token: authToken, bio: snapshot })

                    });

                }

            }



            function loadBioHistory() {

                const bioContainer = document.getElementById('bioHistory');

                const latestBio = document.getElementById('latestBio');

                const latestMission = document.getElementById('latestMission');

                const userBio = bioHistory.filter(b => b.userId === currentUser.id);



                if (userBio.length === 0) {

                    latestBio.textContent = 'Нет данных';

                    latestMission.textContent = 'Нет данных';

                    bioContainer.innerHTML = '<p style="text-align: center; color: #a0b3ff;">У вас пока нет сохраненных параметров</p>';

                    return;

                }



                userBio.sort((a, b) => new Date(b.date) - new Date(a.date));

                const last = userBio[0];



                latestBio.textContent = `Рост: ${last.height} см, Вес: ${last.weight} кг, Возраст: ${last.age}, Пульс: ${last.pulse}`;

                latestMission.textContent = `Активность: ${last.activity}, Длительность: ${last.missionDuration} дн., Гравитация: ${last.gravity}, Стресс: ${last.stressLevel}`;



                bioContainer.innerHTML = '';

                userBio.forEach((b, idx) => {

                    const el = document.createElement('div');

                    el.className = 'history-item';

                    el.innerHTML = `

                        <div class="history-item-header">

                            <h5>Параметры #${idx + 1}</h5>

                            <span style="color: #a0b3ff; font-size: 0.9rem;">${b.date}</span>

                        </div>

                        <p>Рост: ${b.height} см, Вес: ${b.weight} кг, Возраст: ${b.age}</p>

                        <p>Пульс: ${b.pulse}, Активность: ${b.activity}, Стресс: ${b.stressLevel}</p>

                        <p>Длительность миссии: ${b.missionDuration} дн., Гравитация: ${b.gravity}</p>

                    `;

                    bioContainer.appendChild(el);

                });

            }



            function openDashboard() {

                console.log('Opening dashboard...');

                if (!currentUser) {
                    // подстраховка: создаём демо-пользователя на лету
                    console.log('No current user, creating demo user');
                    currentUser = JSON.parse(localStorage.getItem('cosmodiet_user')) || {
                        id: 'demo',
                        name: 'Тестовый Пользователь',
                        email: 'test@cosmodiet.ru',
                        regDate: '2024-01-15'
                    };
                }



                // Заполнение информации о пользователе

                try {

                    const userNameEl = document.getElementById('userName');
                    const userEmailEl = document.getElementById('userEmail');
                    const userRegDateEl = document.getElementById('userRegDate');

                    if (userNameEl) userNameEl.textContent = currentUser.name || 'Пользователь';
                    if (userEmailEl) userEmailEl.textContent = currentUser.email || 'example@mail.com';
                    if (userRegDateEl) userRegDateEl.textContent = currentUser.regDate || new Date().toLocaleDateString('ru-RU');

                } catch (e) {
                    console.error('Error setting user info:', e);
                }



                // Загрузка истории

                try {
                    loadDietHistory();
                    loadBioHistory();
                    loadDiets();
                } catch (e) {
                    console.error('Error loading history:', e);
                }



                // Открытие модального окна

                try {
                    if (dashboardModal) {
                        console.log('Adding active class to dashboardModal');
                        dashboardModal.classList.add('active');
                        document.body.style.overflow = 'hidden';

                        // Scroll panels to top
                        if (dashPanels && dashPanels.length > 0) {
                            dashPanels.forEach(p => {
                                if (p) p.scrollTop = 0;
                            });
                        }
                        console.log('Dashboard opened successfully');
                    } else {
                        console.error('dashboardModal element not found!');
                    }
                } catch (e) {
                    console.error('Error in openDashboard modal display:', e);
                }

            }
            window.openDashboard = openDashboard;



            // Загрузка истории рационов

            function loadDietHistory() {

                const historyContainer = document.getElementById('dietHistory');

                const emptyText = '<p style="text-align: center; color: #a0b3ff;">В вашей истории нет данных</p>';



                if (authToken) {

                    fetch('/api/get_diets', {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify({ token: authToken })

                    }).then(async res => {

                        const data = await res.json();

                        if (!res.ok) {

                            historyContainer.innerHTML = emptyText;

                            return;

                        }

                        const userHistory = data.diets || [];

                        document.getElementById('totalDiets').textContent = userHistory.length;

                        if (userHistory.length === 0) {

                            historyContainer.innerHTML = emptyText;

                            return;

                        }

                        historyContainer.innerHTML = '';

                        userHistory.sort((a, b) => new Date(b.date) - new Date(a.date));

                        userHistory.forEach((diet, index) => {

                            const dietElement = document.createElement('div');

                            dietElement.className = 'history-item';

                            const dietTitle = diet.name ? `${diet.name}` : `Рацион #${index + 1}`;

                            dietElement.innerHTML = `

                                <div class="history-item-header">

                                    <h5>${dietTitle}</h5>

                                    <span style="color: #a0b3ff; font-size: 0.9rem;">${diet.date}</span>

                                </div>

                                <p>Калории: ${diet.calories} ккал/день</p>

                                <p>Белки: ${diet.protein} г, Жиры: ${diet.fat} г, Углеводы: ${diet.carbs} г</p>

                                <div class="history-actions">

                                    <button class="btn btn-outline view-diet" style="padding: 8px 15px;" data-id="${diet.id}">

                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg> Посмотреть

                                    </button>

                                </div>

                            `;

                            historyContainer.appendChild(dietElement);

                        });

                    });

                    return;

                }



                const userHistory = dietHistory.filter(diet => diet.userId === currentUser.id);

                document.getElementById('totalDiets').textContent = userHistory.length;

                if (userHistory.length === 0) {

                    historyContainer.innerHTML = emptyText;

                    return;

                }

                historyContainer.innerHTML = '';

                userHistory.sort((a, b) => new Date(b.date) - new Date(a.date));

                userHistory.forEach((diet, index) => {

                    const dietElement = document.createElement('div');

                    dietElement.className = 'history-item';

                    const dietTitle = diet.name ? `${diet.name}` : `Рацион #${index + 1}`;

                    dietElement.innerHTML = `

                        <div class="history-item-header">

                            <h5>${dietTitle}</h5>

                            <span style="color: #a0b3ff; font-size: 0.9rem;">${diet.date}</span>

                        </div>

                        <p>Калории: ${diet.calories} ккал/день</p>

                        <p>Белки: ${diet.protein} г, Жиры: ${diet.fat} г, Углеводы: ${diet.carbs} г</p>

                        <div class="history-actions">

                            <button class="btn btn-outline view-diet" style="padding: 8px 15px;" data-id="${diet.id}">

                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg> Посмотреть

                            </button>

                        </div>

                    `;

                    historyContainer.appendChild(dietElement);

                });

            }



            function loadDiets() {

                const container = document.getElementById('dietsContainer');

                const emptyText = document.getElementById('emptyDietsText');



                if (!container) return;



                const allDiets = JSON.parse(localStorage.getItem('cosmodiet_history') || '[]');

                const userDiets = allDiets.filter(d => !d.userId || d.userId === currentUser.id);



                if (userDiets.length === 0) {

                    container.style.display = 'none';

                    emptyText.style.display = 'block';

                    return;

                }



                container.style.display = 'grid';

                emptyText.style.display = 'none';

                container.innerHTML = '';



                userDiets.sort((a, b) => new Date(b.date) - new Date(a.date));

                const t = languageTexts[currentLang];
                const isLightTheme = document.body.classList.contains('light-theme');

                // Цвета для разных тем
                const cardBgGradient = isLightTheme ?
                    'linear-gradient(135deg, rgba(11, 91, 255, 0.08), rgba(170, 130, 255, 0.05))' :
                    'linear-gradient(135deg, rgba(0, 217, 255, 0.08), rgba(157, 78, 221, 0.05))';
                const cardBorder = isLightTheme ? 'rgba(11, 91, 255, 0.3)' : 'rgba(0, 217, 255, 0.3)';
                const cardShadow = isLightTheme ? 'rgba(11, 91, 255, 0.1)' : 'rgba(0, 217, 255, 0.1)';
                const cardShadowHover = isLightTheme ? 'rgba(11, 91, 255, 0.25)' : 'rgba(0, 217, 255, 0.25)';
                const cardBorderHover = isLightTheme ? 'rgba(11, 91, 255, 0.6)' : 'rgba(0, 217, 255, 0.6)';
                const titleColor = isLightTheme ? '#0b5bff' : '#00d9ff';
                const textColor = isLightTheme ? '#0b1220' : 'rgba(224,231,255,0.8)';
                const textColorSecondary = isLightTheme ? 'rgba(11, 20, 32, 0.6)' : 'rgba(224,231,255,0.6)';
                const bgSecondary = isLightTheme ? 'rgba(11, 91, 255, 0.08)' : 'rgba(0, 0, 0, 0.2)';
                const accentBg = isLightTheme ? 'rgba(11, 91, 255, 0.15)' : 'rgba(0, 217, 255, 0.2)';

                userDiets.forEach((diet, index) => {

                    const card = document.createElement('div');

                    card.style.cssText = 'background: ' + cardBgGradient + '; border: 2px solid ' + cardBorder + '; border-radius: 16px; padding: 20px; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0 8px 32px ' + cardShadow + '; transition: all 0.3s ease; cursor: pointer;';



                    const dietName = diet.name || t.dietCardTitle + (index + 1);

                    const calories = diet.calories || 0;

                    const protein = diet.protein || 0;

                    const fat = diet.fat || 0;

                    const carbs = diet.carbs || 0;

                    const score = Math.round(diet.score) || 0;

                    const date = new Date(diet.date).toLocaleDateString(currentLang === 'ru' ? 'ru-RU' : currentLang === 'en' ? 'en-US' : 'kk-KZ');



                    card.innerHTML = '<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;"><h5 class="diet-card-name" style="color: ' + titleColor + '; margin: 0; font-size: 1.1rem;">' + dietName + '</h5><span style="background: ' + accentBg + '; color: ' + titleColor + '; padding: 4px 12px; border-radius: 20px; font-size: 0.9rem;"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align:middle;margin-right:3px"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg> ' + score + '%</span></div><p style="color: ' + textColorSecondary + '; margin: 8px 0; font-size: 0.9rem;">' + date + '</p><div style="background: ' + bgSecondary + '; padding: 12px; border-radius: 8px; margin: 12px 0;"><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 0.9rem; color: ' + textColor + ';"><div><strong>' + calories + '</strong> ' + t.dietCalories + '</div><div><strong>' + protein + '</strong> ' + t.dietProtein + '</div><div><strong>' + fat + '</strong> ' + t.dietFat + '</div><div><strong>' + carbs + '</strong> ' + t.dietCarbs + '</div></div></div><button class="btn btn-primary view-details-btn" style="width: 100%; margin-top: 12px; padding: 10px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg> ' + t.dietViewDetails + '</button>';



                    card.addEventListener('mouseenter', () => {

                        card.style.transform = 'translateY(-4px)';

                        card.style.boxShadow = '0 12px 48px ' + cardShadowHover;

                        card.style.borderColor = cardBorderHover;

                    });



                    card.addEventListener('mouseleave', () => {

                        card.style.transform = 'translateY(0)';

                        card.style.boxShadow = '0 8px 32px ' + cardShadow;

                        card.style.borderColor = cardBorder;

                    });



                    // Обработчик "Посмотреть детали"
                    const viewBtn = card.querySelector('.view-details-btn');
                    if (viewBtn) {
                        viewBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            showDietDetails(diet, index);
                        });
                    }



                    container.appendChild(card);

                });

            }



            // Показать детали рациона в модалке
            function showDietDetails(diet, index) {
                const t = languageTexts[currentLang];
                const modal = document.createElement('div');
                modal.id = 'diet-details-modal';
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.7);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 2000;
                    backdrop-filter: blur(5px);
                `;

                const content = document.createElement('div');

                // Применить light-theme стили если нужно
                const isLightTheme = document.body.classList.contains('light-theme');
                const bgColor = isLightTheme ?
                    'linear-gradient(135deg, rgba(248, 249, 255, 0.98), rgba(235, 242, 255, 0.95))' :
                    'linear-gradient(135deg, rgba(10, 14, 23, 0.98), rgba(26, 31, 60, 0.95))';
                const borderColor = isLightTheme ? 'rgba(11, 91, 255, 0.3)' : 'rgba(0, 217, 255, 0.3)';
                const textColor = isLightTheme ? 'var(--light-text)' : 'rgba(224, 231, 255, 0.8)';
                const shadowColor = isLightTheme ? 'rgba(11, 91, 255, 0.2)' : 'rgba(0, 217, 255, 0.3)';
                const accentColor = isLightTheme ? '#0b5bff' : '#00d9ff';
                const smallTextColor = isLightTheme ? 'rgba(11, 20, 32, 0.7)' : 'rgba(224, 231, 255, 0.7)';
                const infoBgColor = isLightTheme ? 'rgba(11, 91, 255, 0.08)' : 'rgba(0, 217, 255, 0.08)';
                const infoBorderColor = isLightTheme ? 'rgba(11, 91, 255, 0.2)' : 'rgba(0, 217, 255, 0.2)';
                const numbersColor = isLightTheme ? '#0b5bff' : 'var(--dark-accent)';
                const secondaryTextColor = isLightTheme ? 'rgba(11, 20, 32, 0.6)' : 'rgba(224, 231, 255, 0.6)';
                const accentBgColor = isLightTheme ? 'rgba(11, 91, 255, 0.15)' : 'rgba(0, 217, 255, 0.15)';

                content.style.cssText = `
                    background: ${bgColor};
                    border: 2px solid ${borderColor};
                    border-radius: 24px;
                    padding: 32px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                    backdrop-filter: blur(15px);
                    box-shadow: 0 20px 60px ${shadowColor};
                    color: ${textColor};
                `;

                let productsHTML = '';
                if (diet.products && Array.isArray(diet.products)) {
                    const prodBg = isLightTheme ? 'rgba(11, 91, 255, 0.08)' : 'rgba(0, 217, 255, 0.08)';
                    const prodBorder = isLightTheme ? 'rgba(11, 91, 255, 0.5)' : 'rgba(0, 217, 255, 0.5)';
                    const prodText = isLightTheme ? 'var(--light-text)' : 'rgba(224, 231, 255, 0.8)';
                    const prodAccent = isLightTheme ? 'var(--light-accent)' : 'var(--dark-accent)';
                    const prodMeta = isLightTheme ? 'rgba(11, 20, 32, 0.5)' : 'rgba(224, 231, 255, 0.5)';

                    productsHTML = diet.products.map(p => `
                        <div style="background: ${prodBg}; padding: 12px; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid ${prodBorder};">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: ${prodText};">${p.name || 'Продукт'}</span>
                                <span style="color: ${prodAccent}; font-weight: 700; font-size: 0.9rem;">${p.kcal || 0} ккал</span>
                            </div>
                            <div style="font-size: 0.8rem; color: ${prodMeta}; margin-top: 4px;">
                                Б: ${p.protein}г | Ж: ${p.fat}г | У: ${p.carbs}г
                            </div>
                        </div>
                    `).join('');
                }

                content.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 24px;">
                        <h2 style="color: ${accentColor}; margin: 0; font-size: 1.8rem;">${diet.name || t.dietCardTitle + (index + 1)}</h2>
                        <button id="close-diet-modal" style="background: ${isLightTheme ? 'rgba(11, 91, 255, 0.15)' : 'rgba(0, 217, 255, 0.15)'}; border: 1px solid ${borderColor}; color: ${accentColor}; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 1.5rem; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">
                            ✕
                        </button>
                    </div>

                    <div style="background: ${infoBgColor}; padding: 16px; border-radius: 12px; margin-bottom: 24px; border: 1px solid ${infoBorderColor};">
                        <p style="color: ${smallTextColor}; margin: 8px 0; font-size: 0.95rem;">
                            <strong><i class="fas fa-calendar"></i> ${t.dietCreatedDate}:</strong> ${new Date(diet.date).toLocaleString(currentLang === 'ru' ? 'ru-RU' : currentLang === 'en' ? 'en-US' : 'kk-KZ')}
                        </p>
                        <p style="color: ${smallTextColor}; margin: 8px 0; font-size: 0.95rem;">
                            <strong><i class="fas fa-star"></i> ${t.dietScore}:</strong> ${Math.round(diet.score)}%
                        </p>
                    </div>

                    <div style="background: ${infoBgColor}; padding: 20px; border-radius: 12px; margin-bottom: 24px; border: 1px solid ${infoBorderColor};">
                        <h3 style="color: ${accentColor}; margin-top: 0; font-size: 1.2rem;"><i class="fas fa-chart-bar"></i> ${t.dietNutrition}</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 12px; margin-top: 16px;">
                            <div style="background: ${accentBgColor}; padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="color: ${numbersColor}; font-weight: 700; font-size: 1.3rem;">${Math.round(diet.calories)}</div>
                                <div style="color: ${secondaryTextColor}; font-size: 0.85rem;">${t.dietCalories}</div>
                            </div>
                            <div style="background: ${accentBgColor}; padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="color: ${numbersColor}; font-weight: 700; font-size: 1.3rem;">${Math.round(diet.protein)}</div>
                                <div style="color: ${secondaryTextColor}; font-size: 0.85rem;">${t.dietProtein}</div>
                            </div>
                            <div style="background: ${accentBgColor}; padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="color: ${numbersColor}; font-weight: 700; font-size: 1.3rem;">${Math.round(diet.fat)}</div>
                                <div style="color: ${secondaryTextColor}; font-size: 0.85rem;">${t.dietFat}</div>
                            </div>
                            <div style="background: ${accentBgColor}; padding: 12px; border-radius: 8px; text-align: center;">
                                <div style="color: ${numbersColor}; font-weight: 700; font-size: 1.3rem;">${Math.round(diet.carbs)}</div>
                                <div style="color: ${secondaryTextColor}; font-size: 0.85rem;">${t.dietCarbs}</div>
                            </div>
                        </div>
                    </div>

                    <div style="background: ${infoBgColor}; padding: 20px; border-radius: 12px; margin-bottom: 24px; border: 1px solid ${infoBorderColor};">
                        <h3 style="color: ${accentColor}; margin-top: 0; font-size: 1.2rem;"><i class="fas fa-utensils"></i> ${t.dietSelectedProducts}</h3>
                        <div style="margin-top: 12px; color: ${smallTextColor};">
                            ${productsHTML || '<p style="color: ' + secondaryTextColor + ';">' + t.dietNoProducts + '</p>'}
                        </div>
                    </div>

                    <div style="display: flex; gap: 12px;">
                        <button id="edit-diet-btn" style="flex: 1; padding: 14px; background: linear-gradient(135deg, ${accentColor}, ${accentColor}40); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 700; font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 0.5px; transition: all 0.3s ease; font-size: 1rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg> ${t.dietEdit}
                        </button>
                        <button id="delete-diet-btn" style="flex: 1; padding: 14px; background: rgba(255, 50, 100, 0.15); color: #ff3264; border: 2px solid rgba(255, 50, 100, 0.3); border-radius: 12px; cursor: pointer; font-weight: 700; font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 0.5px; transition: all 0.3s ease; font-size: 1rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg> ${t.dietDelete}
                        </button>
                    </div>
                `;

                modal.appendChild(content);
                document.body.appendChild(modal);

                // Обработчики
                document.getElementById('close-diet-modal').addEventListener('click', () => modal.remove());
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.remove();
                });

                document.getElementById('edit-diet-btn').addEventListener('click', () => {
                    const t = languageTexts[currentLang];
                    const currentName = diet.name || (t.dietCardTitle + (index + 1));
                    const newName = prompt(t.dietRenamePrompt || 'Введите новое название рациона:', currentName);
                    if (newName && newName.trim()) {
                        diet.name = newName.trim();
                        let allDiets = JSON.parse(localStorage.getItem('cosmodiet_history') || '[]');
                        const dietIdx = allDiets.findIndex(d => d.id === diet.id);
                        if (dietIdx !== -1) {
                            allDiets[dietIdx].name = newName.trim();
                            localStorage.setItem('cosmodiet_history', JSON.stringify(allDiets));
                        }
                        // Обновить заголовок в модале
                        const titleEl = content.querySelector('h2');
                        if (titleEl) titleEl.textContent = newName.trim();
                        // Перезагрузить карточки
                        loadDiets();
                    }
                });

                document.getElementById('delete-diet-btn').addEventListener('click', () => {
                    if (confirm('Вы уверены, что хотите удалить этот рацион?')) {
                        // Получить все рационы
                        let allDiets = JSON.parse(localStorage.getItem('cosmodiet_history') || '[]');
                        // Удалить текущий рацион по ID
                        allDiets = allDiets.filter(d => d.id !== diet.id);
                        localStorage.setItem('cosmodiet_history', JSON.stringify(allDiets));
                        modal.remove();
                        loadDiets(); // Перезагрузить список рационов
                    }
                });
            }



            function viewDietDetails(diet) {

                const details = `

                    <h3>Детали рациона</h3>

                    <p><strong>Дата создания:</strong> ${diet.date}</p>

                    <p><strong>Калории:</strong> ${diet.calories} ккал/сутки</p>

                    <p><strong>Белки:</strong> ${diet.protein} г/сутки</p>

                    <p><strong>Жиры:</strong> ${diet.fat} г/сутки</p>

                    <p><strong>Углеводы:</strong> ${diet.carbs} г/сутки</p>

                    <p><strong>Рекомендуемые продукты:</strong></p>

                    <ul>

                        ${diet.recommendedFoods.map(food => `<li>${food}</li>`).join('')}

                    </ul>

                `;



                alert(details);

            }



            // Экспорт рациона в PDF

            function exportDietToPDF(diet) {

                const messages = {

                    ru: `Рацион "${diet.date}" успешно экспортирован в PDF`,

                    en: `Diet "${diet.date}" successfully exported to PDF`,

                    kz: `"${diet.date}" рационы PDF форматына сәтті экспортталды`

                };



                showNotification(messages[currentLang || 'ru'], 'success');



                // В реальном приложении здесь был бы вызов API для генерации PDF

                // Для демо просто создаем текстовый файл

                const content = `

                    Рацион CosmoDiet

                    Дата: ${diet.date}

                    Калории: ${diet.calories} ккал/сутки

                    Белки: ${diet.protein} г/сутки

                    Жиры: ${diet.fat} г/сутки

                    Углеводы: ${diet.carbs} г/сутки

                    

                    Рекомендуемые продукты:

                    ${diet.recommendedFoods.map((food, i) => `${i + 1}. ${food}`).join('\n')}

                    

                    Рекомендации по приему пищи:

                    • 5-6 приемов пищи в день небольшими порциями

                    • Основной прием пищи за 2-3 часа до физической нагрузки

                    • Обязательный прием жидкости: 2-2.5 литра в день

                    • Витаминные добавки принимать во время еды

                `;



                const blob = new Blob([content], { type: 'text/plain' });

                const url = URL.createObjectURL(blob);

                const a = document.createElement('a');

                a.href = url;

                a.download = `cosmodiet_ration_${diet.date.replace(/\s+/g, '_')}.txt`;

                document.body.appendChild(a);

                a.click();

                document.body.removeChild(a);

                URL.revokeObjectURL(url);

            }



            // Удаление рациона

            function deleteDiet(dietId) {

                dietHistory = dietHistory.filter(diet => diet.id != dietId);

                localStorage.setItem('cosmodiet_history', JSON.stringify(dietHistory));

                loadDietHistory();

                showNotification('Рацион успешно удален', 'success');

            }



            // Сохранение рациона в личном кабинете

            saveBtn.addEventListener('click', function () {

                if (!currentUser) {

                    showNotification('Для сохранения рациона необходимо войти в систему', 'warning');

                    authModal.classList.add('active');

                    document.body.style.overflow = 'hidden';

                    return;

                }



                const calories = document.getElementById('calories').textContent;

                const protein = document.getElementById('protein').textContent;

                const fat = document.getElementById('fat').textContent;

                const carbs = document.getElementById('carbs').textContent;



                if (calories === '0') {

                    showNotification('Сначала рассчитайте рацион', 'warning');

                    return;

                }



                // Получаем рекомендованные продукты

                const recommendedFoods = [];

                document.querySelectorAll('#recommendedFoods li').forEach(li => {

                    recommendedFoods.push(li.textContent.replace('✓', '').trim());

                });



                const newDiet = {

                    id: Date.now(),

                    userId: currentUser.id,

                    date: new Date().toLocaleString('ru-RU'),

                    calories: calories,

                    protein: protein,

                    fat: fat,

                    carbs: carbs,

                    recommendedFoods: recommendedFoods,

                    params: {

                        height: document.getElementById('height').value,

                        weight: document.getElementById('weight').value,

                        age: document.getElementById('age').value,

                        missionDuration: document.getElementById('missionDuration').value,

                        gravity: document.getElementById('gravity').value

                    }

                };



                dietHistory.push(newDiet);

                localStorage.setItem('cosmodiet_history', JSON.stringify(dietHistory));

                if (authToken) {

                    fetch('/api/save_diet', {

                        method: 'POST',

                        headers: { 'Content-Type': 'application/json' },

                        body: JSON.stringify({ token: authToken, diet: newDiet })

                    });

                }

                saveBioSnapshot();



                showNotification('Рацион успешно сохранен в личном кабинете', 'success');



                // Если открыт личный кабинет - обновляем историю

                if (dashboardModal.classList.contains('active')) {

                    loadDietHistory();

                    loadBioHistory();

                }

            });



            // Функция показа уведомлений

            function showNotification(message, type = 'info') {

                // Удаляем предыдущее уведомление

                const oldNotification = document.querySelector('.notification');

                if (oldNotification) oldNotification.remove();



                // Создаем новое уведомление

                const notification = document.createElement('div');

                notification.className = `notification ${type}`;

                notification.style.cssText = `

                    position: fixed;

                    top: 100px;

                    right: 20px;

                    background: ${type === 'error' ? '#ff4757' : type === 'success' ? '#2ed573' : '#1e90ff'};

                    color: white;

                    padding: 15px 25px;

                    border-radius: var(--border-radius);

                    z-index: 9999;

                    animation: slideIn 0.3s ease;

                    max-width: 300px;

                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);

                `;



                notification.innerHTML = `

                    <div style="display: flex; align-items: center; gap: 10px;">

                        <i class="fas fa-${type === 'error' ? 'exclamation-circle' : type === 'success' ? 'check-circle' : 'info-circle'}"></i>

                        <div>${message}</div>

                    </div>

                `;



                document.body.appendChild(notification);



                // Автоматическое скрытие через 5 секунд

                setTimeout(() => {

                    notification.style.animation = 'slideOut 0.3s ease';

                    setTimeout(() => notification.remove(), 300);

                }, 5000);



                // Анимации

                const style = document.createElement('style');

                style.textContent = `

                    @keyframes slideIn {

                        from { transform: translateX(100%); opacity: 0; }

                        to { transform: translateX(0); opacity: 1; }

                    }

                    @keyframes slideOut {

                        from { transform: translateX(0); opacity: 1; }

                        to { transform: translateX(100%); opacity: 0; }

                    }

                `;

                document.head.appendChild(style);

            }



            // Переключение темы

            const themeToggle = document.getElementById('themeToggle');

            themeToggle.addEventListener('click', function () {

                document.body.classList.toggle('light-theme');

                const icon = this.querySelector('i');
                const lightThemeOn = document.body.classList.contains('light-theme');
                const themeIconClass = lightThemeOn ? 'fa-sun' : 'fa-moon';

                if (lightThemeOn) {

                    icon.classList.remove('fa-moon');

                    icon.classList.add('fa-sun');

                } else {

                    icon.classList.remove('fa-sun');

                    icon.classList.add('fa-moon');

                }

                const fallbackImage = icon.querySelector('img.api-icon');
                if (fallbackImage && iconApiMap[themeIconClass]) {
                    fallbackImage.src = iconApiMap[themeIconClass];
                }

                initParticles(document.body.classList.contains('light-theme'));

                // Перезагрузить рационы с новыми цветами при смене темы
                if (typeof loadDiets === 'function') {
                    try { loadDiets(); } catch (e) { console.error('loadDiets error:', e); }
                }

            });



            // Управление языковым меню

            const languageToggle = document.getElementById('languageToggle');

            const languageMenu = document.getElementById('languageMenu');

            const languageOptions = document.querySelectorAll('.language-option');



            // Показ/скрытие языкового меню

            languageToggle.addEventListener('click', function (e) {

                e.stopPropagation();

                languageMenu.classList.toggle('active');

            });



            // Закрытие языкового меню при клике вне его

            document.addEventListener('click', function () {

                languageMenu.classList.remove('active');

            });



            // Предотвращение закрытия при клике внутри меню

            languageMenu.addEventListener('click', function (e) {

                e.stopPropagation();

            });



            // Смена языка

            const languageTexts = {

                ru: {

                    // Метаданные

                    title: "CosmoDiet — Персонализированное питание для космоса",



                    // Навигация

                    navHome: "Главная",

                    navProblem: "Проблема",

                    navSolution: "Решение",

                    navHowItWorks: "Как работает",

                    navSublimation: "Сублимация",

                    navCalculator: "Калькулятор",

                    navTeam: "Команда",



                    // Hero секция

                    heroTitle: "CosmoDiet — персонализированное питание для космоса",

                    heroSubtitle: "Искусственный интеллект, биометрия и сублимированные продукты для здоровья космонавтов",

                    heroButton1: "Рассчитать рацион",

                    heroButton2: "Как это работает",



                    // Проблема

                    problemTitle: "Проблема стандартизированного питания в космосе",

                    problemDesc: "Традиционные подходы к питанию космонавтов не учитывают индивидуальные потребности организма в условиях микрогравитации, что приводит к серьезным проблемам со здоровьем и снижению эффективности миссий.",

                    problemCard1Title: "Стандартизированное питание",

                    problemCard1Text: "Одинаковый рацион для всех космонавтов не учитывает индивидуальные особенности организма, метаболизма и физической активности, что снижает эффективность питания на 30-40%.",

                    problemCard2Title: "Потеря мышц и костной ткани",

                    problemCard2Text: "В условиях микрогравитации космонавты теряют до 1-2% костной массы и 20% мышечной массы в месяц, что требует специального питания для компенсации.",

                    problemCard3Title: "Повышенные нагрузки",

                    problemCard3Text: "Космические миссии требуют максимальной производительности, а неоптимальное питание снижает работоспособность на 15-30%, увеличивая риски выполнения задач.",

                    problemCard4Title: "Риски для миссий",

                    problemCard4Text: "Неправильное питание увеличивает риск медицинских проблем, что ставит под угрозу успех длительных миссий к Марсу и другим планетам.",



                    // Решение

                    solutionTitle: "Решение — CosmoDiet",

                    solutionDesc: "Интеллектуальная система персонализированного питания для космических миссий на основе ИИ и биометрических данных",

                    solutionStep1: "Данные",

                    solutionStep1Text: "Сбор биометрических показателей космонавта: вес, рост, возраст, пульс, активность, генетические маркеры и метаболические особенности.",

                    solutionStep2: "AI-анализ",

                    solutionStep2Text: "Искусственный интеллект анализирует данные и прогнозирует потребности организма в условиях микрогравитации с точностью 95%.",

                    solutionStep3: "Персональный рацион",

                    solutionStep3Text: "Формирование индивидуального плана питания с точным балансом БЖУ, витаминов, микроэлементов и биологически активных веществ.",

                    solutionStep4: "Здоровый экипаж",

                    solutionStep4Text: "Поддержание оптимальной физической формы, снижение усталости на 40% и максимальная производительность на протяжении всей миссии.",



                    // Как работает

                    howItWorksTitle: "Как работает система",

                    howItWorksDesc: "Шестиэтапный процесс создания персонализированного рациона для космических миссий",

                    howItWorks1Title: "1. Ввод данных",

                    howItWorks1Text: "Космонавт вводит свои биометрические данные: рост, вес, возраст, уровень активности, длительность полёта, генетические показатели и другие параметры через интуитивный интерфейс.",

                    howItWorks2Title: "2. AI-анализ физиологии",

                    howItWorks2Text: "Нейросеть анализирует данные и прогнозирует метаболические потребности в условиях микрогравитации с учетом стресс-факторов космического полета.",

                    howItWorks3Title: "3. Расчёт питания",

                    howItWorks3Text: "Система рассчитывает оптимальную калорийность, баланс белков, жиров, углеводов, витаминов и микроэлементов с поправкой на условия космического полета.",

                    howItWorks4Title: "4. Подбор продуктов",

                    howItWorks4Text: "Автоматический подбор сублимированных продуктов, соответствующих расчётным требованиям, с учетом вкусовых предпочтений космонавта.",

                    howItWorks5Title: "5. Готовый рацион",

                    howItWorks5Text: "Формирование полного рациона на весь период полёта с ежедневным меню, инструкциями по приготовлению и графиком приема пищи.",

                    howItWorks6Title: "6. Мониторинг и коррекция",

                    howItWorks6Text: "Непрерывный мониторинг состояния космонавта и автоматическая коррекция рациона в реальном времени по мере изменения условий.",



                    // Сублимация

                    sublimationTitle: "Технология сублимации",

                    sublimationDesc: "Современная технология сублимационной сушки сохраняет питательные вещества и обеспечивает длительное хранение продуктов в условиях космоса",

                    sublimation1Title: "Сохранение питательных веществ",

                    sublimation1Text: "Технология сохраняет 90–95% витаминов, минералов и биологически активных веществ в продуктах.",

                    sublimation2Title: "Минимальный вес и объём",

                    sublimation2Text: "Сублимированные продукты в 5-10 раз легче и занимают в 3-7 раз меньше места по сравнению с обычными.",

                    sublimation3Title: "Длительный срок хранения",

                    sublimation3Text: "Продукты сохраняют свои свойства до 25 лет без потери качества и питательной ценности.",

                    sublimation4Title: "Безопасность в микрогравитации",

                    sublimation4Text: "Специальная упаковка предотвращает распространение крошек и жидкости в условиях невесомости.",



                    // AI Dashboard

                    aiTitle: "Искусственный интеллект и анализ данных",

                    aiDesc: "Мощные алгоритмы машинного обучения анализируют биометрические данные в реальном времени для оптимального планирования питания",



                    // Калькулятор

                    calculatorTitle: "Интерактивный калькулятор рациона",

                    calculatorDesc: "Рассчитайте персональный рацион для космической миссии на основе ваших индивидуальных параметров",

                    calculateButton: "Рассчитать персональный рацион",

                    resultTitle: "Ваш персональный рацион для космической миссии",

                    exportButton: "Экспортировать рацион в PDF",

                    saveButton: "Сохранить в личном кабинете",



                    // Команда

                    teamTitle: "Наша команда экспертов",

                    teamDesc: "Междисциплинарная команда специалистов в области космической медицины, диетологии, искусственного интеллекта и пищевых технологий",
                    member1Bio: "Разрабатывает адаптивный интерфейс и UI проекта для демонстрации на хакатоне.",
                    member2Bio: "Готовит изображения, разметку и обучает YOLO-модели для анализа продуктов.",
                    member3Bio: "Интегрирует AI-модели, настраивает серверную часть и обработку результатов.",
                    member4Bio: "Организует работу команды, отвечает за стратегию проекта и финальную презентацию.",

                    // Футер

                    footerText: "Интеллектуальная система персонализированного питания для космических миссий нового поколения",

                    copyright: "© 2026 CosmoDiet. Все права защищены.",

                    missionText: "Разработано для будущих космических миссий к Марсу и дальним планетам",
                    footerContactsTitle: "Контакты",
                    footerAddress: "Астана, Казахстан",
                    footerPhone: "+7 (495) 123-45-67",
                    footerEmail: "info@cosmodiet.space",
                    footerHours: "Пн-Пт: 9:00-18:00",
                    footerPartnersTitle: "Партнёры",
                    partner1: "Роскосмос",
                    partner2: "NASA",
                    partner3: "ESA (Европейское космическое агентство)",
                    partner4: "SpaceX",
                    partner5: "Blue Origin",
                    footerQuickTitle: "Быстрые ссылки",
                    quickHome: "Главная",
                    quickProblem: "Проблема",
                    quickSolution: "Решение",
                    quickCalculator: "Калькулятор",
                    quickTeam: "Команда",

                    // Формы/калькулятор
                    heightLabel: "Рост (см)",
                    weightLabel: "Вес (кг)",
                    ageLabel: "Возраст",
                    activityLabel: "Уровень активности",
                    missionDurationLabel: "Длительность миссии (дни)",
                    gravityLabel: "Уровень гравитации",
                    stressLabel: "Уровень стресса",
                    proteinLabel: "Белки (г/сутки)",
                    fatLabel: "Жиры (г/сутки)",
                    carbLabel: "Углеводы (г/сутки)",
                    caloriesUnit: "Ккал в сутки",
                    recommendedTitle: "Рекомендуемые сублимированные продукты:",
                    mealRecTitle: "Рекомендации по приему пищи:",
                    mealRec1: "• 5-6 приемов пищи в день небольшими порциями",
                    mealRec2: "• Основной прием пищи за 2-3 часа до физической нагрузки",
                    mealRec3: "• Обязательный прием жидкости: 2-2.5 литра в день",
                    mealRec4: "• Витаминные добавки принимать во время еды",
                    privacyPolicy: "Политика конфиденциальности",
                    // Лоадер/авторизация
                    loaderText: "Инициализация космических систем...",
                    authLoginTab: "Вход",
                    authRegisterTab: "Регистрация",
                    loginEmailLabel: "Email",
                    loginPasswordLabel: "Пароль",
                    loginBtn: "Войти",
                    registerNameLabel: "Имя",
                    registerEmailLabel: "Email",
                    registerPasswordLabel: "Пароль",
                    registerConfirmLabel: "Подтвердите пароль",
                    registerBtn: "Зарегистрироваться",
                    dashboardTitle: "Личный кабинет",
                    dashboardClose: "Закрыть",
                    tabOverview: "Аккаунт",
                    tabBiometrics: "Биометрия",
                    tabAnalyses: "Анализы",
                    tabAIDetector: "ИИ Детектор",
                    tabTelegram: "Телеграм",
                    welcomeTitle: "Добро пожаловать",
                    userEmailLabel: "Ваш email",
                    userRegDateLabel: "Дата регистрации",
                    totalDietsLabel: "Всего сохранённых рационов",
                    accountManageTitle: "Управление аккаунтом",
                    actChangePass: "Сменить пароль",
                    actVerifyEmail: "Проверить почту",
                    act2fa: "Двухфакторная аутентификация",
                    actEditProfile: "Редактировать профиль",
                    actNotifications: "Уведомления",
                    actLanguage: "Язык",
                    integrationTitle: "Интеграция и сервисы",
                    exportDataTitle: "Экспорт данных",
                    exportDataDesc: "Скачать вашу информацию",
                    syncTitle: "Синхронизация",
                    syncDesc: "Подключите устройства",
                    privacyTitleCard: "Приватность",
                    privacyDescCard: "Управление конфиденциальностью",
                    devTitle: "Разработчикам",
                    apiKeysTitle: "API ключи",
                    apiKeysDesc: "Токены, ключи и сессии",
                    webhooksTitle: "Вебхуки",
                    webhooksDesc: "Настройки и логирование",
                    docsTitle: "Документация",
                    docsDesc: "API, примеры, руководства",
                    logoutText: "Выход",
                    tgTitle: "Телеграм",
                    tgStatusTitle: "Статус",
                    tgStatusValue: "Не подключено",
                    tgCommandsTitle: "Команды",
                    tgCommandsList: "/start, /bio, /diet",
                    tgCheck: "Проверить статус",
                    tgTest: "Отправить тест",
                    tgHint: 'В Telegram найдите <strong><a href="https://t.me/CosmoDietAI_bot" target="_blank" style="color: #00d9ff; text-decoration: none; border-bottom: 1px solid #00d9ff;">@CosmoDietAI_bot</a></strong>, чтобы привязать email и рацион.',

                    // Детектор / дашборд
                    dashBioTitle: "Параметры и биометрия",
                    dashAnalysisTitle: "История анализов и рационов",
                    dashDetectorTitle: "ИИ Детектор YOLOv8",
                    detectorVideoTitle: "Видеопоток",
                    detectorResultsTitle: "Результаты",
                    detectorHistoryTitle: "История сессий",
                    detectorStart: "Запустить",
                    detectorStop: "Остановить",
                    detectorSave: "Сохранить сессию",
                    dashSaveCabinet: "Сохранить в личном кабинете",
                    crewControlText: "Полный контроль над питанием экипажа, мониторинг состояния здоровья и управление запасами продуктов.",
                    activityOptions: ["Низкая (офисная работа)", "Средняя (тренировки 3-4 раза в неделю)", "Высокая (ежедневные тренировки)", "Очень высокая (профессиональный спорт)"],
                    gravityOptions: ["Микрогравитация (космос)", "Лунная (0.16g)", "Марсианская (0.38g)"],
                    stressOptions: ["Низкий", "Средний", "Высокий"],
                    aiRefresh: "Обновить данные",
                    aiStat1Label: "Точность прогнозирования",
                    aiStat2Label: "Мониторинг в реальном времени",
                    aiStat3Label: "Биометрических параметров",
                    aiStat4Label: "Время анализа данных",
                    aiDashboardDesc: "Система анализирует данные с носимых устройств, медицинских датчиков и биометрических сканеров для создания динамического профиля питания.",
                    benefitsTitle: "Преимущества для космических миссий",
                    benefitAstronautsTitle: "Для космонавтов",
                    benefitAst1: "Поддержание оптимальной физической формы",
                    benefitAst2: "Снижение усталости на 40%",
                    benefitAst3: "Быстрое восстановление после нагрузок",
                    benefitAst4: "Индивидуальный подход к питанию",
                    benefitMissionsTitle: "Для миссий",
                    benefitMis1: "Экономия ресурсов и пространства",
                    benefitMis2: "Минимизация медицинских рисков",
                    benefitMis3: "Точный контроль питания экипажа",
                    benefitMis4: "Повышение надежности миссий",
                    featuresTitleText: "Дополнительные функции",
                    featuresSubtitle: "Расширенные возможности для космических агентств и индивидуальных пользователей",
                    feature1Title: "Личный кабинет космонавта",
                    feature1Desc: "Индивидуальный доступ к истории питания, рекомендациям, биометрическим данным и планировщику рациона.",
                    feature2Title: "Экспорт рациона",
                    feature2Desc: "Возможность экспортировать подробный план питания в форматах PDF, JSON или XML для интеграции с другими системами.",
                    feature3Title: "API для агентств",
                    feature3Desc: "Мощное API для интеграции системы CosmoDiet с существующими платформами космических агентств.",
                    feature4Title: "Административная панель",
                    feature4Desc: "Полный контроль над питанием экипажа, мониторинг состояния здоровья и управление запасами продуктов.",
                    aiDashboardTitle: "Панель мониторинга CosmoDiet AI",
                    latestBioTitle: "Последние параметры",
                    latestMissionTitle: "Профиль миссии",
                    historyBioTitle: "История параметров",
                    detectorDesc: "Детектирование объектов в реальном времени через камеру",
                    notifRegisterSuccess: "Регистрация успешна",
                    detectorVideoReady: "Видео воспроизводится",
                    detectorVideoError: "Ошибка видео",
                    detectorReady: "Камера активна. Инициализация детектора...",
                    detectorCameraError: "Ошибка камеры",
                    detectorStopped: "Детектор остановлен",
                    detectorUnauthorized: "Ошибка: не авторизован",
                    detectorNothing: "ничего не обнаружено",
                    detectorFrameLabel: "Кадр",
                    detectorDetectedLabel: "Обнаружено",
                    detectorErrorLabel: "Ошибка",
                    alertUnauthorized: "Ошибка: не авторизован",
                    alertNoData: "Нет данных для сохранения",
                    alertSessionSaved: "Сессия сохранена в личный кабинет!",
                    alertSessionError: "Ошибка сохранения",
                    aiWelcome: "Привет! Я AI‑ассистент CosmoDiet. Могу помочь по сайту и ответить на любые вопросы.",
                    aiChip1: "Как рассчитать рацион для космонавта?",
                    aiChip2: "Какие продукты подходят для космоса?",
                    aiChip3: "Как работает детекция дефектов?",
                    aiInputPlaceholder: "Напишите вопрос…",
                    aiSend: "Отправить",
                    detectorHistoryEmpty: "История пуста",

                    // Личный кабинет - Рационы
                    createDietBtn: "Создать свой рацион",
                    tabDiets: "Рационы",
                    myDietsTitle: "Мои рационы",
                    dietCardTitle: "Рацион #",
                    dietCreatedDate: "Дата создания",
                    dietScore: "Оценка",
                    dietNutrition: "Пищевая ценность (на сутки)",
                    dietCalories: "ккал",
                    dietProtein: "г белки",
                    dietFat: "г жиры",
                    dietCarbs: "г углеводы",
                    dietViewDetails: "Посмотреть детали",
                    dietSelectedProducts: "Выбранные продукты",
                    dietNoProducts: "Нет добавленных продуктов",
                    dietEdit: "Редактировать",
                    dietDelete: "Удалить",
                    dietModifyTitle: "Дата создания"

                },

                en: {

                    // Metadata

                    title: "CosmoDiet — Personalized Nutrition for Space",



                    // Navigation

                    navHome: "Home",

                    navProblem: "Problem",

                    navSolution: "Solution",

                    navHowItWorks: "How It Works",

                    navSublimation: "Sublimation",

                    navCalculator: "Calculator",

                    navTeam: "Team",



                    // Hero section

                    heroTitle: "CosmoDiet — Personalized Nutrition for Space",

                    heroSubtitle: "Artificial intelligence, biometrics and freeze-dried foods for astronaut health",

                    heroButton1: "Calculate Diet",

                    heroButton2: "How It Works",



                    // Problem

                    problemTitle: "The Problem of Standardized Nutrition in Space",

                    problemDesc: "Traditional approaches to astronaut nutrition do not account for individual body needs in microgravity conditions, leading to serious health problems and reduced mission effectiveness.",

                    problemCard1Title: "Standardized Nutrition",

                    problemCard1Text: "The same diet for all astronauts does not account for individual body characteristics, metabolism, and physical activity, reducing nutritional efficiency by 30-40%.",

                    problemCard2Title: "Muscle and Bone Loss",

                    problemCard2Text: "In microgravity conditions, astronauts lose up to 1-2% bone mass and 20% muscle mass per month, requiring special nutrition for compensation.",

                    problemCard3Title: "Increased Loads",

                    problemCard3Text: "Space missions require maximum performance, and suboptimal nutrition reduces productivity by 15-30%, increasing task execution risks.",

                    problemCard4Title: "Mission Risks",

                    problemCard4Text: "Poor nutrition increases the risk of medical problems, jeopardizing the success of long-term missions to Mars and other planets.",



                    // Solution

                    solutionTitle: "Solution — CosmoDiet",

                    solutionDesc: "Intelligent personalized nutrition system for space missions based on AI and biometric data",

                    solutionStep1: "Data",

                    solutionStep1Text: "Collection of astronaut biometric indicators: weight, height, age, pulse, activity, genetic markers and metabolic characteristics.",

                    solutionStep2: "AI Analysis",

                    solutionStep2Text: "Artificial intelligence analyzes data and predicts body needs in microgravity conditions with 95% accuracy.",

                    solutionStep3: "Personalized Diet",

                    solutionStep3Text: "Formation of an individual nutrition plan with precise balance of proteins, fats, carbohydrates, vitamins, microelements and biologically active substances.",

                    solutionStep4: "Healthy Crew",

                    solutionStep4Text: "Maintaining optimal physical condition, reducing fatigue by 40% and maximum performance throughout the mission.",



                    // How it works

                    howItWorksTitle: "How the System Works",

                    howItWorksDesc: "Six-step process for creating personalized diets for space missions",

                    howItWorks1Title: "1. Data Input",

                    howItWorks1Text: "The astronaut enters biometric data: height, weight, age, activity level, mission duration, genetic indicators and other parameters through an intuitive interface.",

                    howItWorks2Title: "2. AI Physiology Analysis",

                    howItWorks2Text: "Neural network analyzes data and predicts metabolic needs in microgravity conditions, taking into account space flight stress factors.",

                    howItWorks3Title: "3. Nutrition Calculation",

                    howItWorks3Text: "The system calculates optimal calorie intake, balance of proteins, fats, carbohydrates, vitamins and microelements with adjustments for space flight conditions.",

                    howItWorks4Title: "4. Product Selection",

                    howItWorks4Text: "Automatic selection of freeze-dried products meeting calculated requirements, taking into account astronaut taste preferences.",

                    howItWorks5Title: "5. Ready Diet",

                    howItWorks5Text: "Formation of a complete diet for the entire flight period with daily menu, preparation instructions and meal schedule.",

                    howItWorks6Title: "6. Monitoring and Correction",

                    howItWorks6Text: "Continuous monitoring of astronaut condition and automatic real-time diet correction as conditions change.",



                    // Sublimation

                    sublimationTitle: "Sublimation Technology",

                    sublimationDesc: "Modern freeze-drying technology preserves nutrients and ensures long-term food storage in space conditions",

                    sublimation1Title: "Nutrient Preservation",

                    sublimation1Text: "Technology preserves 90-95% of vitamins, minerals and biologically active substances in products.",

                    sublimation2Title: "Minimum Weight and Volume",

                    sublimation2Text: "Freeze-dried products are 5-10 times lighter and take up 3-7 times less space compared to regular ones.",

                    sublimation3Title: "Long Shelf Life",

                    sublimation3Text: "Products retain their properties for up to 25 years without loss of quality and nutritional value.",

                    sublimation4Title: "Safety in Microgravity",

                    sublimation4Text: "Special packaging prevents the spread of crumbs and liquids in weightlessness conditions.",



                    // AI Dashboard

                    aiTitle: "Artificial Intelligence and Data Analysis",

                    aiDesc: "Powerful machine learning algorithms analyze biometric data in real time for optimal nutrition planning",



                    // Calculator

                    calculatorTitle: "Interactive Diet Calculator",

                    calculatorDesc: "Calculate a personal diet for a space mission based on your individual parameters",

                    calculateButton: "Calculate Personal Diet",

                    resultTitle: "Your Personal Diet for Space Mission",

                    exportButton: "Export Diet to PDF",

                    saveButton: "Save to Personal Account",



                    // Team

                    teamTitle: "Our Expert Team",

                    teamDesc: "Interdisciplinary team of specialists in space medicine, dietetics, artificial intelligence and food technology",
                    member1Bio: "Develops the adaptive interface and UI for hackathon demonstration.",
                    member2Bio: "Prepares images, annotations and trains YOLO models for food analysis.",
                    member3Bio: "Integrates AI models, configures the server and result processing.",
                    member4Bio: "Organizes team workflow, manages project strategy and final presentation.",

                    // Footer

                    footerText: "Intelligent personalized nutrition system for next-generation space missions",

                    copyright: "© 2023 CosmoDiet. All rights reserved.",

                    missionText: "Developed for future space missions to Mars and distant planets",
                    footerContactsTitle: "Contacts",
                    footerAddress: "Astana, Kazakhstan",
                    footerPhone: "+7 (495) 123-45-67",
                    footerEmail: "info@cosmodiet.space",
                    footerHours: "Mon-Fri: 9:00-18:00",
                    footerPartnersTitle: "Partners",
                    partner1: "Roscosmos",
                    partner2: "NASA",
                    partner3: "ESA (European Space Agency)",
                    partner4: "SpaceX",
                    partner5: "Blue Origin",
                    footerQuickTitle: "Quick links",
                    quickHome: "Home",
                    quickProblem: "Problem",
                    quickSolution: "Solution",
                    quickCalculator: "Calculator",
                    quickTeam: "Team",

                    // Forms/calculator
                    heightLabel: "Height (cm)",
                    weightLabel: "Weight (kg)",
                    ageLabel: "Age",
                    activityLabel: "Activity level",
                    missionDurationLabel: "Mission duration (days)",
                    gravityLabel: "Gravity level",
                    stressLabel: "Stress level",
                    proteinLabel: "Proteins (g/day)",
                    fatLabel: "Fats (g/day)",
                    carbLabel: "Carbs (g/day)",
                    caloriesUnit: "Kcal per day",
                    recommendedTitle: "Recommended freeze‑dried products:",
                    mealRecTitle: "Meal recommendations:",
                    mealRec1: "• 5–6 meals per day in small portions",
                    mealRec2: "• Main meal 2–3 hours before physical activity",
                    mealRec3: "• Required fluid intake: 2–2.5 liters per day",
                    mealRec4: "• Take vitamin supplements with meals",
                    privacyPolicy: "Privacy Policy",
                    loaderText: "Initializing space systems...",
                    authLoginTab: "Login",
                    authRegisterTab: "Register",
                    loginEmailLabel: "Email",
                    loginPasswordLabel: "Password",
                    loginBtn: "Sign in",
                    registerNameLabel: "Name",
                    registerEmailLabel: "Email",
                    registerPasswordLabel: "Password",
                    registerConfirmLabel: "Confirm password",
                    registerBtn: "Sign up",
                    dashboardTitle: "Dashboard",
                    dashboardClose: "Close",
                    tabOverview: "Account",
                    tabBiometrics: "Biometrics",
                    tabAnalyses: "Analyses",
                    tabAIDetector: "AI Detector",
                    tabTelegram: "Telegram",
                    welcomeTitle: "Welcome",
                    userEmailLabel: "Your email",
                    userRegDateLabel: "Registration date",
                    totalDietsLabel: "Saved diets",
                    accountManageTitle: "Account management",
                    actChangePass: "Change password",
                    actVerifyEmail: "Verify email",
                    act2fa: "Two-factor authentication",
                    actEditProfile: "Edit profile",
                    actNotifications: "Notifications",
                    actLanguage: "Language",
                    integrationTitle: "Integrations & services",
                    exportDataTitle: "Data export",
                    exportDataDesc: "Download your information",
                    syncTitle: "Sync",
                    syncDesc: "Connect devices",
                    privacyTitleCard: "Privacy",
                    privacyDescCard: "Manage confidentiality",
                    devTitle: "For developers",
                    apiKeysTitle: "API keys",
                    apiKeysDesc: "Tokens, keys & sessions",
                    webhooksTitle: "Webhooks",
                    webhooksDesc: "Settings & logging",
                    docsTitle: "Documentation",
                    docsDesc: "API, examples, guides",
                    logoutText: "Logout",
                    tgTitle: "Telegram",
                    tgStatusTitle: "Status",
                    tgStatusValue: "Not connected",
                    tgCommandsTitle: "Commands",
                    tgCommandsList: "/start, /bio, /diet",
                    tgCheck: "Check status",
                    tgTest: "Send test",
                    tgHint: 'In Telegram find <strong><a href="https://t.me/CosmoDietAI_bot" target="_blank" style="color: #00d9ff; text-decoration: none; border-bottom: 1px solid #00d9ff;">@CosmoDietAI_bot</a></strong> to link your email and diet.',

                    // Detector / dashboard
                    dashBioTitle: "Parameters & Biometrics",
                    dashAnalysisTitle: "Analysis and Diet History",
                    dashDetectorTitle: "AI Detector YOLOv8",
                    detectorVideoTitle: "Video Feed",
                    detectorResultsTitle: "Results",
                    detectorHistoryTitle: "Session History",
                    detectorStart: "Start",
                    detectorStop: "Stop",
                    detectorSave: "Save Session",
                    dashSaveCabinet: "Save to Cabinet",
                    crewControlText: "Full control over crew nutrition, health monitoring, and inventory management.",
                    activityOptions: ["Low (office)", "Moderate (3-4 workouts/week)", "High (daily workouts)", "Very high (pro athletes)"],
                    gravityOptions: ["Microgravity (space)", "Lunar (0.16g)", "Martian (0.38g)"],
                    stressOptions: ["Low", "Medium", "High"],
                    aiRefresh: "Refresh data",
                    aiStat1Label: "Prediction accuracy",
                    aiStat2Label: "Real-time monitoring",
                    aiStat3Label: "Biometric parameters",
                    aiStat4Label: "Data analysis time",
                    aiDashboardDesc: "The system analyzes data from wearables, medical sensors and biometric scanners to build a dynamic nutrition profile.",
                    benefitsTitle: "Benefits for space missions",
                    benefitAstronautsTitle: "For astronauts",
                    benefitAst1: "Maintain optimal physical fitness",
                    benefitAst2: "Reduce fatigue by 40%",
                    benefitAst3: "Rapid recovery after loads",
                    benefitAst4: "Personalized nutrition approach",
                    benefitMissionsTitle: "For missions",
                    benefitMis1: "Resource and space savings",
                    benefitMis2: "Minimized medical risks",
                    benefitMis3: "Precise crew nutrition control",
                    benefitMis4: "Increased mission reliability",
                    featuresTitleText: "Additional features",
                    featuresSubtitle: "Advanced capabilities for space agencies and individual users",
                    feature1Title: "Astronaut dashboard",
                    feature1Desc: "Personal access to nutrition history, recommendations, biometrics and meal planner.",
                    feature2Title: "Diet export",
                    feature2Desc: "Export a detailed meal plan to PDF, JSON or XML for integration with other systems.",
                    feature3Title: "API for agencies",
                    feature3Desc: "Powerful API to integrate CosmoDiet with existing space agency platforms.",
                    feature4Title: "Admin panel",
                    feature4Desc: "Full control over crew nutrition, health monitoring and inventory management.",
                    aiDashboardTitle: "CosmoDiet AI Monitoring Panel",
                    latestBioTitle: "Latest parameters",
                    latestMissionTitle: "Mission profile",
                    historyBioTitle: "Parameter history",
                    detectorDesc: "Real-time object detection via camera",
                    notifRegisterSuccess: "Registration successful",
                    detectorVideoReady: "Video is playing",
                    detectorVideoError: "Video error",
                    detectorReady: "Camera active. Initializing detector...",
                    detectorCameraError: "Camera error",
                    detectorStopped: "Detector stopped",
                    detectorUnauthorized: "Error: unauthorized",
                    detectorNothing: "nothing detected",
                    detectorFrameLabel: "Frame",
                    detectorDetectedLabel: "Detected",
                    detectorErrorLabel: "Error",
                    alertUnauthorized: "Error: unauthorized",
                    alertNoData: "No data to save",
                    alertSessionSaved: "Session saved to personal account!",
                    alertSessionError: "Save error",
                    aiWelcome: "Hi! I’m the CosmoDiet AI assistant. I can help with the site and answer any questions.",
                    aiChip1: "How to calculate an astronaut's diet?",
                    aiChip2: "Which foods are suitable for space?",
                    aiChip3: "How does defect detection work?",
                    aiInputPlaceholder: "Type your question…",
                    aiSend: "Send",
                    detectorHistoryEmpty: "History is empty",

                    // Personal Cabinet - Diets
                    createDietBtn: "Create Your Diet",
                    tabDiets: "Diets",
                    myDietsTitle: "My Diets",
                    dietCardTitle: "Diet #",
                    dietCreatedDate: "Created date",
                    dietScore: "Score",
                    dietNutrition: "Nutritional value (per day)",
                    dietCalories: "kcal",
                    dietProtein: "g protein",
                    dietFat: "g fat",
                    dietCarbs: "g carbs",
                    dietViewDetails: "View Details",
                    dietSelectedProducts: "Selected Products",
                    dietNoProducts: "No added products",
                    dietEdit: "Edit",
                    dietDelete: "Delete",
                    dietModifyTitle: "Created date"

                },

                kz: {

                    // Метадеректер

                    title: "CosmoDiet — Ғарышқа арналған жекелендірілген тамақтану",



                    // Навигация

                    navHome: "Басты",

                    navProblem: "Мәселе",

                    navSolution: "Шешім",

                    navHowItWorks: "Қалай жұмыс істейді",

                    navSublimation: "Сублимация",

                    navCalculator: "Калькулятор",

                    navTeam: "Команда",



                    // Hero бөлімі

                    heroTitle: "CosmoDiet — Ғарышқа арналған жекелендірілген тамақтану",

                    heroSubtitle: "Астронавтардың денсаулығы үшін жасанды интеллект, биометрия және сублимацияланған тағамдар",

                    heroButton1: "Рационды есептеу",

                    heroButton2: "Қалай жұмыс істейді",



                    // Мәселе

                    problemTitle: "Ғарыштағы стандартталған тамақтану мәселесі",

                    problemDesc: "Астронавтарды тамақтандырудың дәстүрлі тәсілдері микрогравитация жағдайында организмнің жеке қажеттіліктерін есепке алмайды, бұл денсаулыққа кері әсер етеді және миссияның тиімділігін төмендетеді.",

                    problemCard1Title: "Стандартталған тамақтану",

                    problemCard1Text: "Барлық астронавтар үшін бірдей рацион организмнің жеке ерекшеліктерін, метаболизмді және физикалық белсенділікті есепке алмайды, бұл тамақтану тиімділігін 30-40% төмендетеді.",

                    problemCard2Title: "Бұлшықет пен сүйектің жоғалуы",

                    problemCard2Text: "Микрогравитация жағдайында астронавтар айына 1-2% сүйек массасын және 20% бұлшықет массасын жоғалтады, бұл өтемақы үшін арнайы тамақтануды талап етеді.",

                    problemCard3Title: "Жоғары жүктемелер",

                    problemCard3Text: "Ғарыштық миссиялар максималды өнімділікті талап етеді, ал оңтайлы емес тамақтану жұмыс өнімділігін 15-30% төмендетеді, тапсырмаларды орындау тәуекелін арттырады.",

                    problemCard4Title: "Миссия тәуекелдері",

                    problemCard4Text: "Дұрыс емес тамақтану медициналық проблемалар тәуекелін арттырады, бұл Марсқа және басқа планеталарға ұзақ мерзімді миссиялардың табысты болуына тәуекел төндіреді.",



                    // Шешім

                    solutionTitle: "Шешім — CosmoDiet",

                    solutionDesc: "Жасанды интеллект және биометриялық деректер негізінде ғарыштық миссиялар үшін интеллектуалды жекелендірілген тамақтану жүйесі",

                    solutionStep1: "Деректер",

                    solutionStep1Text: "Астронавттың биометриялық көрсеткіштерін жинау: салмақ, бой, жасы, пульс, белсенділік, генетикалық маркерлер мен метаболизмдік ерекшеліктер.",

                    solutionStep2: "AI-талдау",

                    solutionStep2Text: "Жасанды интеллект деректерді талдап, микрогравитация жағдайында организмнің қажеттіліктерін 95% дәлдікпен болжайды.",

                    solutionStep3: "Жеке рацион",

                    solutionStep3Text: "Ақуыздар, майлар, көмірсулар, дәрумендер, микроэлементтер және биологиялық белсенді заттардың нақты балансы бар жеке тамақтану жоспарын құру.",

                    solutionStep4: "Сәукті экипаж",

                    solutionStep4Text: "Оңтайлы физикалық жағдайды сақтау, шаршауды 40% азайту және бүкіл миссия бойынша максималды өнімділік.",



                    // Қалай жұмыс істейді

                    howItWorksTitle: "Жүйе қалай жұмыс істейді",

                    howItWorksDesc: "Ғарыштық миссиялар үшін жекелендірілген рациондар құрудың алты қадамды процесі",

                    howItWorks1Title: "1. Деректерді енгізу",

                    howItWorks1Text: "Астронавт интуитивті интерфейс арқылы биометриялық деректерді енгізеді: бой, салмақ, жасы, белсенділік деңгейі, миссия ұзақтығы, генетикалық көрсеткіштер және басқа параметрлер.",

                    howItWorks2Title: "2. AI-физиологиялық талдау",

                    howItWorks2Text: "Желілік тор деректерді талдап, ғарыштық ұшудың стресс-факторларын ескере отырып, микрогравитация жағдайында метаболизмдік қажеттіліктерді болжайды.",

                    howItWorks3Title: "3. Тамақтануды есептеу",

                    howItWorks3Text: "Жүйе ғарыштық ұшу жағдайларына түзетулер енгізе отырып, оңтайлы калория мөлшерін, ақуыздардың, майлардың, көмірсулардың, дәрумендер мен микроэлементтердің балансын есептейді.",

                    howItWorks4Title: "4. Өнімдерді таңдау",

                    howItWorks4Text: "Астронавттың дәмдік үлесін ескере отырып, есептелген талаптарға сәйкес келетін сублимацияланған өнімдерді автоматты түрде таңдау.",

                    howItWorks5Title: "5. Дайын рацион",

                    howItWorks5Text: "Күнделікті менюмен, дайындау нұсқауларымен және тамақтану кестесімен ұшу кезеңінің барлығы үшін толық рационды құру.",

                    howItWorks6Title: "6. Бақылау және түзету",

                    howItWorks6Text: "Астронавттың жағдайын үздіксіз бақылау және жағдай өзгерген сайын нақты уақытта рационды автоматты түрде түзету.",



                    // Сублимация

                    sublimationTitle: "Сублимация технологиясы",

                    sublimationDesc: "Заманауи сублимациялық кептіру технологиясы құнды заттарды сақтайды және ғарыштағы тағамдарды ұзақ уақыт сақтауды қамтамасыз етеді",

                    sublimation1Title: "Құнды заттарды сақтау",

                    sublimation1Text: "Технология өнімдердегі дәрумендердің, минералдардың және биологиялық белсенді заттардың 90-95% сақтайды.",

                    sublimation2Title: "Ең аз салмақ және көлем",

                    sublimation2Text: "Сублимацияланған өнімдер қарапайым өнімдермен салыстырғанда 5-10 есе жеңіл және 3-7 есе аз орын алады.",

                    sublimation3Title: "Ұзақ сақтау мерзімі",

                    sublimation3Text: "Өнімдер сапасы мен қоректік құнын жоғалтпай 25 жылға дейін қасиеттерін сақтайды.",

                    sublimation4Title: "Микрогравитациядағы қауіпсіздік",

                    sublimation4Text: "Арнайы орауыш салмақсыздық жағдайында уықтар мен сұйықтықтардың таралуына жол бермейді.",



                    // AI Dashboard

                    aiTitle: "Жасанды интеллект және деректерді талдау",

                    aiDesc: "Қуатты машиналық оқыту алгоритмдері оңтайлы тамақтануды жоспарлау үшін нақты уақыт режимінде биометриялық деректерді талдайды",



                    // Калькулятор

                    calculatorTitle: "Интерактивті рацион калькуляторы",

                    calculatorDesc: "Жеке параметрлеріңізге негізделген ғарыштық миссия үшін жеке рационды есептеңіз",

                    calculateButton: "Жеке рационды есептеу",

                    resultTitle: "Ғарыштық миссия үшін сіздің жеке рационыңыз",

                    exportButton: "Рационды PDF түрінде экспорттау",

                    saveButton: "Жеке тіркелгіде сақтау",



                    // Команда

                    teamTitle: "Біздің сарапшылар командасы",

                    teamDesc: "Ғарыштық медицина, диетология, жасанды интеллект және тағам технологиясы саласындағы сарапшылардың пәнаралық командасы",
                    member1Bio: "Хакатонда көрсету үшін адаптивті интерфейс пен UI әзірлейді.",
                    member2Bio: "Суреттерді, белгілеуді дайындайды және тағам талдауы үшін YOLO модельдерін үйретеді.",
                    member3Bio: "AI модельдерін іріктейді, сервер бөлімін және нәтижелерді өңдеуді налғалайды.",
                    member4Bio: "Команда жұмысын ұйымдастырады, жоба стратегиясы мен қорытынды презентацияға жауап береді.",

                    // Футер

                    footerText: "Келесі буын ғарыштық миссиялары үшін интеллектуалды жекелендірілген тамақтану жүйесі",

                    copyright: "© 2023 CosmoDiet. Барлық құқықтар қорғалған.",

                    missionText: "Марсқа және алыс планеталарға болашақ ғарыштық миссиялар үшін жасалған",
                    footerContactsTitle: "Байланыс",
                    footerAddress: "Астана, Қазақстан",
                    footerPhone: "+7 (495) 123-45-67",
                    footerEmail: "info@cosmodiet.space",
                    footerHours: "Дс-Жм: 9:00-18:00",
                    footerPartnersTitle: "Серіктестер",
                    partner1: "Роскосмос",
                    partner2: "NASA",
                    partner3: "ESA (Еуропалық ғарыш агенттігі)",
                    partner4: "SpaceX",
                    partner5: "Blue Origin",
                    footerQuickTitle: "Жылдам сілтемелер",
                    quickHome: "Басты бет",
                    quickProblem: "Мәселе",
                    quickSolution: "Шешім",
                    quickCalculator: "Калькулятор",
                    quickTeam: "Команда",

                    // Формалар/калькулятор
                    heightLabel: "Бой (см)",
                    weightLabel: "Салмақ (кг)",
                    ageLabel: "Жасы",
                    activityLabel: "Белсенділік деңгейі",
                    missionDurationLabel: "Миссия ұзақтығы (күн)",
                    gravityLabel: "Гравитация деңгейі",
                    stressLabel: "Стресс деңгейі",
                    proteinLabel: "Ақулар (г/тәулік)",
                    fatLabel: "Майлар (г/тәулік)",
                    carbLabel: "Көмірсулар (г/тәулік)",
                    caloriesUnit: "Ккал/тәулік",
                    recommendedTitle: "Ұсынылған сублимацияланған өнімдер:",
                    mealRecTitle: "Тамақтану бойынша ұсынымдар:",
                    mealRec1: "• Күніне 5-6 рет шағын бөліктермен",
                    mealRec2: "• Негізгі тамақтану жаттығуға 2-3 сағат қалғанда",
                    mealRec3: "• Міндетті сұйықтық: күніне 2–2.5 литр",
                    mealRec4: "• Витаминдерді тамақ кезінде қабылдаңыз",
                    privacyPolicy: "Құпиялылық саясаты",
                    loaderText: "Ғарыштық жүйелерді инициализациялау...",
                    authLoginTab: "Кіру",
                    authRegisterTab: "Тіркелу",
                    loginEmailLabel: "Email",
                    loginPasswordLabel: "Құпиясөз",
                    loginBtn: "Кіру",
                    registerNameLabel: "Аты",
                    registerEmailLabel: "Email",
                    registerPasswordLabel: "Құпиясөз",
                    registerConfirmLabel: "Құпиясөзді растау",
                    registerBtn: "Тіркелу",
                    dashboardTitle: "Жеке кабинет",
                    dashboardClose: "Жабу",
                    tabOverview: "Аккаунт",
                    tabBiometrics: "Биометрия",
                    tabAnalyses: "Талдаулар",
                    tabAIDetector: "ИИ Детектор",
                    tabTelegram: "Telegram",
                    welcomeTitle: "Қош келдіңіз",
                    userEmailLabel: "Сіздің email",
                    userRegDateLabel: "Тіркелу күні",
                    totalDietsLabel: "Сақталған рациондар",
                    accountManageTitle: "Аккаунтты басқару",
                    actChangePass: "Құпиясөзді өзгерту",
                    actVerifyEmail: "Поштаны тексеру",
                    act2fa: "Екі факторлы аутентификация",
                    actEditProfile: "Профильді өңдеу",
                    actNotifications: "Хабарландырулар",
                    actLanguage: "Тіл",
                    integrationTitle: "Интеграциялар және сервистер",
                    exportDataTitle: "Деректерді экспорттау",
                    exportDataDesc: "Ақпаратыңызды жүктеп алыңыз",
                    syncTitle: "Синхрондау",
                    syncDesc: "Құрылғыларды қосыңыз",
                    privacyTitleCard: "Құпиялылық",
                    privacyDescCard: "Құпиялылықты басқару",
                    devTitle: "Әзірлеушілерге",
                    apiKeysTitle: "API кілттері",
                    apiKeysDesc: "Токендер, кілттер және сессиялар",
                    webhooksTitle: "Webhooks",
                    webhooksDesc: "Баптаулар және логтар",
                    docsTitle: "Құжаттама",
                    docsDesc: "API, мысалдар, нұсқаулықтар",
                    logoutText: "Шығу",
                    tgTitle: "Telegram",
                    tgStatusTitle: "Статус",
                    tgStatusValue: "Қосылмаған",
                    tgCommandsTitle: "Бұйрықтар",
                    tgCommandsList: "/start, /bio, /diet",
                    tgCheck: "Статусты тексеру",
                    tgTest: "Тест жіберу",
                    tgHint: 'Telegram-да <strong><a href="https://t.me/CosmoDietAI_bot" target="_blank" style="color: #00d9ff; text-decoration: none; border-bottom: 1px solid #00d9ff;">@CosmoDietAI_bot</a></strong> табыңыз, email және рационды байланыстыру үшін.',

                    // Детектор / дашборд
                    dashBioTitle: "Параметрлер және биометрия",
                    dashAnalysisTitle: "Талдаулар және рацион тарихы",
                    dashDetectorTitle: "ИИ Детектор YOLOv8",
                    detectorVideoTitle: "Бейне ағыны",
                    detectorResultsTitle: "Нәтижелер",
                    detectorHistoryTitle: "Сессия тарихы",
                    detectorStart: "Бастау",
                    detectorStop: "Тоқтату",
                    detectorSave: "Сессияны сақтау",
                    dashSaveCabinet: "Жеке кабинетке сақтау",
                    crewControlText: "Экипаждың тамақтануын бақылау, денсаулық мониторингі және қорларды басқару.",
                    activityOptions: ["Төмен (офистік жұмыс)", "Орташа (аптасына 3-4 жаттығу)", "Жоғары (күнделікті жаттығу)", "Өте жоғары (кәсіби спорт)"],
                    gravityOptions: ["Микрогравитация (ғарыш)", "Айлық (0.16g)", "Марс (0.38g)"],
                    stressOptions: ["Төмен", "Орташа", "Жоғары"],
                    aiRefresh: "Деректерді жаңарту",
                    aiStat1Label: "Болжам дәлдігі",
                    aiStat2Label: "Нақты уақыттағы мониторинг",
                    aiStat3Label: "Биометриялық параметрлер",
                    aiStat4Label: "Деректерді талдау уақыты",
                    aiDashboardDesc: "Жүйе киілетін құрылғылар, медициналық датчиктер және биометриялық сканерлер деректерін талдап, динамикалық тамақтану профилін құрады.",
                    benefitsTitle: "Ғарыш миссиялары үшін артықшылықтар",
                    benefitAstronautsTitle: "Астронавттар үшін",
                    benefitAst1: "Оптималды физикалық қалыпты сақтау",
                    benefitAst2: "Шаршауды 40% төмендету",
                    benefitAst3: "Жүктемеден кейін тез қалпына келу",
                    benefitAst4: "Жекелендірілген тамақтану тәсілі",
                    benefitMissionsTitle: "Миссиялар үшін",
                    benefitMis1: "Ресурстар мен кеңістікті үнемдеу",
                    benefitMis2: "Медициналық тәуекелдерді азайту",
                    benefitMis3: "Экипаж тамақтануын дәл бақылау",
                    benefitMis4: "Миссия сенімділігін арттыру",
                    featuresTitleText: "Қосымша мүмкіндіктер",
                    featuresSubtitle: "Ғарыш агенттіктері мен жеке пайдаланушылар үшін кеңейтілген функциялар",
                    feature1Title: "Астронавт кабинеті",
                    feature1Desc: "Тамақтану тарихына, ұсынымдарға, биометрияға және рацион жоспарлағышына жеке қолжетімділік.",
                    feature2Title: "Рационды экспорттау",
                    feature2Desc: "PDF, JSON немесе XML форматтарында толық жоспарды экспорттау және басқа жүйелерге біріктіру.",
                    feature3Title: "Агенттіктерге арналған API",
                    feature3Desc: "CosmoDiet жүйесін қолданыстағы ғарыш агенттігі платформаларына интеграциялау үшін қуатты API.",
                    feature4Title: "Әкімшілік панель",
                    feature4Desc: "Экипаж тамақтануын толық бақылау, денсаулық мониторингі және қорларды басқару.",
                    aiDashboardTitle: "CosmoDiet AI мониторинг панелі",
                    latestBioTitle: "Соңғы параметрлер",
                    latestMissionTitle: "Миссия профилі",
                    historyBioTitle: "Параметрлер тарихы",
                    detectorDesc: "Камера арқылы нақты уақыттағы объектілерді анықтау",
                    notifRegisterSuccess: "Тіркелу сәтті өтті",
                    detectorVideoReady: "Видео ойнатылуда",
                    detectorVideoError: "Видео қатесі",
                    detectorReady: "Камера қосулы. Детектор инициализациялануда...",
                    detectorCameraError: "Камера қатесі",
                    detectorStopped: "Детектор тоқтатылды",
                    detectorUnauthorized: "Қате: авторизация жоқ",
                    detectorNothing: "ештеңе табылмады",
                    detectorFrameLabel: "Кадр",
                    detectorDetectedLabel: "Анықталды",
                    detectorErrorLabel: "Қате",
                    alertUnauthorized: "Қате: авторизация жоқ",
                    alertNoData: "Сақтайтын дерек жоқ",
                    alertSessionSaved: "Сессия жеке кабинетке сақталды!",
                    alertSessionError: "Сақтау қатесі",
                    aiWelcome: "Сәлем! Мен CosmoDiet AI көмекшісі. Сайт бойынша көмектесіп, сұрақтарға жауап бере аламын.",
                    aiChip1: "Ғарышкердің рационын қалай есептеу керек?",
                    aiChip2: "Ғарышқа қандай тағамдар жарамды?",
                    aiChip3: "Ақаулықты анықтау қалай жұмыс істейді?",
                    aiInputPlaceholder: "Сұрағыңызды жазыңыз…",
                    aiSend: "Жіберу",
                    detectorHistoryEmpty: "Тарих бос",

                    // Жеке кабинет - Рационы
                    createDietBtn: "Өз рационыңызды құру",
                    tabDiets: "Рационы",
                    myDietsTitle: "Менің рационымдар",
                    dietCardTitle: "Рацион #",
                    dietCreatedDate: "Құрылған күні",
                    dietScore: "Бағалау",
                    dietNutrition: "Қоректік құны (күніне)",
                    dietCalories: "ккал",
                    dietProtein: "г ағзам дағы",
                    dietFat: "г майлар",
                    dietCarbs: "г көмірсутектер",
                    dietViewDetails: "Мәліметтерді қарау",
                    dietSelectedProducts: "Таңдалған өнімдер",
                    dietNoProducts: "Қосылғаны өнімдер жоқ",
                    dietEdit: "Өңдеу",
                    dietDelete: "Жою",
                    dietModifyTitle: "Құрылған күні"

                }

            };

            // Очистка кэша браузера для загрузки новой версии страницы
            if ('caches' in window) {
                caches.keys().then(cacheNames => {
                    cacheNames.forEach(cacheName => {
                        caches.delete(cacheName);
                    });
                });
            }

            // Очистка старых данных в localStorage если версия изменилась
            const CACHE_VERSION = '2.0';
            if (localStorage.getItem('cosmoDietVersion') !== CACHE_VERSION) {
                console.log('✓ Обновление кэша на новую версию');
                localStorage.clear();
                localStorage.setItem('cosmoDietVersion', CACHE_VERSION);
                location.reload();
            }

            let currentLang = 'ru';



            // Функция для обновления текста на странице

            function updatePageText(lang) {

                const texts = languageTexts[lang];

                // helpers
                const setLabelText = (id, val) => {
                    const el = document.getElementById(id);
                    if (el && val !== undefined) el.textContent = val;
                };
                const setLabelTextWithNodes = (id, val) => {
                    const el = document.getElementById(id);
                    if (!el || val === undefined) return;
                    // Очищаем только текстовые узлы, оставляя вложенные элементы
                    Array.from(el.childNodes).forEach(node => {
                        if (node.nodeType === 3) {
                            node.textContent = val;
                        }
                    });
                };
                const setIconText = (id, val) => {
                    const el = document.getElementById(id);
                    if (!el || val === undefined) return;
                    const icon = el.querySelector('i');
                    if (icon) {
                        const iconClass = Array.from(icon.classList).join(' ');
                        el.innerHTML = `<i class="${iconClass}"></i> ${val}`;
                    } else {
                        el.textContent = val;
                    }
                };
                const setIconAction = (id, iconClass, val) => {
                    const el = document.getElementById(id);
                    if (el && val !== undefined) {
                        const svg = el.querySelector('svg');
                        if (svg) {
                            // Preserve SVG, replace only text
                            Array.from(el.childNodes).forEach(n => { if (n.nodeType === 3) n.remove(); });
                            el.appendChild(document.createTextNode(val));
                        } else {
                            el.innerHTML = `<i class="fas ${iconClass}"></i> ${val}`;
                        }
                    }
                };
                const setInlineHeading = (el, val) => {
                    if (!el || val === undefined) return;
                    // Очищаем все текстовые узлы в элементе, оставляя иконки
                    Array.from(el.childNodes).forEach(node => {
                        if (node.nodeType === 3) {
                            node.remove();
                        }
                    });
                    // Добавляем новый текст в конце
                    el.appendChild(document.createTextNode(` ${val}`));
                };



                // Обновляем заголовок страницы

                document.title = texts.title;



                // Обновляем навигацию

                document.querySelectorAll('nav a').forEach((link, index) => {

                    const navKeys = ['navHome', 'navProblem', 'navSolution', 'navHowItWorks', 'navSublimation', 'navCalculator', 'navTeam'];

                    if (index < navKeys.length) {

                        link.textContent = texts[navKeys[index]];

                    }

                });



                // Обновляем мобильное меню

                document.querySelectorAll('.mobile-menu a').forEach((link, index) => {

                    const navKeys = ['navHome', 'navProblem', 'navSolution', 'navHowItWorks', 'navSublimation', 'navCalculator', 'navTeam'];

                    if (index < navKeys.length) {

                        link.textContent = texts[navKeys[index]];

                    }

                });



                // Обновляем Hero секцию

                document.querySelector('.hero h1').textContent = texts.heroTitle;

                document.querySelector('.hero-subtitle').textContent = texts.heroSubtitle;

                document.querySelector('.hero-buttons .btn').textContent = texts.heroButton1;

                document.querySelector('.hero-buttons .btn-outline').textContent = texts.heroButton2;



                // Обновляем секцию "Проблема"

                document.querySelector('#problem h2').textContent = texts.problemTitle;

                document.querySelector('#problem p').textContent = texts.problemDesc;



                const problemCards = document.querySelectorAll('#problem .card');

                if (problemCards.length >= 4) {

                    problemCards[0].querySelector('h3').textContent = texts.problemCard1Title;

                    problemCards[0].querySelector('p').textContent = texts.problemCard1Text;



                    problemCards[1].querySelector('h3').textContent = texts.problemCard2Title;

                    problemCards[1].querySelector('p').textContent = texts.problemCard2Text;



                    problemCards[2].querySelector('h3').textContent = texts.problemCard3Title;

                    problemCards[2].querySelector('p').textContent = texts.problemCard3Text;



                    problemCards[3].querySelector('h3').textContent = texts.problemCard4Title;

                    problemCards[3].querySelector('p').textContent = texts.problemCard4Text;

                }



                // Обновляем секцию "Решение"

                document.querySelector('#solution h2').textContent = texts.solutionTitle;

                document.querySelector('#solution p').textContent = texts.solutionDesc;



                const solutionSteps = document.querySelectorAll('#solution .workflow-step');

                if (solutionSteps.length >= 4) {

                    solutionSteps[0].querySelector('h3').textContent = texts.solutionStep1;

                    solutionSteps[0].querySelector('p').textContent = texts.solutionStep1Text;



                    solutionSteps[1].querySelector('h3').textContent = texts.solutionStep2;

                    solutionSteps[1].querySelector('p').textContent = texts.solutionStep2Text;



                    solutionSteps[2].querySelector('h3').textContent = texts.solutionStep3;

                    solutionSteps[2].querySelector('p').textContent = texts.solutionStep3Text;



                    solutionSteps[3].querySelector('h3').textContent = texts.solutionStep4;

                    solutionSteps[3].querySelector('p').textContent = texts.solutionStep4Text;

                }



                // Обновляем секцию "Как работает"

                document.querySelector('#how-it-works h2').textContent = texts.howItWorksTitle;

                document.querySelector('#how-it-works p').textContent = texts.howItWorksDesc;



                const howItWorksCards = document.querySelectorAll('#how-it-works .card');

                if (howItWorksCards.length >= 6) {

                    howItWorksCards[0].querySelector('h3').textContent = texts.howItWorks1Title;

                    howItWorksCards[0].querySelector('p').textContent = texts.howItWorks1Text;



                    howItWorksCards[1].querySelector('h3').textContent = texts.howItWorks2Title;

                    howItWorksCards[1].querySelector('p').textContent = texts.howItWorks2Text;



                    howItWorksCards[2].querySelector('h3').textContent = texts.howItWorks3Title;

                    howItWorksCards[2].querySelector('p').textContent = texts.howItWorks3Text;



                    howItWorksCards[3].querySelector('h3').textContent = texts.howItWorks4Title;

                    howItWorksCards[3].querySelector('p').textContent = texts.howItWorks4Text;



                    howItWorksCards[4].querySelector('h3').textContent = texts.howItWorks5Title;

                    howItWorksCards[4].querySelector('p').textContent = texts.howItWorks5Text;



                    howItWorksCards[5].querySelector('h3').textContent = texts.howItWorks6Title;

                    howItWorksCards[5].querySelector('p').textContent = texts.howItWorks6Text;

                }



                // Обновляем секцию "Сублимация"

                document.querySelector('#sublimation h2').textContent = texts.sublimationTitle;

                document.querySelector('#sublimation p').textContent = texts.sublimationDesc;



                const sublimationItems = document.querySelectorAll('#sublimation .sublimation-item');

                if (sublimationItems.length >= 4) {

                    sublimationItems[0].querySelector('h3').textContent = texts.sublimation1Title;

                    sublimationItems[0].querySelector('p').textContent = texts.sublimation1Text;



                    sublimationItems[1].querySelector('h3').textContent = texts.sublimation2Title;

                    sublimationItems[1].querySelector('p').textContent = texts.sublimation2Text;



                    sublimationItems[2].querySelector('h3').textContent = texts.sublimation3Title;

                    sublimationItems[2].querySelector('p').textContent = texts.sublimation3Text;



                    sublimationItems[3].querySelector('h3').textContent = texts.sublimation4Title;

                    sublimationItems[3].querySelector('p').textContent = texts.sublimation4Text;

                }



                // Преимущества
                setLabelText('benefitsTitle', texts.benefitsTitle);
                setLabelText('benefitAstronautsTitle', texts.benefitAstronautsTitle);
                setLabelText('benefitAst1', texts.benefitAst1);
                setLabelText('benefitAst2', texts.benefitAst2);
                setLabelText('benefitAst3', texts.benefitAst3);
                setLabelText('benefitAst4', texts.benefitAst4);
                setLabelText('benefitMissionsTitle', texts.benefitMissionsTitle);
                setLabelText('benefitMis1', texts.benefitMis1);
                setLabelText('benefitMis2', texts.benefitMis2);
                setLabelText('benefitMis3', texts.benefitMis3);
                setLabelText('benefitMis4', texts.benefitMis4);
                setLabelText('member1Bio', texts.member1Bio);
                setLabelText('member2Bio', texts.member2Bio);
                setLabelText('member3Bio', texts.member3Bio);
                setLabelText('member4Bio', texts.member4Bio);

                // Обновляем секцию "AI & Data"

                document.querySelector('#ai-data h2').textContent = texts.aiTitle;

                document.querySelector('#ai-data p').textContent = texts.aiDesc;
                setLabelText('aiDashboardTitle', texts.aiDashboardTitle);
                const aiRefreshBtn = document.getElementById('aiRefreshBtn');
                if (aiRefreshBtn) aiRefreshBtn.innerHTML = `<i class="fas fa-sync-alt"></i> ${texts.aiRefresh}`;
                setLabelText('aiStat1Label', texts.aiStat1Label);
                setLabelText('aiStat2Label', texts.aiStat2Label);
                setLabelText('aiStat3Label', texts.aiStat3Label);
                setLabelText('aiStat4Label', texts.aiStat4Label);
                setLabelText('aiDashboardDesc', texts.aiDashboardDesc);



                // Обновляем секцию "Калькулятор"

                document.querySelector('#calculator h2').textContent = texts.calculatorTitle;

                document.querySelector('#calculator p').textContent = texts.calculatorDesc;

                document.querySelector('#calculateBtn').innerHTML = `<i class="fas fa-calculator"></i> ${texts.calculateButton}`;

                document.querySelector('#calculatorResult h3').textContent = texts.resultTitle;

                document.querySelector('#exportBtn').innerHTML = `<i class="fas fa-download"></i> ${texts.exportButton}`;

                document.querySelector('#saveBtn').innerHTML = `<i class="fas fa-save"></i> ${texts.saveButton}`;
                // Формы
                const setLabel = (selector, value) => { const el = document.querySelector(selector); if (el) el.textContent = value; };
                setLabel('label[for="height"]', texts.heightLabel);
                setLabel('label[for="weight"]', texts.weightLabel);
                setLabel('label[for="age"]', texts.ageLabel);
                setLabel('label[for="activity"]', texts.activityLabel);
                setLabel('label[for="missionDuration"]', texts.missionDurationLabel);
                setLabel('label[for="gravity"]', texts.gravityLabel);
                setLabel('label[for="stressLevel"]', texts.stressLabel);
                // Опции селектов
                const activity = document.getElementById('activity');
                if (activity && texts.activityOptions) {
                    activity.options[0].text = texts.activityOptions[0];
                    activity.options[1].text = texts.activityOptions[1];
                    activity.options[2].text = texts.activityOptions[2];
                    activity.options[3].text = texts.activityOptions[3];
                }
                const gravity = document.getElementById('gravity');
                if (gravity && texts.gravityOptions) {
                    gravity.options[0].text = texts.gravityOptions[0];
                    gravity.options[1].text = texts.gravityOptions[1];
                    gravity.options[2].text = texts.gravityOptions[2];
                }
                const stress = document.getElementById('stressLevel');
                if (stress && texts.stressOptions) {
                    stress.options[0].text = texts.stressOptions[0];
                    stress.options[1].text = texts.stressOptions[1];
                    stress.options[2].text = texts.stressOptions[2];
                }
                // Вывод результатов
                const unit = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };
                unit('caloriesUnit', texts.caloriesUnit);
                unit('proteinUnit', texts.proteinLabel);
                unit('fatUnit', texts.fatLabel);
                unit('carbUnit', texts.carbLabel);
                const recTitle = document.getElementById('recommendedTitle');
                if (recTitle) recTitle.textContent = texts.recommendedTitle;
                setLabelText('mealRecTitle', texts.mealRecTitle);
                setLabelText('mealRec1', texts.mealRec1);
                setLabelText('mealRec2', texts.mealRec2);
                setLabelText('mealRec3', texts.mealRec3);
                setLabelText('mealRec4', texts.mealRec4);

                // Дополнительные функции
                setLabelText('featuresTitle', texts.featuresTitleText);
                setLabelText('featuresSubtitle', texts.featuresSubtitle);
                setLabelText('feature1Title', texts.feature1Title);
                setLabelText('feature1Desc', texts.feature1Desc);
                setLabelText('feature2Title', texts.feature2Title);
                setLabelText('feature2Desc', texts.feature2Desc);
                setLabelText('feature3Title', texts.feature3Title);
                setLabelText('feature3Desc', texts.feature3Desc);
                setLabelText('feature4Title', texts.feature4Title);
                setLabelText('feature4Desc', texts.feature4Desc);



                // Обновляем секцию "Команда"

                document.querySelector('#team h2').textContent = texts.teamTitle;

                document.querySelector('#team p').textContent = texts.teamDesc;



                // Обновляем футер

                document.querySelector('.footer-content p').textContent = texts.footerText;

                document.querySelector('.footer-bottom p:first-child').textContent = texts.copyright;

                document.querySelector('.footer-bottom p:nth-child(2)').textContent = texts.missionText;
                setLabelText('footerContactsTitle', texts.footerContactsTitle);
                setIconText('footerAddress', texts.footerAddress);
                setIconText('footerPhone', texts.footerPhone);
                setIconText('footerEmail', texts.footerEmail);
                setIconText('footerHours', texts.footerHours);
                setLabelText('footerPartnersTitle', texts.footerPartnersTitle);
                setLabelText('partner1', texts.partner1);
                setLabelText('partner2', texts.partner2);
                setLabelText('partner3', texts.partner3);
                setLabelText('partner4', texts.partner4);
                setLabelText('partner5', texts.partner5);
                setLabelText('footerQuickTitle', texts.footerQuickTitle);
                setLabelText('quickHome', texts.quickHome);
                setLabelText('quickProblem', texts.quickProblem);
                setLabelText('quickSolution', texts.quickSolution);
                setLabelText('quickCalculator', texts.quickCalculator);
                setLabelText('quickTeam', texts.quickTeam);

                // Дашборд и детектор
                const dbio = document.getElementById('dashBioTitle');
                if (dbio) dbio.textContent = texts.dashBioTitle;
                const dan = document.getElementById('dashAnalysisTitle');
                if (dan) dan.textContent = texts.dashAnalysisTitle;
                const ddet = document.getElementById('dashDetectorTitle');
                setInlineHeading(ddet, texts.dashDetectorTitle);
                setLabelText('latestBioTitle', texts.latestBioTitle);
                setLabelText('latestMissionTitle', texts.latestMissionTitle);
                setLabelText('historyBioTitle', texts.historyBioTitle);
                setLabelText('detectorDesc', texts.detectorDesc);
                const dvTitle = document.getElementById('detectorVideoTitle');
                setInlineHeading(dvTitle, texts.detectorVideoTitle);
                const drTitle = document.getElementById('detectorResultsTitle');
                setInlineHeading(drTitle, texts.detectorResultsTitle);
                const dhTitle = document.getElementById('detectorHistoryTitle');
                setInlineHeading(dhTitle, texts.detectorHistoryTitle);
                const detStartBtn = document.getElementById('detectorStart');
                if (detStartBtn) detStartBtn.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="vertical-align:middle;margin-right:6px"><polygon points="5 3 19 12 5 21 5 3"/></svg> ${texts.detectorStart}`;
                const detStopBtn = document.getElementById('detectorStop');
                if (detStopBtn) detStopBtn.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="vertical-align:middle;margin-right:6px"><rect x="4" y="4" width="16" height="16" rx="2"/></svg> ${texts.detectorStop}`;
                const detSaveBtn = document.getElementById('detectorSaveSession');
                if (detSaveBtn) detSaveBtn.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg> ${texts.detectorSave}`;
                const dashSaveCab = document.getElementById('saveBtn');
                if (dashSaveCab) dashSaveCab.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg> ${texts.dashSaveCabinet}`;
                const crewText = document.getElementById('crewControlText');
                if (crewText) crewText.textContent = texts.crewControlText;
                const privacy = document.getElementById('privacyPolicyLink');
                if (privacy) privacy.textContent = texts.privacyPolicy;

                // Лоадер/авторизация
                const loaderT = document.getElementById('loaderText');
                if (loaderT) loaderT.textContent = texts.loaderText;
                const loginTab = document.getElementById('authLoginTab');
                if (loginTab) loginTab.textContent = texts.authLoginTab;
                const registerTab = document.getElementById('authRegisterTab');
                if (registerTab) registerTab.textContent = texts.authRegisterTab;
                setLabelText('loginEmailLabel', texts.loginEmailLabel);
                setLabelText('loginPasswordLabel', texts.loginPasswordLabel);
                const loginBtnText = document.getElementById('loginBtnText');
                if (loginBtnText) loginBtnText.textContent = texts.loginBtn;
                setLabelText('registerNameLabel', texts.registerNameLabel);
                setLabelText('registerEmailLabel', texts.registerEmailLabel);
                setLabelText('registerPasswordLabel', texts.registerPasswordLabel);
                setLabelText('registerConfirmLabel', texts.registerConfirmLabel);
                const registerBtnText = document.getElementById('registerBtnText');
                if (registerBtnText) registerBtnText.textContent = texts.registerBtn;

                // Дашборд/личный кабинет
                setLabelText('dashboardTitle', texts.dashboardTitle);
                setLabelText('dashboardClose', texts.dashboardClose);
                setLabelText('tabOverview', texts.tabOverview);
                setLabelText('tabBiometrics', texts.tabBiometrics);
                setLabelText('tabAnalyses', texts.tabAnalyses);
                setLabelText('tabAIDetector', texts.tabAIDetector);
                setLabelText('tabTelegram', texts.tabTelegram);
                setLabelTextWithNodes('userEmailLabelText', `${texts.userEmailLabel}: `);
                setLabelTextWithNodes('userRegDateLabel', `${texts.userRegDateLabel}: `);
                setLabelTextWithNodes('totalDietsLabel', `${texts.totalDietsLabel}: `);
                setLabelText('accountManageTitle', texts.accountManageTitle);
                setIconAction('actChangePass', 'fa-key', texts.actChangePass);
                setIconAction('actVerifyEmail', 'fa-envelope', texts.actVerifyEmail);
                setIconAction('act2fa', 'fa-shield-alt', texts.act2fa);
                setIconAction('actEditProfile', 'fa-user-edit', texts.actEditProfile);
                setIconAction('actNotifications', 'fa-bell', texts.actNotifications);
                setIconAction('actLanguage', 'fa-language', texts.actLanguage);
                setLabelText('integrationTitle', texts.integrationTitle);
                setLabelText('exportDataTitle', texts.exportDataTitle);
                setLabelText('exportDataDesc', texts.exportDataDesc);
                setLabelText('syncTitle', texts.syncTitle);
                setLabelText('syncDesc', texts.syncDesc);
                setLabelText('privacyTitle', texts.privacyTitleCard);
                setLabelText('privacyDesc', texts.privacyDescCard);
                setLabelText('devTitle', texts.devTitle);
                setLabelText('apiKeysTitle', texts.apiKeysTitle);
                setLabelText('apiKeysDesc', texts.apiKeysDesc);
                setLabelText('webhooksTitle', texts.webhooksTitle);
                setLabelText('webhooksDesc', texts.webhooksDesc);
                setLabelText('docsTitle', texts.docsTitle);
                setLabelText('docsDesc', texts.docsDesc);
                setLabelText('logoutText', texts.logoutText);

                // Telegram блок
                setLabelText('tgTitle', texts.tgTitle);
                setLabelText('tgStatusTitle', texts.tgStatusTitle);
                setLabelText('tgStatus', texts.tgStatusValue);
                setLabelText('tgCommandsTitle', texts.tgCommandsTitle);
                setLabelText('tgCommandsList', texts.tgCommandsList);
                setIconAction('tgCheck', 'fa-satellite-dish', texts.tgCheck);
                setIconAction('tgTest', 'fa-paper-plane', texts.tgTest);
                const tgHint = document.getElementById('tgHint');
                if (tgHint) tgHint.innerHTML = texts.tgHint;
                setLabelText('aiWelcome', texts.aiWelcome);
                setLabelText('aiChip1', texts.aiChip1);
                setLabelText('aiChip2', texts.aiChip2);
                setLabelText('aiChip3', texts.aiChip3);
                const aiInput = document.getElementById('aiInput');
                if (aiInput && texts.aiInputPlaceholder !== undefined) aiInput.placeholder = texts.aiInputPlaceholder;
                const aiSendBtn = document.getElementById('aiSend');
                if (aiSendBtn) aiSendBtn.textContent = texts.aiSend;
                setLabelText('detectorHistoryEmpty', texts.detectorHistoryEmpty);

                // Обновить тексты для рационов
                setLabelText('tabDiets', texts.tabDiets);
                const myDietsTitle = document.querySelector('h4[style*="color: #00d9ff"]');
                if (myDietsTitle && myDietsTitle.textContent.includes('Мои') || myDietsTitle && myDietsTitle.textContent.includes('My')) {
                    myDietsTitle.textContent = texts.myDietsTitle;
                }

                // Обновить кнопку "Создать свой рацион"
                const createDietBtn = document.getElementById('createDietBtn');
                if (createDietBtn) {
                    createDietBtn.innerHTML = '<i class="fas fa-utensils"></i> ' + texts.createDietBtn;
                }

                // Перезагрузить рационы с новыми переводами
                if (typeof loadDiets === 'function') {
                    try { loadDiets(); } catch (e) { console.error('loadDiets error:', e); }
                }

            }



            // Обработчики для выбора языка

            languageOptions.forEach(option => {
                option.addEventListener('click', function () {
                    const lang = this.getAttribute('data-lang');
                    console.log('Switching language to:', lang);
                    currentLang = lang;
                    languageOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    try {
                        updatePageText(lang);
                        console.log('Language updated successfully to:', lang);
                    } catch (e) {
                        console.error('updatePageText error:', e);
                    }
                    languageMenu.classList.remove('active');
                });
            });

            // Инициализация текста при загрузке (не блокируем остальной код при ошибке)
            try { updatePageText(currentLang); } catch (e) { console.error('updatePageText init error', e); }



            // Мобильное меню

            const mobileMenuBtn = document.getElementById('mobileMenuBtn');

            const mobileMenu = document.getElementById('mobileMenu');



            mobileMenuBtn.addEventListener('click', function () {

                mobileMenu.classList.toggle('active');

                const icon = this.querySelector('i');

                if (mobileMenu.classList.contains('active')) {

                    icon.classList.remove('fa-bars');

                    icon.classList.add('fa-times');

                } else {

                    icon.classList.remove('fa-times');

                    icon.classList.add('fa-bars');

                }

            });



            // Закрытие меню при клике на ссылку

            document.querySelectorAll('.mobile-menu a').forEach(link => {

                link.addEventListener('click', function () {

                    mobileMenu.classList.remove('active');

                    mobileMenuBtn.querySelector('i').classList.remove('fa-times');

                    mobileMenuBtn.querySelector('i').classList.add('fa-bars');

                });

            });



            // Плавная прокрутка

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {

                anchor.addEventListener('click', function (e) {

                    e.preventDefault();



                    const targetId = this.getAttribute('href');

                    if (targetId === '#') return;



                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {

                        window.scrollTo({

                            top: targetElement.offsetTop - 100,

                            behavior: 'smooth'

                        });

                    }

                });

            });



            // Анимация появления при скролле

            const fadeElements = document.querySelectorAll('.fade-in');



            const fadeInOnScroll = function () {

                fadeElements.forEach(element => {

                    const elementTop = element.getBoundingClientRect().top;

                    const elementVisible = 150;



                    if (elementTop < window.innerHeight - elementVisible) {

                        element.classList.add('visible');

                    }

                });

            };



            // Проверяем при загрузке и при скролле

            fadeInOnScroll();

            window.addEventListener('scroll', fadeInOnScroll);



            // Калькулятор рациона

            const calculateBtn = document.getElementById('calculateBtn');

            const calculatorResult = document.getElementById('calculatorResult');

            const calorieElement = document.getElementById('calories');

            const proteinElement = document.getElementById('protein');

            const fatElement = document.getElementById('fat');

            const carbsElement = document.getElementById('carbs');

            const recommendedFoodsElement = document.getElementById('recommendedFoods');

            const exportBtn = document.getElementById('exportBtn');



            // Примеры продуктов для рекомендаций

            const foodRecommendations = {

                ru: [

                    "Сублимированная курица",

                    "Лиофилизированные овощи",

                    "Обезвоженные фрукты",

                    "Энергетические батончики",

                    "Протеиновые коктейли",

                    "Омега-3 капсулы",

                    "Витаминные комплексы",

                    "Минерализованная вода",

                    "Сублимированный творог",

                    "Ореховые пасты"

                ],

                en: [

                    "Freeze-dried chicken",

                    "Lyophilized vegetables",

                    "Dehydrated fruits",

                    "Energy bars",

                    "Protein shakes",

                    "Omega-3 capsules",

                    "Vitamin complexes",

                    "Mineralized water",

                    "Freeze-dried cottage cheese",

                    "Nut pastes"

                ],

                kz: [

                    "Сублимацияланған тауық еті",

                    "Лиофилизацияланған көкөністер",

                    "Кептірілген жемістер",

                    "Энергетикалық таяқшалар",

                    "Ақуызды шейкерлер",

                    "Омега-3 капсулалары",

                    "Дәрумендік кешендер",

                    "Минералдандырылған су",

                    "Сублимацияланған ірімшік",

                    "Жаңғақ пасталары"

                ]

            };



            calculateBtn.addEventListener('click', function () {

                // Получаем значения из формы

                const height = parseFloat(document.getElementById('height').value);

                const weight = parseFloat(document.getElementById('weight').value);

                const age = parseFloat(document.getElementById('age').value);

                const activity = parseFloat(document.getElementById('activity').value);

                const pulse = parseFloat(document.getElementById('pulse').value);

                const missionDuration = parseFloat(document.getElementById('missionDuration').value);

                const gravity = parseFloat(document.getElementById('gravity').value);

                const stressLevel = parseFloat(document.getElementById('stressLevel').value);



                // Базовый расчет метаболизма (упрощенный)

                let bmr;

                if (gravity === 1) {

                    // Микрогравитация

                    bmr = (10 * weight + 6.25 * height - 5 * age + 5) * 0.85;

                } else if (gravity === 0.9) {

                    // Лунная гравитация

                    bmr = (10 * weight + 6.25 * height - 5 * age + 5) * 0.92;

                } else {

                    // Марсианская гравитация

                    bmr = (10 * weight + 6.25 * height - 5 * age + 5) * 0.95;

                }



                // Учет активности и стресса

                let calories = bmr * activity * stressLevel;



                // Корректировка на основе пульса (упрощенно)

                if (pulse > 80) {

                    calories *= 1.05;

                } else if (pulse < 65) {

                    calories *= 0.97;

                }



                // Корректировка на длительность миссии

                if (missionDuration > 180) {

                    calories *= 1.1; // Увеличение на 10% для длительных миссий

                }



                // Округляем

                calories = Math.round(calories);



                // Расчет БЖУ

                const protein = Math.round(calories * 0.3 / 4); // 30% от калорий, 4 ккал/г

                const fat = Math.round(calories * 0.25 / 9); // 25% от калорий, 9 ккал/г

                const carbs = Math.round(calories * 0.45 / 4); // 45% от калорий, 4 ккал/г



                // Обновляем результаты

                calorieElement.textContent = calories;

                proteinElement.textContent = protein;

                fatElement.textContent = fat;

                carbsElement.textContent = carbs;



                // Генерируем рекомендации по продуктам

                recommendedFoodsElement.innerHTML = '';

                const numRecommendations = 6;

                const foods = foodRecommendations[currentLang];

                const shuffledFoods = [...foods].sort(() => 0.5 - Math.random());



                for (let i = 0; i < numRecommendations; i++) {

                    const li = document.createElement('li');

                    li.innerHTML = `<i class="fas fa-check" style="color: #00d9ff; margin-right: 10px;"></i> ${shuffledFoods[i]}`;

                    li.style.marginBottom = '8px';

                    recommendedFoodsElement.appendChild(li);

                }



                // Показываем результаты

                calculatorResult.style.display = 'block';



                // Прокручиваем к результатам

                calculatorResult.scrollIntoView({ behavior: 'smooth', block: 'nearest' });



                // Сохраняем биометрию

                saveBioSnapshot();

            });



            // Экспорт в PDF (демо)

            exportBtn.addEventListener('click', function () {

                const messages = {

                    ru: 'Функция экспорта в PDF будет реализована в полной версии системы. Создан текстовый файл с вашим рационом.',

                    en: 'PDF export function will be implemented in the full version of the system. Created a text file with your diet.',

                    kz: 'PDF түрінде экспорттау функциясы жүйенің толық нұсқасында жүзеге асырылады. Сіздің рационыңызбен мәтін файлы жасалды.'

                };



                showNotification(messages[currentLang], 'info');



                // Создаем текстовый файл с рационом

                const calories = document.getElementById('calories').textContent;

                const protein = document.getElementById('protein').textContent;

                const fat = document.getElementById('fat').textContent;

                const carbs = document.getElementById('carbs').textContent;



                const content = `

                    Рацион CosmoDiet

                    Дата: ${new Date().toLocaleString('ru-RU')}

                    Калории: ${calories} ккал/сутки

                    Белки: ${protein} г/сутки

                    Жиры: ${fat} г/сутки

                    Углеводы: ${carbs} г/сутки

                    

                    Рекомендуемые продукты:

                    ${Array.from(document.querySelectorAll('#recommendedFoods li')).map(li => li.textContent.replace('✓', '').trim()).join('\n')}

                `;



                const blob = new Blob([content], { type: 'text/plain' });

                const url = URL.createObjectURL(blob);

                const a = document.createElement('a');

                a.href = url;

                a.download = `cosmodiet_ration_${new Date().toISOString().slice(0, 10)}.txt`;

                document.body.appendChild(a);

                a.click();

                document.body.removeChild(a);

                URL.revokeObjectURL(url);

            });



            // Добавляем эффект glow при наведении на карточки

            document.querySelectorAll('.card, .btn').forEach(element => {

                element.addEventListener('mouseenter', function () {

                    this.style.transform = 'translateY(-5px)';

                });



                element.addEventListener('mouseleave', function () {

                    this.style.transform = 'translateY(0)';

                });

            });



            // Изменение шапки при скролле

            window.addEventListener('scroll', function () {

                const header = document.querySelector('header');

                if (window.scrollY > 50) {

                    header.style.padding = '10px 0';

                    header.style.backdropFilter = 'blur(15px)';

                } else {

                    header.style.padding = '20px 0';

                    header.style.backdropFilter = 'blur(10px)';

                }

            });



            // Закрытие модальных окон при нажатии Escape

            document.addEventListener('keydown', function (e) {

                if (e.key === 'Escape') {

                    authModal.classList.remove('active');

                    dashboardModal.classList.remove('active');

                    document.body.style.overflow = 'auto';

                }

            });



            // Закрытие модальных окон при клике на фон

            [authModal, dashboardModal].forEach(modal => {
                if (!modal) return;
                modal.addEventListener('click', function (e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    }
                });
            });

        });

    </script>

    <!-- Добавьте этот скрипт в существующий JavaScript -->

    <script>

        // Анимация шапки при скролле

        window.addEventListener('scroll', function () {

            const header = document.querySelector('header');

            if (window.scrollY > 50) {

                header.classList.add('scrolled');

            } else {

                header.classList.remove('scrolled');

            }

        });



        // Активная ссылка в навигации

        const sections = document.querySelectorAll('section');

        const navLinks = document.querySelectorAll('nav a');



        window.addEventListener('scroll', function () {

            let current = '';

            sections.forEach(section => {

                const sectionTop = section.offsetTop;

                const sectionHeight = section.clientHeight;

                if (scrollY >= (sectionTop - 150)) {

                    current = section.getAttribute('id');

                }

            });



            navLinks.forEach(link => {

                link.classList.remove('active');

                if (link.getAttribute('href') === `#${current}`) {

                    link.classList.add('active');

                }

            });

        });



        // Анимация кнопок в шапке при загрузке

        document.addEventListener('DOMContentLoaded', function () {

            const controls = document.querySelectorAll('.theme-toggle, .language-toggle, .auth-btn');

            controls.forEach((control, index) => {

                setTimeout(() => {

                    control.style.transform = 'translateY(0)';

                    control.style.opacity = '1';

                }, index * 100);

            });



            // AI Assistant UI

            const aiFab = document.getElementById('aiFab');

            const aiPanel = document.getElementById('aiPanel');

            const aiClose = document.getElementById('aiClose');

            const aiBody = document.getElementById('aiBody');

            const aiInput = document.getElementById('aiInput');

            const aiSend = document.getElementById('aiSend');

            const aiHistory = [];



            function toggleAI(open) {

                aiPanel.classList.toggle('active', open);

                aiPanel.setAttribute('aria-hidden', open ? 'false' : 'true');

            }



            aiFab.addEventListener('click', () => toggleAI(true));

            aiClose.addEventListener('click', () => toggleAI(false));



            function formatMarkdown(text) {
                let html = text
                    .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')
                    .replace(/\*\*(.+?)\*\*/g, '<b>$1</b>')
                    .replace(/\*(.+?)\*/g, '<i>$1</i>')
                    .replace(/^\s*[-•]\s+(.+)$/gm, '<li>$1</li>')
                    .replace(/^\s*\d+\.\s+(.+)$/gm, '<li>$1</li>')
                    .replace(/\n/g, '<br>');
                html = html.replace(/((?:<li>.*?<\/li>(?:<br>)?)+)/g, '<ul>$1</ul>');
                html = html.replace(/<ul>(.*?)<\/ul>/gs, (m, inner) => '<ul>' + inner.replace(/<br>/g, '') + '</ul>');
                return html;
            }

            function addMessage(text, fromUser) {
                const msg = document.createElement('div');
                msg.className = 'ai-message' + (fromUser ? ' user' : '');
                if (fromUser) {
                    msg.textContent = text;
                } else {
                    msg.innerHTML = formatMarkdown(text);
                }
                aiBody.appendChild(msg);
                aiBody.scrollTop = aiBody.scrollHeight;
                aiHistory.push({ role: fromUser ? 'user' : 'assistant', content: text });
            }



            aiBody.addEventListener('click', (e) => {

                if (e.target.classList.contains('ai-chip')) {

                    aiInput.value = e.target.textContent;

                    aiInput.focus();

                }

            });



            async function sendMessage() {

                const text = aiInput.value.trim();

                if (!text) return;

                addMessage(text, true);

                aiInput.value = '';

                aiSend.disabled = true;

                try {

                    const res = await fetch('/api/chat', {

                        method: 'POST',

                        headers: {
                            'Content-Type': 'application/json'
                        },

                        body: JSON.stringify({
                            messages: aiHistory
                        })

                    });

                    if (!res.ok) {
                        const err = await res.json().catch(() => ({}));
                        throw new Error('Ошибка API (' + res.status + '): ' + (err.error?.message || res.statusText));
                    }

                    const data = await res.json();

                    const reply = data.reply || 'Не удалось получить ответ.';

                    addMessage(reply);

                } catch (e) {

                    addMessage('❌ ' + (e.message || 'Не удалось подключиться к ИИ. Попробуйте позже.'));

                } finally {

                    aiSend.disabled = false;

                }

            }



            aiSend.addEventListener('click', sendMessage);

            aiInput.addEventListener('keydown', (e) => {

                if (e.key === 'Enter') sendMessage();

            });

        });

    </script>

    <!-- AI Assistant -->

    <div class="ai-assistant">

        <button class="ai-fab" id="aiFab" aria-label="Open assistant">

            <div class="ai-fab-inner">AI</div>

        </button>

    </div>



    <div class="ai-panel" id="aiPanel" aria-hidden="true">

        <div class="ai-stars"></div>

        <div class="ai-nebula"></div>

        <div class="ai-orbit"></div>

        <div class="ai-panel-header">

            <div class="ai-title"><span class="dot"></span> COSMODIET AI</div>

            <button class="ai-close" id="aiClose" aria-label="Close assistant">&times;</button>

        </div>

        <div class="ai-body" id="aiBody">

            <div class="ai-message" id="aiWelcome">Привет! Я AI‑ассистент CosmoDiet. Могу помочь по сайту и ответить на
                любые вопросы.</div>

            <div class="ai-suggestions">

                <div class="ai-chip" id="aiChip1">Как рассчитать рацион для космонавта?</div>

                <div class="ai-chip" id="aiChip2">Какие продукты подходят для космоса?</div>

                <div class="ai-chip" id="aiChip3">Как работает детекция дефектов?</div>

            </div>

        </div>

        <div class="ai-input">

            <input id="aiInput" type="text" placeholder="Напишите вопрос…" />

            <button id="aiSend">Отправить</button>

        </div>

    </div>

    <script>
        // Создание тестового пользователя для демонстрации личного кабинета
        if (!localStorage.getItem('cosmodiet_user')) {
            const testUser = {
                id: '1',
                name: 'Тестовый Пользователь',
                email: 'test@cosmodiet.ru',
                regDate: '2024-01-15'
            };
            localStorage.setItem('cosmodiet_user', JSON.stringify(testUser));
            localStorage.setItem('cosmodiet_token', 'test_token_12345');
            // синхронизируем переменные рантайма, чтобы кнопка "Личный кабинет" сразу работала
            currentUser = testUser;
            authToken = 'test_token_12345';
            updateAuthButton();
        }

        // ===== YOLOv8 Детектор =====
        const detectorVideo = document.getElementById('detectorVideo');
        const detectorCanvas = document.getElementById('detectorCanvas');
        const detectorCtx = detectorCanvas.getContext('2d');
        const detectorResults = document.getElementById('detectorResults');
        const detectorStart = document.getElementById('detectorStart');
        const detectorStop = document.getElementById('detectorStop');
        const detectorSaveSession = document.getElementById('detectorSaveSession');
        const detectorSessions = document.getElementById('detectorSessions');
        const detectorModelsSelector = document.getElementById('detectorModelsSelector');

        let detectorStream = null;
        let detectorRunning = false;
        let detectorSessionData = [];
        let selectedDetectorModel = 'can_defect'; // Выбранная по умолчанию модель

        // Обработчик выбора модели детектора
        if (detectorModelsSelector) {
            detectorModelsSelector.addEventListener('click', (e) => {
                const card = e.target.closest('.detector-model-card');
                if (card) {
                    // Удаляем класс active со всех карточек
                    detectorModelsSelector.querySelectorAll('.detector-model-card').forEach(c => {
                        c.classList.remove('active');
                    });
                    // Добавляем класс active к выбранной карточке
                    card.classList.add('active');
                    // Сохраняем выбранную модель
                    selectedDetectorModel = card.getAttribute('data-model');
                    console.log(`✓ Выбран детектор: ${selectedDetectorModel}`);
                }
            });
        }

        detectorStart.addEventListener('click', async () => {
            try {
                const constraints = {
                    video: {
                        width: { ideal: 640 },
                        height: { ideal: 480 },
                        facingMode: 'user'
                    },
                    audio: false
                };

                detectorStream = await navigator.mediaDevices.getUserMedia(constraints);
                detectorVideo.srcObject = detectorStream;

                // Убедимся что видео загружается
                detectorVideo.onplay = () => {
                    console.log('✓ Видео воспроизводится');
                    detectorCanvas.width = detectorVideo.videoWidth;
                    detectorCanvas.height = detectorVideo.videoHeight;
                    startDetection();
                };

                detectorVideo.onerror = (e) => {
                    detectorResults.innerHTML = `<p style="color: #f00;">✗ Ошибка видео: ${e}</p>`;
                };

                detectorVideo.play();

                detectorRunning = true;
                detectorStart.disabled = true;
                detectorStop.disabled = false;
                detectorResults.innerHTML = '<p style="color: #0f0;">✓ Камера активна. Инициализация детектора...</p>';

            } catch (error) {
                console.error('Camera error:', error);
                detectorResults.innerHTML = `<p style="color: #f00;">✗ Ошибка камеры:<br>${error.name}: ${error.message}</p>`;
                detectorStart.disabled = false;
            }
        });

        detectorStop.addEventListener('click', () => {
            detectorRunning = false;
            if (detectorStream) {
                detectorStream.getTracks().forEach(track => track.stop());
            }
            detectorVideo.style.display = 'none';
            detectorCanvas.style.display = 'none';
            detectorCtx.clearRect(0, 0, detectorCanvas.width, detectorCanvas.height);
            detectorStart.disabled = false;
            detectorStop.disabled = true;
            detectorResults.innerHTML = '<p style="color: #666;">Детектор остановлен</p>';
        });

        function startDetection() {
            // Убедимся что canvas имеет правильный размер
            detectorCanvas.width = detectorVideo.videoWidth || 640;
            detectorCanvas.height = detectorVideo.videoHeight || 480;

            const token = localStorage.getItem('cosmodiet_token');
            if (!token) {
                detectorResults.innerHTML = '<p style="color: #f00;">✗ Ошибка: не авторизован</p>';
                detectorRunning = false;
                return;
            }

            console.log(`Canvas size: ${detectorCanvas.width}x${detectorCanvas.height}`);

            let frameCount = 0;
            let lastDetectionTime = 0;
            const DETECTION_INTERVAL = 500; // Детекция каждые 500ms

            const detectFrame = async () => {
                if (!detectorRunning || !detectorStream) {
                    console.log('Detection stopped');
                    return;
                }

                try {
                    // Рисуем видео на canvas
                    if (detectorVideo.readyState === detectorVideo.HAVE_ENOUGH_DATA) {
                        detectorCtx.drawImage(detectorVideo, 0, 0, detectorCanvas.width, detectorCanvas.height);
                        frameCount++;

                        // Отправляем на детекцию каждые N миллисекунд
                        const now = Date.now();
                        if (now - lastDetectionTime > DETECTION_INTERVAL) {
                            lastDetectionTime = now;
                            const imageData = detectorCanvas.toDataURL('image/jpeg', 0.7);

                            const response = await fetch('/api/detect', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    token: token,
                                    image: imageData,
                                    model: selectedDetectorModel
                                })
                            });

                            if (response.ok) {
                                const data = await response.json();

                                // Отрисовываем аннотированное изображение
                                if (data.annotated_image) {
                                    const img = new Image();
                                    img.onload = () => {
                                        if (detectorRunning) {
                                            detectorCtx.drawImage(img, 0, 0);
                                        }
                                    };
                                    img.src = data.annotated_image;
                                }

                                // Обновляем результаты
                                if (data.detections && data.detections.length > 0) {
                                    let resultsHTML = `<p style="color: #0f0;"><strong>📍 ${data.model_name || 'Детектор'}</strong></p><p style="color: #0f0;"><strong>Кадр ${frameCount} - Обнаружено:</strong></p>`;
                                    const classCount = {};
                                    data.detections.forEach(det => {
                                        classCount[det.class] = (classCount[det.class] || 0) + 1;
                                    });
                                    Object.entries(classCount).forEach(([cls, count]) => {
                                        resultsHTML += `<p><img class="results-label-icon" src="https://api.iconify.design/mdi/pin-outline.svg?color=%2300d9ff" alt="">${cls}: <strong>${count}</strong></p>`;
                                    });
                                    detectorResults.innerHTML = resultsHTML;
                                    detectorSessionData.push({
                                        timestamp: new Date().toISOString(),
                                        frame: frameCount,
                                        model: data.model,
                                        model_name: data.model_name,
                                        detections: classCount
                                    });
                                } else {
                                    detectorResults.innerHTML = `<p style="color: #888;">📍 ${data.model_name || 'Детектор'}</p><p style="color: #888;">Кадр ${frameCount} - ничего не обнаружено</p>`;
                                }
                            } else {
                                const error = await response.json();
                                detectorResults.innerHTML = `<p style="color: #f00;">Ошибка: ${error.error}</p>`;
                            }
                        }
                    }
                } catch (error) {
                    console.error('Detection error:', error);
                    detectorResults.innerHTML = `<p style="color: #f00;">✗ ${error.message}</p>`;
                }

                requestAnimationFrame(detectFrame);
            };

            detectFrame();
        }

        detectorSaveSession.addEventListener('click', async () => {
            const token = localStorage.getItem('cosmodiet_token');
            if (!token) {
                alert('Ошибка: не авторизован');
                return;
            }

            if (detectorSessionData.length === 0) {
                alert('Нет данных для сохранения');
                return;
            }

            try {
                const response = await fetch('/api/save_detection_session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        token: token,
                        session: {
                            id: Date.now(),
                            date: new Date().toLocaleString('ru-RU'),
                            detections: detectorSessionData,
                            total_frames: detectorSessionData.length
                        }
                    })
                });

                if (response.ok) {
                    alert('Сессия сохранена в личный кабинет!');
                    detectorSessionData = [];
                    loadDetectorSessions();
                }
            } catch (error) {
                alert('Ошибка сохранения: ' + error.message);
            }
        });

        function loadDetectorSessions() {
            const token = localStorage.getItem('cosmodiet_token');
            if (!token) return;

            fetch('/api/get_detection_sessions', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ token: token })
            }).then(res => res.json()).then(data => {
                if (data.sessions && data.sessions.length > 0) {
                    let html = '';
                    data.sessions.forEach(session => {
                        html += `<div style="padding: 10px; margin: 5px 0; background: rgba(0, 217, 255, 0.1); border-radius: 8px; border-left: 3px solid #00d9ff;">
                        <p><strong>${session.date}</strong></p>
                        <p style="font-size: 0.85rem; color: #aaa;">Кадров: ${session.total_frames}</p>
                    </div>`;
                    });
                    detectorSessions.innerHTML = html;
                }
            });
        }

        loadDetectorSessions();

        // ============================================
        // ACCOUNT MANAGEMENT - Модальные окна
        // ============================================

        // Функция для открытия модального окна
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        // Функция для закрытия модального окна
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // Закрытие модальных окон по клику на крестик
        document.querySelectorAll('.modal-close').forEach(btn => {
            btn.addEventListener('click', function () {
                const modal = this.closest('.modal-account');
                if (modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
        });

        // Закрытие модальных окон по Escape
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-account.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = 'auto';
            }
        });

        // Закрытие модальных окон по клику на фон
        document.querySelectorAll('.modal-account').forEach(modal => {
            const overlay = modal.querySelector('.modal-overlay');
            if (overlay) {
                overlay.addEventListener('click', function () {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                });
            }
        });

        // ============================================
        // ============================================
        // ACCOUNT BUTTONS - Обработчики кнопок
        // ============================================

        // Сменить пароль
        const actChangePass = document.getElementById('actChangePass');
        if (actChangePass) {
            actChangePass.addEventListener('click', () => {
                openModal('modalChangePassword');
            });
        }

        // Редактировать профиль
        const actEditProfile = document.getElementById('actEditProfile');
        if (actEditProfile) {
            actEditProfile.addEventListener('click', () => {
                openModal('modalEditProfile');
            });
        }

        // Язык 
        const actLanguage = document.getElementById('actLanguage');
        if (actLanguage) {
            actLanguage.addEventListener('click', () => {
                openModal('modalLanguage');
            });
        }

        // ============================================
        // INTEGRATION CARDS - Обработчики карточек
        // ============================================

        // Экспорт данных - ищем карточку и добавляем обработчик
        const integrationCards = document.querySelectorAll('.dash-section:has(h4#integrationTitle) .dash-card');
        if (integrationCards.length > 0) {
            integrationCards[0].style.cursor = 'pointer';
            integrationCards[0].addEventListener('click', () => {
                openModal('modalExportData');
            });
        }

        // ============================================
        // BUTTON HANDLERS - Кнопки в модалях
        // ============================================

        // Сохранить новый пароль
        const modalChangePassword = document.getElementById('modalChangePassword');
        if (modalChangePassword) {
            const savePwdBtn = modalChangePassword.querySelector('.account-btn-submit');
            if (savePwdBtn) {
                savePwdBtn.addEventListener('click', function () {
                    const inputs = modalChangePassword.querySelectorAll('.account-input');
                    const currentPwd = inputs[0].value;
                    const newPwd = inputs[1].value;
                    const confirmPwd = inputs[2].value;

                    if (!currentPwd || !newPwd || !confirmPwd) {
                        alert('Пожалуйста, заполните все поля');
                        return;
                    }

                    if (newPwd !== confirmPwd) {
                        alert('Новые пароли не совпадают!');
                        return;
                    }

                    if (newPwd.length < 6) {
                        alert('Пароль должен быть как минимум 6 символов');
                        return;
                    }

                    // Очищаем поля и закрываем модаль
                    inputs.forEach(input => input.value = '');
                    alert('✓ Пароль успешно изменён!');
                    closeModal('modalChangePassword');
                });
            }
        }

        // Редактировать профиль
        const modalEditProfile = document.getElementById('modalEditProfile');
        if (modalEditProfile) {
            const inputs = modalEditProfile.querySelectorAll('.account-input');
            const saveProfileBtn = modalEditProfile.querySelector('.account-btn-submit');

            if (saveProfileBtn) {
                saveProfileBtn.addEventListener('click', function () {
                    const newName = inputs[0].value;
                    const newEmail = inputs[1].value;

                    if (!newName.trim()) {
                        alert('Пожалуйста, введите имя');
                        return;
                    }

                    // Обновляем данные в интерфейсе
                    document.getElementById('userName').textContent = newName;
                    if (newEmail) document.getElementById('userEmail').textContent = newEmail;

                    inputs.forEach(input => input.value = '');
                    alert('✓ Профиль успешно обновлён!');
                    closeModal('modalEditProfile');
                });
            }
        }

        // Выбор языка
        const modalLanguage = document.getElementById('modalLanguage');
        if (modalLanguage) {
            const langOptions = modalLanguage.querySelectorAll('.language-option');
            langOptions.forEach(btn => {
                btn.addEventListener('click', function () {
                    const lang = this.getAttribute('data-lang');
                    const langName = this.querySelector('.lang-name').textContent;

                    // Меняем язык в системе
                    currentLang = lang;
                    try {
                        updatePageText(lang);
                        console.log('Language changed to:', lang);
                    } catch (e) {
                        console.error('Language change error:', e);
                    }

                    closeModal('modalLanguage');
                });
            });
        }

        // Экспортировать данные
        const modalExportData = document.getElementById('modalExportData');
        if (modalExportData) {
            const exportBtns = modalExportData.querySelectorAll('.export-btn');

            exportBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const format = this.getAttribute('data-format');

                    const userData = {
                        name: document.getElementById('userName').textContent,
                        email: document.getElementById('userEmail').textContent,
                        regDate: document.getElementById('userRegDate').textContent,
                        totalDiets: document.getElementById('totalDiets').textContent,
                        exportDate: new Date().toLocaleString('ru-RU')
                    };

                    if (format === 'csv') {
                        // CSV export
                        const csv = Object.entries(userData).map(([k, v]) => `${k},${v}`).join('\n');
                        downloadFile(csv, `cosmodiet_export_${new Date().getTime()}.csv`, 'text/csv');
                    } else if (format === 'json') {
                        // JSON export
                        const json = JSON.stringify(userData, null, 2);
                        downloadFile(json, `cosmodiet_export_${new Date().getTime()}.json`, 'application/json');
                    }

                    closeModal('modalExportData');
                });
            });

            // Helper function for downloading
            function downloadFile(content, filename, type) {
                const blob = new Blob([content], { type: type });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                link.click();
                URL.revokeObjectURL(url);
            }
        }

        // ============================================
        // АНАЛИЗЫ - Кнопка "ПОСМОТРЕТЬ"
        // ============================================

        // Делегирование для динамических кнопок view-diet
        document.addEventListener('click', function (e) {
            if (e.target.closest('.view-diet')) {
                const dietId = e.target.closest('.view-diet').getAttribute('data-id');

                // Открываем модаль с анализом
                const modal = document.getElementById('modalViewAnalysis');
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    console.log('Просмотр анализа для рациона:', dietId);
                }
            }
        });

        // ============================================
        // ВКЛАДКИ ДАШБОРДА
        // ============================================

        const dashTabs = document.querySelectorAll('.dash-tab');
        const dashPanels = document.querySelectorAll('.dash-panel');

        dashTabs.forEach(tab => {
            tab.addEventListener('click', function () {
                const tabName = this.getAttribute('data-tab');

                // Скрываем все панели
                dashPanels.forEach(panel => {
                    panel.classList.remove('active');
                    panel.style.display = 'none';
                });

                // Удаляем active класс со всех табов
                dashTabs.forEach(t => t.classList.remove('active'));

                // Активируем выбранный таб
                this.classList.add('active');

                // Показываем соответствующую панель
                const panel = document.getElementById('tab-' + tabName);
                if (panel) {
                    panel.style.display = 'block';
                    panel.classList.add('active');
                }

                // Загружаем данные при переключении на вкладку "Рационы"
                if (tabName === 'diets') {
                    loadDiets();
                }
            });
        });

    </script>

</body>

</html>